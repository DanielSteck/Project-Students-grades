<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:3527/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Daniel Steck">
<meta name="dcterms.date" content="2023-04-07">

<title>Project_student_grades</title>
<style class="anchorjs"></style><style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="./Project_student_grades_files/clipboard.min.js.Download"></script><style type="text/css" id="operaUserStyle"></style>
<script src="./Project_student_grades_files/quarto.js.Download"></script>
<script src="./Project_student_grades_files/popper.min.js.Download"></script>
<script src="./Project_student_grades_files/tippy.umd.min.js.Download"></script>
<script src="./Project_student_grades_files/anchor.min.js.Download"></script>
<link href="./Project_student_grades_files/tippy.css" rel="stylesheet">
<link href="./Project_student_grades_files/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="./Project_student_grades_files/bootstrap.min.js.Download"></script>
<link href="./Project_student_grades_files/bootstrap-icons.css" rel="stylesheet">
<link href="./Project_student_grades_files/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


<style type="text/css">:root zeus-ad, :root topadblock, :root span[id^="ezoic-pub-ad-placeholder-"], :root guj-ad, :root gpt-ad, :root div[jsdata*="CarouselPLA-"][data-id^="CarouselPLA-"], :root div[id^="zergnet-widget"], :root div[id^="yandex_ad"], :root div[id^="vuukle-ad-"], :root div[id^="sticky_ad_"], :root div[id^="rc-widget-"], :root div[id^="gpt_ad_"], :root div[id^="ezoic-pub-ad-"], :root div[id^="div-gpt-"], :root div[id^="dfp-ad-"], :root div[id^="advads_ad_"], :root div[id^="adspot-"], :root div[id^="ads300_250-widget-"], :root div[id^="ads300_100-widget-"], :root div[id^="ads250_250-widget-"], :root div[id^="adrotate_widgets-"], :root div[id^="adngin-"], :root div[id^="_vdo_ads_player_ai_"], :root div[id*="ScriptRoot"], :root div[id*="MarketGid"], :root div[data-native_ad], :root div[data-mini-ad-unit], :root div[data-insertion], :root div[data-id-advertdfpconf], :root div[data-google-query-id], :root hl-adsense, :root div[data-contentexchange-widget], :root div[data-content="Advertisement"], :root div[data-alias="300x250 Ad 2"], :root div[data-alias="300x250 Ad 1"], :root div[data-adzone], :root div[data-adunit-path], :root div[data-ad-wrapper], :root div[data-ad-targeting], :root div[data-ad-placeholder], :root div[class^="native-ad-"], :root div[data-dfp-id], :root div[class^="kiwi-ad-wrapper"], :root div[class^="Adstyled__AdWrapper-"], :root div[aria-label="Ads"], :root display-ads, :root display-ad-component, :root aside[id^="adrotate_widgets-"], :root article.ad, :root ark-top-ad, :root app-advertisement, :root app-ad, :root amp-fx-flying-carpet, :root amp-embed[type="taboola"], :root amp-connatix-player, :root amp-ad-custom, :root ad-shield-ads, :root a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root citrus-ad-wrapper, :root a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"][target="_blank"], :root a[onmousedown^="this.href='http://paid.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root a[href^="https://yogacomplyfuel.com/"], :root a[href^="https://www.purevpn.com/"][href*="&utm_source=aff-"], :root a[href^="https://www.privateinternetaccess.com/"] > img, :root a[href^="https://www.onlineusershielder.com/"], :root a[href^="https://www.mypornstarcams.com/landing/click/"], :root a[href^="https://financeads.net/tc.php?"], :root a[href^="https://www.mrskin.com/tour"], :root a[href^="https://www.kingsoffetish.com/tour?partner_id="], :root a[href^="https://www.infowarsstore.com/"] > img, :root a[href^="https://t.grtyi.com/"], :root a[href^="https://www.highperformancecpmgate.com/"], :root a[href^="https://www.highcpmrevenuenetwork.com/"], :root a[href^="https://www.get-express-vpn.com/offer/"], :root a[href^="https://www.financeads.net/tc.php?"], :root a[href^="https://www.brazzersnetwork.com/landing/"], :root div[class^="Display_displayAd"], :root a[href^="https://www.sheetmusicplus.com/?aff_id="], :root a[href^="https://www.bang.com/?aff="], :root a[href^="https://www.adxsrve.com/"], :root [data-template-type="nativead"], :root a[href^="https://www.adultempire.com/"][href*="?partner_id="], :root a[href^="https://webroutetrk.com/"], :root a[href^="https://twinrdsyn.com/"], :root a[href^="https://tsartech.g2afse.com/"], :root [href^="https://www.mypatriotsupply.com/"] > img, :root a[href^="https://trk.softonixs.xyz/"], :root a[href^="https://trk.nfl-online-streams.club/"], :root a[href^="https://tracking.avapartner.com/"], :root a[href^="https://track.afcpatrk.com/"], :root a[href^="https://track.adform.net/"], :root a[href^="https://torguard.net/aff.php"] > img, :root div[data-adname], :root a[href^="https://thechleads.pro/"], :root [data-role="tile-ads-module"], :root a[href^="https://adsrv4k.com/"], :root a[href^="https://go.xlviirdr.com"], :root a[href^="https://thaudray.com/"], :root a[href^="https://www.5mno3.com/"], :root a[href^="https://taghaugh.com/"], :root a[href^="https://click.candyoffers.com/"], :root [href^="https://zstacklife.com/"] img, :root a[href^="https://t.aslnk.link/"], :root a[href^="https://t.adating.link/"], :root a[href^="https://go.trackitalltheway.com/"], :root [href^="https://track.fiverr.com/visit/"] > img, :root a[href^="https://syndication.exoclick.com/"], :root a[href^="https://syndication.dynsrvtbg.com/"], :root a[href^="https://streamate.com/landing/click/"], :root a[href^="https://ad.doubleclick.net/"], :root a[href^="https://static.fleshlight.com/images/banners/"], :root a[href^="https://go.strpjmp.com/"], :root a[href^="https://refpa4903566.top/"], :root a[href^="https://prf.hn/click/"][href*="/camref:"] > img, :root a[href^="https://serve.awmdelivery.com/"], :root a[href^="https://prf.hn/click/"][href*="/adref:"] > img, :root [href^="https://r.kraken.com/"], :root a[href^="https://mmwebhandler.aff-online.com/"], :root a[href^="https://www.bet365.com/"][href*="affiliate="], :root a[href^="https://pb-track.com/"], :root a[href^="https://paid.outbrain.com/network/redir?"], :root div[id^="ad_position_"], :root a[href^="https://ovb.im/"], :root div[id^="ad-div-"], :root a[href^="https://newbinotracs.com/"], :root a[href^="https://natour.naughtyamerica.com/track/"], :root [href^="https://stvkr.com/"], :root a[href^="https://mediaserver.entainpartners.com/renderBanner.do?"], :root [href^="https://www.herbanomic.com/"] > img, :root a[href^="https://maymooth-stopic.com/"], :root a[href^="https://loboclick.com"], :root [href^="https://routewebtk.com/"], :root a[href^="https://see.kmisln.com/"], :root a[href^="https://a.bestcontentweb.top/"], :root a[href^="https://lobimax.com/"], :root a[href^="https://lead1.pl/"], :root a[href^="https://refpa.top/"], :root a[href^="https://landing.brazzersnetwork.com/"], :root a[href^="https://ads.leovegas.com/redirect.aspx?"], :root a[href^="https://land.brazzersnetwork.com/landing/"], :root a[href^="https://juicyads.in/"], :root a[href^="https://itubego.com/video-downloader/?affid="], :root a[href^="https://iqbroker.com/"][href*="?aff="], :root a[href^="https://incisivetrk.cvtr.io/click?"], :root [data-revive-zoneid], :root a[href^="https://googleads.g.doubleclick.net/pcs/click"], :root a[href^="https://clk.wrenchsound.store/"], :root a[href^="https://go.zybrdr.com"], :root [href^="http://join.michelle-austin.com/"], :root [class^="tile-picker__CitrusBannerContainer-sc-"], :root a[href^="https://go.xxxiijmp.com"], :root a[href^="https://go.xtbaffiliates.com/"], :root a[href^="https://ismlks.com/"], :root a[href^="//a.bestcontentfare.top/"], :root [href^="https://www.mypillow.com/"] > img, :root a[href^="https://azpresearch.club/"], :root a[href^="https://go.xlirdr.com"], :root [data-css-class="dfp-inarticle"], :root .card-captioned.crd > .crd--cnt > .s2nPlayer, :root a[href^="https://go.tmrjmp.com"], :root a[href^="https://go.skinstrip.net"][href*="?campaignId="], :root a[href^="https://go.markets.com/visit/?bta="], :root a[href^="https://billing.purevpn.com/aff.php"] > img, :root a[href^="https://go.hpyrdr.com/"], :root a[href^="https://go.goaserv.com/"], :root a[href^="https://track.wg-aff.com"], :root a[href^="https://go.ebrokerserve.com/"], :root a[href^="https://go.dmzjmp.com"], :root a[href^="https://twinrdsrv.com/"], :root a[href^="https://go.admjmp.com/"], :root a[href^="https://www.nutaku.net/signup/landing/"], :root [href^="https://kingered-banctours.com/"], :root a[href^="https://get.surfshark.net/aff_c?"][href*="&aff_id="] > img, :root a-ad, :root a[href^="https://affiliate.rusvpn.com/click.php?"], :root a[href^="https://geniusdexchange.com/"], :root a[href^="https://frameworkdeserve.com/"], :root a[href^="https://flirtandsweets.life/"], :root a[href^="https://www.mrskin.com/account/"], :root bottomadblock, :root a[href^="https://fertilitycommand.com/"], :root [data-freestar-ad], :root a[href^="https://fc.lc/ref/"], :root div[data-native-ad], :root a[href^="https://engine.trackingdesks.com/"], :root [href^="https://totlnkcl.com/"], :root a[href^="https://www.adskeeper.com"], :root a[data-redirect^="https://paid.outbrain.com/network/redir?"], :root [href^="https://www.reimageplus.com/"], :root a[href^="https://engine.phn.doublepimp.com/"], :root a[href^="https://engine.blueistheneworanges.com/"], :root a[href^="https://wantopticalfreelance.com/"], :root a[href^="https://dl-protect.net/"], :root a[href^="https://clixtrac.com/"], :root a[href^="https://mediaserver.gvcaffiliates.com/renderBanner.do?"], :root a[href^="https://join.dreamsexworld.com/"], :root a[href^="https://click.linksynergy.com/fs-bin/"], :root AD-TRIPLE-BOX, :root a[href^="https://click.hoolig.app/"], :root a[href^="https://track.totalav.com/"], :root img[src^="https://images.purevpnaffiliates.com"], :root a[href^="https://porntubemate.com/"], :root a[href^="http://www.gfrevenge.com/landing/"], :root a[href^="https://clickadilla.com/"], :root a[href^="https://click.dtiserv2.com/"], :root a[href^="https://go.xlvirdr.com"], :root a[href^="https://claring-loccelkin.com/"], :root [class^="s2nPlayer"], :root a[href^="https://chaturbate.jjgirls.com/?track="], :root a[href^="https://www.nudeidols.com/cams/"], :root a[href^="https://chaturbate.com/in/?track="], :root a[href^="https://chaturbate.com/in/?tour="], :root a[href^="https://cams.imagetwist.com/in/?track="], :root a[href^="https://cam4com.go2cloud.org/"], :root a[href^="https://bongacams2.com/track?"], :root a[href^="https://www.sheetmusicplus.com/"][href*="?aff_id="], :root a[href^="https://bngpt.com/"], :root a[href^="https://bluedelivery.pro/"], :root #topstuff > #tads, :root a[href^="https://black77854.com/"], :root a[href^="https://ndt5.net/"], :root a[href^="https://batheunits.com/"], :root a[target="_blank"][onmousedown="this.href^='http://paid.outbrain.com/network/redir?"], :root a[href^="https://banners.livepartners.com/"], :root a[href^="https://m.do.co/c/"] > img, :root [href="https://masstortfinancing.com"] img, :root a[href^="https://bongacams10.com/track?"], :root a[href^="https://albionsoftwares.com/"], :root a[href^="https://t.hrtye.com/"], :root a[href^="https://go.etoro.com/"] > img, :root a[href^="https://join.sexworld3d.com/track/"], :root a[href^="https://intenseaffiliates.com/redirect/"], :root a[href^="https://aweptjmp.com/"], :root a[href^="https://ads.ad4game.com/"], :root [id^="google_ads_iframe"], :root a[href^="https://syndication.optimizesrv.com/"], :root a[href^="https://affpa.top/"], :root a[href^="https://adnetwrk.com/"], :root a[href^="https://adjoincomprise.com/"], :root [href^="http://misslinkvocation.com/"], :root a[href^="https://adclick.g.doubleclick.net/"], :root a[href^="https://go.nordvpn.net/aff"] > img, :root [href^="http://clicks.totemcash.com/"], :root a[href^="https://misspkl.com/"], :root a[href^="https://ad.zanox.com/ppc/"] > img, :root a[href^="https://ad.kubiccomps.icu/"], :root a[href^="https://adswick.com/"], :root a[href^="https://a.bestcontentoperation.top/"], :root [data-m-ad-id], :root a[href^="https://a-ads.com/"], :root [href="https://ourgoldguy.com/contact/"] img, :root a[href^="https://brightadnetwork.com/"], :root [href^="https://www.avantlink.com/click.php"] img, :root a[href^="http://www.onwebcam.com/random?t_link="], :root a[href^="https://awentw.com/"], :root a[href^="https://www.googleadservices.com/pagead/aclk?"], :root a[href^="http://www.mrskin.com/tour"], :root a[href^="https://agacelebir.com/"], :root a[href^="https://spygasm.com/track?"], :root a[href^="http://d2.zedo.com/"], :root a[href^="http://www.friendlyduck.com/AF_"], :root a[href^="http://trk.globwo.online/"], :root a[href^="https://prf.hn/click/"][href*="/creativeref:"] > img, :root a[href^="http://www.adultempire.com/unlimited/promo?"][href*="&partner_id="], :root a[href^="http://traffic.tc-clicks.com/"], :root a[href^="http://tour.mrskin.com/"], :root a[href^="https://join.virtualtaboo.com/track/"], :root a[href^="https://funkydaters.com/"], :root [id^="ad_sky"], :root a[href^="http://https://www.get-express-vpn.com/offer/"], :root div[id^="google_dfp_"], :root a[href^="http://googleads.g.doubleclick.net/pcs/click"], :root .rc-cta[data-target], :root [href^="http://go.cm-trk2.com/"], :root a[href^="http://click.payserve.com/"], :root a[href^="https://porngames.adult/?SID="], :root a[href^="https://landing1.brazzersnetwork.com"], :root #slashboxes > .deals-rail, :root [href^="http://globsads.com/"], :root [href^="https://www.brighteonstore.com/products/"] img, :root a[href^="http://bc.vc/?r="], :root a[href^="https://mityneedn.com/"], :root [href^="http://homemoviestube.com/"], :root a[href^="http://ad.doubleclick.net/"], :root a[href^="https://a2.adform.net/"], :root a[href^="http://static.fleshlight.com/images/banners/"], :root a[href^="https://a.adtng.com/"], :root a[href^="//pubads.g.doubleclick.net/"], :root [data-d-ad-id], :root a[href*=".engine.adglare.net/"], :root [data-dynamic-ads], :root a[data-widget-outbrain-redirect^="http://paid.outbrain.com/network/redir?"], :root [data-ad-width], :root [href^="https://join.playboyplus.com/track/"], :root a[data-url^="http://paid.outbrain.com/network/redir?"] + .author, :root a[href^="https://axdsz.pro/"], :root a[href^="http://bodelen.com/"], :root a[data-oburl^="https://paid.outbrain.com/network/redir?"], :root [href^="https://cpa.10kfreesilver.com/"], :root a[href^="https://a.bestcontentfood.top/"], :root a[href^="https://reinstandpointdumbest.com/"], :root a[data-obtrack^="http://paid.outbrain.com/network/redir?"], :root a[href^="http://wct.link/"], :root [href^="https://goldforyourfuture.com/clk.trk"] img, :root [href^="https://infinitytrk.com/"], :root [onclick^="location.href='http://www.reimageplus.com"], :root .commercial-unit-mobile-top .jackpot-main-content-container > .UpgKEd + .nZZLFc > .vci, :root [id^="section-ad-banner"], :root .commercial-unit-mobile-top > div[data-pla="1"], :root a[href^="https://go.julrdr.com/"], :root .trc_rbox_div .syndicatedItemUB, :root [href^="https://zone.gotrackier.com/"], :root [href^="https://www.targetingpartner.com/"], :root [href^="https://detachedbates.com/"], :root a[href^="https://fourwhenstatistics.com/"], :root [href^="https://www.restoro.com/"], :root [href^="https://ilovemyfreedoms.com/landing-"], :root a[href^="https://staRTgaming.net/tienda/"], :root a[href^="https://STaRtgAmInG.net/tienda/"], :root a[href^="https://fastestvpn.com/lifetime-special-deal?a_aid="], :root a[href^="https://tour.mrskin.com/"], :root div[id^="ad-position-"], :root a[href^="http://adultfriendfinder.com/go/page/landing"], :root a[href^="http://affiliate.glbtracker.com/"], :root a[href^="https://leg.xyz/?track="], :root div[id^="crt-"][style], :root a[href^="http://adultgames.xxx/"], :root a[href^="https://traffic.bannerator.com/"], :root [href^="https://shiftnetwork.infusionsoft.com/go/"] > img, :root a[onmousedown^="this.href='http://paid.outbrain.com/network/redir?"][target="_blank"], :root [href^="https://secure.bmtmicro.com/servlets/"], :root a[href^="https://losingoldfry.com/"], :root .scroll-fixable.rail-right > .deals-rail, :root a[href^="https://oackoubs.com/"], :root a[href^="https://awptjmp.com/"], :root a[href^="https://go.goasrv.com/"], :root .commercial-unit-mobile-top > .v7hl4d, :root [href^="http://mypillow.com/"] > img, :root a[href^="http://bongacams.com/track?"], :root a[href^="https://fleshlight.sjv.io/"], :root [data-ad-manager-id], :root a[href^="https://promo-bc.com/"], :root a[href^="https://clicks.pipaffiliates.com/"], :root [href^="https://noqreport.com/"] > img, :root a[href^="https://go.hpyjmp.com"], :root ADS-RIGHT, :root [href^="https://mystore.com/"] > img, :root [href^="https://mypatriotsupply.com/"] > img, :root [href^="https://mylead.global/stl/"] > img, :root #leader-companion > a[href], :root a[href^="https://transfer.xe.com/signup/track/redirect?"], :root .vid-present > .van_vid_carousel__padding, :root a[href^="https://go.xxxijmp.com"], :root [href^="https://istlnkcl.com/"], :root [href^="https://www.hostg.xyz/"] > img, :root .section-subheader > .section-hotel-prices-header, :root [href^="https://go.affiliatexe.com/"], :root [href^="https://go.4rabettraff.com/"], :root a[href^="https://tm-offers.gamingadult.com/"], :root [href^="https://charmingdatings.life/"], :root [href^="https://glersakr.com/"], :root ins.adsbygoogle, :root a[href^="https://1startfiledownload1.com/"], :root .trc_rbox_border_elm .syndicatedItem, :root a[href^="http://www.onclickmega.com/jump/next.php?"], :root a[href^="http://adf.ly/?id="], :root a[href^="https://wittered-mainging.com/"], :root [href^="https://engine.gettopple.com/"], :root a[href^="https://go.gldrdr.com/"], :root [data-id^="div-gpt-ad"], :root [href^="https://awbbjmp.com/"], :root a[href^="https://k2s.cc/pr/"], :root [href^="https://affect3dnetwork.com/track/"], :root a[href^="https://camfapr.com/landing/click/"], :root [href="//sexcams.plus/"], :root a[href^="https://go.currency.com/"], :root [href^="http://www.mypillow.com/"] > img, :root div[id^="div-ads-"], :root [href^="https://rapidgator.net/article/premium/ref/"], :root a[href^="https://www.sugarinstant.com/?partner_id="], :root a[href^="https://adultfriendfinder.com/go/page/landing"], :root [href^="https://join3.bannedsextapes.com"], :root div[data-spotim-slot], :root [href^="https://antiagingbed.com/discount/"] > img, :root a[href^="https://go.247traffic.com/"], :root [href^="https://join.girlsoutwest.com/"], :root [href^="http://trafficare.net/"], :root a[href^="https://tc.tradetracker.net/"] > img, :root a[href^="https://adserver.adreactor.com/"], :root [href^="http://join.shemalesfromhell.com/"], :root [id^="ad_slider"], :root a[href^="http://www.adultdvdempire.com/?partner_id="][href*="&utm_"], :root [href^="http://join.shemale.xxx/"], :root a[href^="https://ads.betfair.com/redirect.aspx?"], :root [href^="http://www.fleshlightgirls.com/"], :root [href^="http://join.trannies-fuck.com/"], :root .trc_rbox .syndicatedItem, :root a[href^="http://cam4com.go2cloud.org/aff_c?"], :root a[href^="https://cpmspace.com/"], :root [href^="https://freecourseweb.com/"] > .sitefriend, :root a[href^="https://thefacux.com/"], :root a[href^="https://ads.planetwin365affiliate.com/redirect.aspx?"], :root [href^="http://join.rodneymoore.com/"], :root a[href*=".trust.zone"], :root [href^="https://shrugartisticelder.com"], :root [href^="https://go.xlrdr.com"], :root div[id^="lazyad-"], :root a[href^="http://com-1.pro/"], :root [name^="google_ads_iframe"], :root a[href^="https://go.xxxjmp.com"], :root [data-desktop-ad-id], :root [href^="https://wct.link/"], :root div[recirculation-ad-container], :root [href^="https://traffserve.com/"], :root #kt_player > a[target="_blank"], :root [href="https://www.masstortfinancing.com/"] > img, :root .ob_container .item-container-obpd, :root [id^="div-gpt-ad"], :root [href^="https://mypillow.com/"] > img, :root [href^="https://ad.admitad.com/"], :root a[href^="https://u.expresstech.io/"], :root [href="https://jdrucker.com/gold"] > img, :root [href^="https://v.investologic.co.uk/"], :root [href^="https://cipledecline.buzz/"], :root a[href^="https://track.ultravpn.com/"], :root [href^="https://goldcometals.com/clk.trk"], :root [href^="https://fancentro.com/"], :root [data-mobile-ad-id], :root a[href^="http://tc.tradetracker.net/"] > img, :root a[href^="https://www.geekbuying.com/dynamic-ads/"], :root a[href^="http://affiliates.thrixxx.com/"], :root #searchResultsList > div > div[onclick$="'inline.ad'});"], :root a[href^="https://trk.sportsflix4k.club/"], :root a[href^="https://go.xlivrdr.com"], :root [onclick*="content.ad/"], :root AMP-AD, :root [data-ad-cls], :root a[href^="https://www.goldenfrog.com/vyprvpn?offer_id="][href*="&aff_id="], :root [id^="ad-wrap-"], :root div[id^="taboola-stream-"], :root [href^="https://go.astutelinks.com/"], :root [class^="amp-ad-"], :root [href^="https://affiliate.fastcomet.com/"] > img, :root [class^="adDisplay-module"], :root a[href^="http://go.xtbaffiliates.com/"], :root [href^="https://click2cvs.com/"], :root a[href^="https://www.liquidfire.mobi/"], :root .grid > .container > #aside-promotion, :root DFP-AD, :root AD-SLOT, :root .ob_dual_right > .ob_ads_header ~ .odb_div, :root .trc_related_container div[data-item-syndicated="true"], :root [href^="http://join.shemalepornstar.com/"], :root a[href^="https://go.xlviiirdr.com"], :root .trc_rbox_div .syndicatedItem, :root div[data-adunit], :root app-large-ad, :root [href^="https://turtlebids.irauctions.com/"] img, :root a[href^="https://iactrivago.ampxdirect.com/"], :root a[href^="https://a.medfoodhome.com/"], :root [data-ad-module], :root a[href^="https://go.cmtaffiliates.com/"], :root [data-name="adaptiveConstructorAd"], :root [href^="https://optimizedelite.com/"] > img, :root [href^="https://trackfin.asia/"], :root .plistaList > .plista_widget_underArticle_item[data-type="pet"], :root a[href*="//lkstrck2.com/"], :root .plistaList > .itemLinkPET, :root a[href^="https://startgAming.net/tienda/"], :root [href^="https://safer-redirection.com"], :root atf-ad-slot, :root .commercial-unit-mobile-top .jackpot-main-content-container > .UpgKEd + .nZZLFc > div > .vci, :root a[href^="http://partners.etoro.com/"], :root [data-advadstrackid], :root #atvcap + #tvcap > .mnr-c > .commercial-unit-mobile-top, :root a[href^="https://traffdaq.com/"], :root [class^="div-gpt-ad"], :root a[href^="https://bs.serving-sys.com"], :root [href^="http://residenceseeingstanding.com/"], :root [href^="https://www.cloudways.com/en/?id"], :root a[href^="https://refpazkjixes.top/"], :root #mgb-container > #mgb, :root a[href^="https://join.virtuallust3d.com/"], :root #taw > .med + div > #tvcap > .mnr-c:not(.qs-ic) > .commercial-unit-mobile-top, :root [data-adblockkey], :root [data-ez-name] { display: none !important; }</style></head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Project_student_grades</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
<p class="subtitle lead">Programming languages for Data Science</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Daniel Steck </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 7, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="academic-honesty-statement" class="level1">
<h1>Academic Honesty Statement</h1>
<p>I, Daniel Steck, hereby state that I have not communicated with or gained information in any way from my classmates or anyone other than the Professor during this exam, and that all work is my own.</p>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This project was created within the module “Programming languages for Data Science.This project will follow the data science life-cycle, which consists of four main topics:</p>
<ul>
<li><p>Plan</p></li>
<li><p>Data</p></li>
<li><p>Model</p></li>
<li><p>Deployment</p></li>
</ul>
<p>This project focuses on using all techniques which were learned during the lecture. Moreover it has the target to learn further topics during the project and to implement them (e.g.&nbsp;Deployment via ventiver or shiny).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./Project_student_grades_files/Data_Science_lifecycle.PNG" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Data Science Lifecycle</figcaption><p></p>
</figure>
</div>
<p>The whole documentation of this project can be also found on Github: <a href="https://github.com/DanielSteck/Project-Students-grades">Github Repo: Student Grades</a></p>
</section>
<section id="plan" class="level1">
<h1>Plan</h1>
<p>Before a project can be started the planning needs to be made first. Without the planning for the project the result often is not what was requested at the beginning. Therefore it is necessary to define what shall be made in the project and what are the targets of this project to be considered succesfull. Moreover, an usecase is needed as the project shall bring a benefit for the company or the results and models can be sold to others.</p>
<p>To sum is up this chapter is basis for the project and defines the usecase, the problem which shall be solved in this project and the targets which shall be achieved in order to determine at the end if the project was successful or not.</p>
<p>Note: The description in this chapter is without sources for the statements as the target was to describe a fitting “plan” chapter for this project. Some statements wont be applicable, but in the following they will be used as an assumption for the project.</p>
<section id="identify-use-case" class="level2">
<h2 class="anchored" data-anchor-id="identify-use-case">Identify use case<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#identify-use-case" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>We are a new start-up which is solving issues in companies with the latest data science technology. As we are not know in the market yet, our costumers are a bit skeptical regarding our skills. Due to that we got the job to show our skills within this project. For this our costumer provided this dataset from kaggle:</p>
<ul>
<li><a href="https://www.kaggle.com/datasets/rkiattisak/student-performance-in-mathematics?resource=download">Predict the performance of students</a></li>
</ul>
<p>This dataset contains 1000 observations of students and their performance on their exams. Moreover, several further information for each student is given.</p>
<p>The target is to predict the performance of students based on demographic criteria and other factors. In addition to that several research questions shall be answered (e.g which impact has the level of education of the parents on their exam score). In order to prove our skills to the costumer the following topics shall be included within that project:</p>
<ul>
<li><p>SQL queries</p></li>
<li><p>R queries</p></li>
<li><p>Data visualization and the impact on the target variable</p></li>
<li><p>Data Preprocessing</p></li>
<li><p>Train different types of machine learning models</p></li>
<li><p>Determine the best model and deploy it</p></li>
</ul>
</section>
<section id="frame-the-problem" class="level2">
<h2 class="anchored" data-anchor-id="frame-the-problem">Frame the problem<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#frame-the-problem" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>In the past it was noticed that the gap between students with very good marks and the one with quite bad ones is getting bigger and bigger, but it is not known yet why this keeps happening. This also leads to a gap when the students finish their education and they are going to work. In the future more and more people are not having the required qualification for their jobs as they are not able to finish their education due to bad marks. This needs to be stopped and changes in the system have to be made in order to improve this and to keep the country ready for the developments in the next decades.</p>
<p>As our costumer is responsible for the education system they are very curious of the results from this project. Based on what can be learned in the queries and visualizations as well as in the models, they plan to make changes in their education system. For example a special assistance for students who are not performing that good. It depends on the results of this project to identify possible target groups who need more support in order to improve their skills and performance in exams. Therefore, it is important to learn which groups have disadvantages in their education and why. Only with this information it is possible to support them. As more and more students with a good mark are finishing their education the qualification in the labour market will increase and this will improve the economic power of our country.</p>
<p>The model shall support on this task. As it will be possible to play around with the characteristics of the students and their background. The model can be the basis for the decisions for the education system.</p>
<p>Due to the fact that a numeric target variable shall be predicted, this project focuses on the supervised learning and a regression model shall be created.</p>
</section>
<section id="identify-variables" class="level2">
<h2 class="anchored" data-anchor-id="identify-variables">Identify variables<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#identify-variables" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>The provided dataset contains eight different variables and 1000 observations. Each observation represents one student (data was anonymized) with his/her score in exams and their characteristics and their background.</p>
<p>Variables in the dataset:</p>
<ul>
<li><p><strong>Gender:</strong> Gender of the student. This variable has two levels in this dataset. The available data is split either in male or female.</p></li>
<li><p><strong>Race/ethnicity:</strong> This columns describe the racial or ethnic background of the students (e.g.&nbsp;Asian, African-American, Hispanic, etc.). Note: This column was transferred in groups without information which group displays which ethnicity. This was done to get the result in this project only on the data itself and to avoid the influence of prejudges and stereotypes.</p></li>
<li><p><strong>Parental level of education:</strong> What is the highest level of education attained from the students parents.There is no differentiation between the parents and only the highest level of education is listed here. The level of education from the other parent is ignored.</p></li>
<li><p><strong>Lunch:</strong> What type of lunch do the students receive: Either the standard type of lunch or a free/reduced option. The free/reduced option is probably only available for students who have a family which is kind of poor.</p></li>
<li><p><strong>Test preparation course:</strong> Did the students complete a test preparation course or not?</p></li>
<li><p><strong>Math score:</strong> Score which was achieved by the student in a standardized mathematics test.</p></li>
<li><p><strong>Reading score:</strong> Score which was achieved by the student in a standardized reading test.</p></li>
<li><p><strong>Writing score:</strong> Score which was achieved by the student in a standardized writing test.</p></li>
</ul>
<p>Target of this project is to get a general overview of the students performance. It is not needed to know in which course they are performing good or bad. This is important for the later steps to work with the data, but not for now. Therefore, a more generic variable shall be created which combines the total performance of the students instead of the detailed overview for math, reading and writing.</p>
</section>
<section id="define-metrics" class="level2">
<h2 class="anchored" data-anchor-id="define-metrics">Define metrics<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#define-metrics" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>This project has several aspects which determine that is was successful. Note not all aspects need to be fulfilled, but there are some targets which should be fulfilled. One of this aspects is that new insights are made based on the available data set and our costumer can use this information as a basis for their decisions. It would be great if these results could be visualized in an interactive dashboard to work with the data.</p>
<p>Regarding the modelling process it is important that the model shall be deployed at the end of the project. Moreover some metrics are defined in order to define if the model is fulfilling the requested performance. As a regression model shall be created the following metrics are suitable in order the check if the model is performing good or not. These metrics are commonly used for evaluating and reporting the performance of regression models.</p>
<ul>
<li><p><strong>RMSE/MSE:</strong> Root Mean Squared Error / Mean Squared Error. The MSE is the mean of the squared differences between the predicted and the actual target values in the dataset. This means the result displays the squared units. This often leads to confusion (e.g.&nbsp;if the result is in squared dollars). The RMSE is the root of this value and is therefore often used when reporting results. Target for this project is to have a RMSE value which is smaller than 10.</p></li>
<li><p><strong>R squared:</strong> Measure how much variability in dependent variable can be explained by the model. This metric is the square of Correlation Coefficient (R). The values of this metrics are between 0 and 1. The higher this metric is indicates a better fit between prediction and the actual variable. For this project the R squared value shall be at 0.4, as we only have categorical variables in the dataset.</p></li>
<li><p><strong>MAE:</strong> Mean absolute error is the average of the absolute errors. Unlike the RMSE the changes in the MAE are linear and therefore intuitive. The created model at the end shall have a MAE of less than ten percent of the mean of the target value. After the data analysis was made it can be said that this would be less than 6.9.</p></li>
</ul>
<p>Beside these metrics the model has to be for sure better than a model which only predicts the average of the target variable.</p>
<p>Sources: <a href="https://machinelearningmastery.com/regression-metrics-for-machine-learning/">Machine Learning Mastery: Regression Metrics</a>, <a href="https://towardsdatascience.com/what-are-the-best-metrics-to-evaluate-your-regression-model-418ca481755b">Towards Data Science: 3 best metrics to evaluate Regression Model?</a></p>
</section>
</section>
<section id="data" class="level1">
<h1>Data</h1>
<p>Within this chapter the data will be ingested and analyzed. Furthermore the data is also added into a SQL database and will be used for making queries.</p>
<section id="sql-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="sql-data-analysis">SQL data analysis<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#sql-data-analysis" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Before the steps of the data science lifecycle are made, some SQL queries will be made on the data, in order to answer questions from our costumers.</p>
<p>First the DBI library is loaded and afterwards the data is added into the database.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="http://localhost:3527/#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>, <span class="at">collapse =</span> <span class="cn">TRUE</span>) </span>
<span id="cb1-2"><a href="http://localhost:3527/#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (DBI)</span>
<span id="cb1-3"><a href="http://localhost:3527/#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Paket 'tidyverse' wurde unter R Version 4.2.3 erstellt</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Paket 'ggplot2' wurde unter R Version 4.2.3 erstellt</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Paket 'tibble' wurde unter R Version 4.2.3 erstellt</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Paket 'dplyr' wurde unter R Version 4.2.3 erstellt</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.1     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="http://localhost:3527/#cb7-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-2"><a href="http://localhost:3527/#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Connection to database </span></span>
<span id="cb7-3"><a href="http://localhost:3527/#cb7-3" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="st">":memory:"</span>)</span>
<span id="cb7-4"><a href="http://localhost:3527/#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="http://localhost:3527/#cb7-5" aria-hidden="true" tabindex="-1"></a>path_sql <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/DanielSteck/Project-Students-grades/main/exams.csv"</span></span>
<span id="cb7-6"><a href="http://localhost:3527/#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="http://localhost:3527/#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Write data into database</span></span>
<span id="cb7-8"><a href="http://localhost:3527/#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">"exams_sql"</span>, <span class="fu">read_csv</span>(path_sql, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>))</span>
<span id="cb7-9"><a href="http://localhost:3527/#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="http://localhost:3527/#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#show table in database</span></span>
<span id="cb7-11"><a href="http://localhost:3527/#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="http://localhost:3527/#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(con)</span>
<span id="cb7-13"><a href="http://localhost:3527/#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "exams_sql"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="first-look-on-the-data" class="level3">
<h3 class="anchored" data-anchor-id="first-look-on-the-data">First look on the data<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#first-look-on-the-data" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb8-1"><a href="http://localhost:3527/#cb8-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-2"><a href="http://localhost:3527/#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb8-3"><a href="http://localhost:3527/#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 5%">
<col style="width: 11%">
<col style="width: 22%">
<col style="width: 10%">
<col style="width: 19%">
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">gender</th>
<th style="text-align: left;">race/ethnicity</th>
<th style="text-align: left;">parental level of education</th>
<th style="text-align: left;">lunch</th>
<th style="text-align: left;">test preparation course</th>
<th style="text-align: right;">math score</th>
<th style="text-align: right;">reading score</th>
<th style="text-align: right;">writing score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">some college</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">96</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">87</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">some college</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">76</td>
<td style="text-align: right;">77</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">some college</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">63</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">86</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">54</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group E</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">82</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">80</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">80</td>
<td style="text-align: right;">75</td>
<td style="text-align: right;">73</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">bachelor’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">69</td>
<td style="text-align: right;">77</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The dataset contains 1000 observation with eight variables. Three out of these 8 variables are the students performance on different exams.</p>
<p>Show the first 10 observations:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb9-1"><a href="http://localhost:3527/#cb9-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-2"><a href="http://localhost:3527/#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb9-3"><a href="http://localhost:3527/#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb9-4"><a href="http://localhost:3527/#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 5%">
<col style="width: 11%">
<col style="width: 22%">
<col style="width: 10%">
<col style="width: 19%">
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">gender</th>
<th style="text-align: left;">race/ethnicity</th>
<th style="text-align: left;">parental level of education</th>
<th style="text-align: left;">lunch</th>
<th style="text-align: left;">test preparation course</th>
<th style="text-align: right;">math score</th>
<th style="text-align: right;">reading score</th>
<th style="text-align: right;">writing score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">some college</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">96</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">87</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">some college</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">76</td>
<td style="text-align: right;">77</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">some college</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">63</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">86</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">54</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group E</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">82</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">80</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">80</td>
<td style="text-align: right;">75</td>
<td style="text-align: right;">73</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">bachelor’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">69</td>
<td style="text-align: right;">77</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>It can be seen that the columns should be renamed as there are e.g.&nbsp;spaces included:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><a href="http://localhost:3527/#cb10-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-2"><a href="http://localhost:3527/#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> exams_sql</span>
<span id="cb10-3"><a href="http://localhost:3527/#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">RENAME</span> <span class="kw">COLUMN</span> <span class="ot">"race/ethnicity"</span> <span class="kw">TO</span> ethnicity</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb11-1"><a href="http://localhost:3527/#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> exams_sql</span>
<span id="cb11-2"><a href="http://localhost:3527/#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">RENAME</span> <span class="kw">COLUMN</span> <span class="ot">"parental level of education"</span> <span class="kw">TO</span> parent_education</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb12-1"><a href="http://localhost:3527/#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> exams_sql</span>
<span id="cb12-2"><a href="http://localhost:3527/#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">RENAME</span> <span class="kw">COLUMN</span> <span class="ot">"test preparation course"</span> <span class="kw">TO</span> prep_course</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb13-1"><a href="http://localhost:3527/#cb13-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-2"><a href="http://localhost:3527/#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> exams_sql</span>
<span id="cb13-3"><a href="http://localhost:3527/#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">RENAME</span> <span class="kw">COLUMN</span> <span class="ot">"math score"</span> <span class="kw">TO</span> math_score</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb14-1"><a href="http://localhost:3527/#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> exams_sql</span>
<span id="cb14-2"><a href="http://localhost:3527/#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">RENAME</span> <span class="kw">COLUMN</span> <span class="ot">"reading score"</span> <span class="kw">TO</span> reading_score</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb15-1"><a href="http://localhost:3527/#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> exams_sql</span>
<span id="cb15-2"><a href="http://localhost:3527/#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">RENAME</span> <span class="kw">COLUMN</span> <span class="ot">"writing score"</span> <span class="kw">TO</span> writing_score;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Check the renamed columns</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb16-1"><a href="http://localhost:3527/#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb16-2"><a href="http://localhost:3527/#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">gender</th>
<th style="text-align: left;">ethnicity</th>
<th style="text-align: left;">parent_education</th>
<th style="text-align: left;">lunch</th>
<th style="text-align: left;">prep_course</th>
<th style="text-align: right;">math_score</th>
<th style="text-align: right;">reading_score</th>
<th style="text-align: right;">writing_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">some college</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">96</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">87</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">some college</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">76</td>
<td style="text-align: right;">77</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">some college</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">63</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">86</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">54</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group E</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">82</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">80</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">80</td>
<td style="text-align: right;">75</td>
<td style="text-align: right;">73</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">bachelor’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">69</td>
<td style="text-align: right;">77</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Lets have a look on the gender and their performance in math.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb17-1"><a href="http://localhost:3527/#cb17-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-2"><a href="http://localhost:3527/#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> gender, <span class="ot">"math_score"</span></span>
<span id="cb17-3"><a href="http://localhost:3527/#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">gender</th>
<th style="text-align: right;">math_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: right;">59</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: right;">96</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: right;">57</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: right;">70</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: right;">83</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: right;">68</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: right;">82</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: right;">46</td>
</tr>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: right;">80</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: right;">57</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="data-exploration" class="level3">
<h3 class="anchored" data-anchor-id="data-exploration">Data Exploration<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#data-exploration" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>How many different genders are in the dataset?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb18-1"><a href="http://localhost:3527/#cb18-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-2"><a href="http://localhost:3527/#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> gender</span>
<span id="cb18-3"><a href="http://localhost:3527/#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">gender</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">female</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>How many different ethnicities are in the dataset?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb19-1"><a href="http://localhost:3527/#cb19-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-2"><a href="http://localhost:3527/#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> ethnicity</span>
<span id="cb19-3"><a href="http://localhost:3527/#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>5 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">ethnicity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">group D</td>
</tr>
<tr class="even">
<td style="text-align: left;">group B</td>
</tr>
<tr class="odd">
<td style="text-align: left;">group C</td>
</tr>
<tr class="even">
<td style="text-align: left;">group E</td>
</tr>
<tr class="odd">
<td style="text-align: left;">group A</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>How many different forms of parent_education are in the dataset?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb20-1"><a href="http://localhost:3527/#cb20-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-2"><a href="http://localhost:3527/#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> parent_education</span>
<span id="cb20-3"><a href="http://localhost:3527/#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>6 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">parent_education</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">some college</td>
</tr>
<tr class="even">
<td style="text-align: left;">associate’s degree</td>
</tr>
<tr class="odd">
<td style="text-align: left;">some high school</td>
</tr>
<tr class="even">
<td style="text-align: left;">bachelor’s degree</td>
</tr>
<tr class="odd">
<td style="text-align: left;">master’s degree</td>
</tr>
<tr class="even">
<td style="text-align: left;">high school</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>How many different lunch types are in the dataset?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb21-1"><a href="http://localhost:3527/#cb21-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-2"><a href="http://localhost:3527/#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> lunch</span>
<span id="cb21-3"><a href="http://localhost:3527/#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">lunch</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">standard</td>
</tr>
<tr class="even">
<td style="text-align: left;">free/reduced</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>How many different types of preparation courses are in the dataset?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb22-1"><a href="http://localhost:3527/#cb22-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-2"><a href="http://localhost:3527/#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> prep_course</span>
<span id="cb22-3"><a href="http://localhost:3527/#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">prep_course</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">completed</td>
</tr>
<tr class="even">
<td style="text-align: left;">none</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>How many observations are in the data set?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb23-1"><a href="http://localhost:3527/#cb23-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-2"><a href="http://localhost:3527/#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb23-3"><a href="http://localhost:3527/#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">as</span> <span class="kw">rows</span></span>
<span id="cb23-4"><a href="http://localhost:3527/#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">rows</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1000</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>How many observations are available for each parent_education</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb24-1"><a href="http://localhost:3527/#cb24-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-2"><a href="http://localhost:3527/#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> parent_education,</span>
<span id="cb24-3"><a href="http://localhost:3527/#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COUNT</span>(parent_education) <span class="kw">AS</span> amount_of_observations</span>
<span id="cb24-4"><a href="http://localhost:3527/#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb24-5"><a href="http://localhost:3527/#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> parent_education</span>
<span id="cb24-6"><a href="http://localhost:3527/#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> amount_of_observations <span class="kw">DESC</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>6 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">parent_education</th>
<th style="text-align: right;">amount_of_observations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">some college</td>
<td style="text-align: right;">224</td>
</tr>
<tr class="even">
<td style="text-align: left;">high school</td>
<td style="text-align: right;">215</td>
</tr>
<tr class="odd">
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: right;">204</td>
</tr>
<tr class="even">
<td style="text-align: left;">some high school</td>
<td style="text-align: right;">177</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bachelor’s degree</td>
<td style="text-align: right;">105</td>
</tr>
<tr class="even">
<td style="text-align: left;">master’s degree</td>
<td style="text-align: right;">75</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>How many students have a math score above 80?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb25-1"><a href="http://localhost:3527/#cb25-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-2"><a href="http://localhost:3527/#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb25-3"><a href="http://localhost:3527/#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">as</span> students_above_math_80</span>
<span id="cb25-4"><a href="http://localhost:3527/#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb25-5"><a href="http://localhost:3527/#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> math_score <span class="op">&gt;</span> <span class="dv">80</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">students_above_math_80</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">227</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Have a look at the obervations of students with more than 90 in reading score</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb26-1"><a href="http://localhost:3527/#cb26-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2"><a href="http://localhost:3527/#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb26-3"><a href="http://localhost:3527/#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb26-4"><a href="http://localhost:3527/#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> reading_score <span class="op">&gt;</span><span class="dv">90</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">gender</th>
<th style="text-align: left;">ethnicity</th>
<th style="text-align: left;">parent_education</th>
<th style="text-align: left;">lunch</th>
<th style="text-align: left;">prep_course</th>
<th style="text-align: right;">math_score</th>
<th style="text-align: right;">reading_score</th>
<th style="text-align: right;">writing_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">96</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">87</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">87</td>
<td style="text-align: right;">92</td>
<td style="text-align: right;">81</td>
</tr>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">84</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group E</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">89</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">93</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">88</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">84</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">89</td>
</tr>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">master’s degree</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">95</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">master’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">91</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">96</td>
<td style="text-align: right;">97</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group E</td>
<td style="text-align: left;">bachelor’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">98</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">100</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Check the observations of all females with more than 90 in writing score. The result shall be ordered by writing score (decreasing)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb27-1"><a href="http://localhost:3527/#cb27-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-2"><a href="http://localhost:3527/#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span><span class="op">*</span></span>
<span id="cb27-3"><a href="http://localhost:3527/#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb27-4"><a href="http://localhost:3527/#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> gender <span class="op">=</span><span class="ot">"female"</span> <span class="kw">AND</span> writing_score<span class="op">&gt;</span><span class="dv">90</span></span>
<span id="cb27-5"><a href="http://localhost:3527/#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> writing_score <span class="kw">DESC</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">gender</th>
<th style="text-align: left;">ethnicity</th>
<th style="text-align: left;">parent_education</th>
<th style="text-align: left;">lunch</th>
<th style="text-align: left;">prep_course</th>
<th style="text-align: right;">math_score</th>
<th style="text-align: right;">reading_score</th>
<th style="text-align: right;">writing_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group E</td>
<td style="text-align: left;">bachelor’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">98</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">99</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group E</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">96</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">82</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group E</td>
<td style="text-align: left;">some college</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">96</td>
<td style="text-align: right;">98</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">bachelor’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">some college</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">92</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">master’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">87</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">89</td>
<td style="text-align: right;">98</td>
<td style="text-align: right;">99</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Check all observations of students with more than 90% in one of the exams and made NO prep_course</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb28-1"><a href="http://localhost:3527/#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb28-2"><a href="http://localhost:3527/#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb28-3"><a href="http://localhost:3527/#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> prep_course <span class="op">=</span> <span class="ot">"none"</span> <span class="kw">AND</span> (math_score<span class="op">&gt;</span><span class="dv">90</span> <span class="kw">OR</span> writing_score<span class="op">&gt;</span><span class="dv">90</span> <span class="kw">OR</span> reading_score<span class="op">&gt;</span><span class="dv">90</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">gender</th>
<th style="text-align: left;">ethnicity</th>
<th style="text-align: left;">parent_education</th>
<th style="text-align: left;">lunch</th>
<th style="text-align: left;">prep_course</th>
<th style="text-align: right;">math_score</th>
<th style="text-align: right;">reading_score</th>
<th style="text-align: right;">writing_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">associate’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">96</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">87</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">87</td>
<td style="text-align: right;">92</td>
<td style="text-align: right;">81</td>
</tr>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">some high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">84</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">master’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">91</td>
</tr>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group E</td>
<td style="text-align: left;">some college</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">98</td>
<td style="text-align: right;">79</td>
<td style="text-align: right;">85</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group E</td>
<td style="text-align: left;">bachelor’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">98</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group E</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">96</td>
<td style="text-align: right;">88</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">bachelor’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">84</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">93</td>
</tr>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">bachelor’s degree</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">82</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">master’s degree</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">98</td>
<td style="text-align: right;">94</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>What are the average exam scores of the different ethnicies?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb29-1"><a href="http://localhost:3527/#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ethnicity,</span>
<span id="cb29-2"><a href="http://localhost:3527/#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">AVG</span>(math_score) <span class="kw">as</span> avg_math,</span>
<span id="cb29-3"><a href="http://localhost:3527/#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">AVG</span>(reading_score) <span class="kw">as</span> avg_read,</span>
<span id="cb29-4"><a href="http://localhost:3527/#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">AVG</span>(writing_score) <span class="kw">as</span> avg_write</span>
<span id="cb29-5"><a href="http://localhost:3527/#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb29-6"><a href="http://localhost:3527/#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> ethnicity;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>5 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">ethnicity</th>
<th style="text-align: right;">avg_math</th>
<th style="text-align: right;">avg_read</th>
<th style="text-align: right;">avg_write</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">group A</td>
<td style="text-align: right;">65.69620</td>
<td style="text-align: right;">69.20253</td>
<td style="text-align: right;">67.84810</td>
</tr>
<tr class="even">
<td style="text-align: left;">group B</td>
<td style="text-align: right;">64.07071</td>
<td style="text-align: right;">68.53030</td>
<td style="text-align: right;">66.71717</td>
</tr>
<tr class="odd">
<td style="text-align: left;">group C</td>
<td style="text-align: right;">65.51084</td>
<td style="text-align: right;">68.60991</td>
<td style="text-align: right;">66.80495</td>
</tr>
<tr class="even">
<td style="text-align: left;">group D</td>
<td style="text-align: right;">68.87938</td>
<td style="text-align: right;">70.92996</td>
<td style="text-align: right;">71.05837</td>
</tr>
<tr class="odd">
<td style="text-align: left;">group E</td>
<td style="text-align: right;">77.42657</td>
<td style="text-align: right;">76.61538</td>
<td style="text-align: right;">75.03496</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>What are the best exam scores?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb30-1"><a href="http://localhost:3527/#cb30-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-2"><a href="http://localhost:3527/#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb30-3"><a href="http://localhost:3527/#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MAX</span>(math_score) <span class="kw">as</span> max_math,</span>
<span id="cb30-4"><a href="http://localhost:3527/#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MAX</span>(reading_score) <span class="kw">as</span> max_read,</span>
<span id="cb30-5"><a href="http://localhost:3527/#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MAX</span>(writing_score) <span class="kw">as</span> max_write</span>
<span id="cb30-6"><a href="http://localhost:3527/#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">max_math</th>
<th style="text-align: right;">max_read</th>
<th style="text-align: right;">max_write</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">100</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">100</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>What are the worst exam scores?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb31-1"><a href="http://localhost:3527/#cb31-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-2"><a href="http://localhost:3527/#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb31-3"><a href="http://localhost:3527/#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MIN</span>(math_score) <span class="kw">as</span> min_math,</span>
<span id="cb31-4"><a href="http://localhost:3527/#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MIN</span>(reading_score) <span class="kw">as</span> min_read,</span>
<span id="cb31-5"><a href="http://localhost:3527/#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MIN</span>(writing_score) <span class="kw">as</span> min_write</span>
<span id="cb31-6"><a href="http://localhost:3527/#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">min_math</th>
<th style="text-align: right;">min_read</th>
<th style="text-align: right;">min_write</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">15</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">15</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>What are the average exam scores for the genders?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb32-1"><a href="http://localhost:3527/#cb32-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2"><a href="http://localhost:3527/#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> gender,</span>
<span id="cb32-3"><a href="http://localhost:3527/#cb32-3" aria-hidden="true" tabindex="-1"></a>  (<span class="fu">AVG</span>(math_score) <span class="op">+</span> <span class="fu">AVG</span>(reading_score) <span class="op">+</span> <span class="fu">AVG</span>(writing_score)) <span class="op">/</span><span class="dv">3</span> <span class="kw">as</span> avg_exams_score</span>
<span id="cb32-4"><a href="http://localhost:3527/#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb32-5"><a href="http://localhost:3527/#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> gender;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">gender</th>
<th style="text-align: right;">avg_exams_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: right;">70.56233</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: right;">67.70472</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Show all obervations which are parents_education “high_school” and have an average score in exams between 80 and 90. Result shall be ordered descending by avg_exam_score</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb33-1"><a href="http://localhost:3527/#cb33-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-2"><a href="http://localhost:3527/#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> gender, ethnicity, parent_education, lunch, prep_course,</span>
<span id="cb33-3"><a href="http://localhost:3527/#cb33-3" aria-hidden="true" tabindex="-1"></a>  (math_score <span class="op">+</span> reading_score <span class="op">+</span> writing_score) <span class="op">/</span><span class="dv">3</span> <span class="kw">as</span> avg_exams_score</span>
<span id="cb33-4"><a href="http://localhost:3527/#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb33-5"><a href="http://localhost:3527/#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> parent_education <span class="op">=</span> <span class="ot">"high school"</span> <span class="kw">AND</span> avg_exams_score <span class="kw">BETWEEN</span> <span class="dv">80</span> <span class="kw">AND</span> <span class="dv">90</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 22%">
<col style="width: 17%">
<col style="width: 16%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">gender</th>
<th style="text-align: left;">ethnicity</th>
<th style="text-align: left;">parent_education</th>
<th style="text-align: left;">lunch</th>
<th style="text-align: left;">prep_course</th>
<th style="text-align: right;">avg_exams_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">86.66667</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">82.00000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">80.00000</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group B</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">86.66667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">free/reduced</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">83.33333</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">80.33333</td>
</tr>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group C</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">81.00000</td>
</tr>
<tr class="even">
<td style="text-align: left;">female</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">none</td>
<td style="text-align: right;">83.00000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group A</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">83.66667</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: left;">group D</td>
<td style="text-align: left;">high school</td>
<td style="text-align: left;">standard</td>
<td style="text-align: left;">completed</td>
<td style="text-align: right;">81.00000</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Show all male ethnicities which have an average_exam score less than 70. Order the avg_exams_score ascending.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb34-1"><a href="http://localhost:3527/#cb34-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-2"><a href="http://localhost:3527/#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ethnicity,</span>
<span id="cb34-3"><a href="http://localhost:3527/#cb34-3" aria-hidden="true" tabindex="-1"></a>  (<span class="fu">AVG</span>(math_score) <span class="op">+</span> <span class="fu">AVG</span>(reading_score) <span class="op">+</span> <span class="fu">AVG</span>(writing_score)) <span class="op">/</span><span class="dv">3</span> <span class="kw">as</span> avg_exams_score</span>
<span id="cb34-4"><a href="http://localhost:3527/#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb34-5"><a href="http://localhost:3527/#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> gender<span class="op">=</span><span class="ot">"male"</span></span>
<span id="cb34-6"><a href="http://localhost:3527/#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> ethnicity</span>
<span id="cb34-7"><a href="http://localhost:3527/#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="kw">HAVING</span> avg_exams_score <span class="op">&lt;</span> <span class="dv">70</span></span>
<span id="cb34-8"><a href="http://localhost:3527/#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> avg_exams_score;</span>
<span id="cb34-9"><a href="http://localhost:3527/#cb34-9" aria-hidden="true" tabindex="-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped">
<caption>3 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">ethnicity</th>
<th style="text-align: right;">avg_exams_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">group B</td>
<td style="text-align: right;">63.30233</td>
</tr>
<tr class="even">
<td style="text-align: left;">group C</td>
<td style="text-align: right;">65.34690</td>
</tr>
<tr class="odd">
<td style="text-align: left;">group A</td>
<td style="text-align: right;">66.07895</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="data-ingestion" class="level2">
<h2 class="anchored" data-anchor-id="data-ingestion">Data ingestion<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#data-ingestion" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>After the SQL queries were successfully made the next step is to continue with the steps in R. All following steps will be made within R.</p>
<section id="data-import" class="level3">
<h3 class="anchored" data-anchor-id="data-import">Data Import<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#data-import" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>First of all the data will be imported from a github repo. The initial data set can be found on Kaggle: <a href="https://www.kaggle.com/datasets/rkiattisak/student-performance-in-mathematics?resource=download">Kaggle: Student performance prediction</a></p>
<p>In order to have the same data the whole time this dataset was downloaded and added to my github repo. in case that the kaggle dataset might be updated.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="http://localhost:3527/#cb35-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>, <span class="at">collapse =</span> <span class="cn">TRUE</span>)</span>
<span id="cb35-2"><a href="http://localhost:3527/#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb35-3"><a href="http://localhost:3527/#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="http://localhost:3527/#cb35-4" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/DanielSteck/Project-Students-grades/main/exams.csv"</span></span>
<span id="cb35-5"><a href="http://localhost:3527/#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="http://localhost:3527/#cb35-6" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(path, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="clean-data" class="level3">
<h3 class="anchored" data-anchor-id="clean-data">Clean Data<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#clean-data" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Lets have a look on the first rows to get an expression of the data.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="http://localhost:3527/#cb36-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-2"><a href="http://localhost:3527/#cb36-2" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="http://localhost:3527/#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb36-4"><a href="http://localhost:3527/#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 5 × 8</span></span>
<span id="cb36-5"><a href="http://localhost:3527/#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   gender `race/ethnicity` parental level of educa…¹ lunch test preparation cou…²</span></span>
<span id="cb36-6"><a href="http://localhost:3527/#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;  &lt;chr&gt;            &lt;chr&gt;                     &lt;chr&gt; &lt;chr&gt;                 </span></span>
<span id="cb36-7"><a href="http://localhost:3527/#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 female group D          some college              stan… completed             </span></span>
<span id="cb36-8"><a href="http://localhost:3527/#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 male   group D          associate's degree        stan… none                  </span></span>
<span id="cb36-9"><a href="http://localhost:3527/#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 female group D          some college              free… none                  </span></span>
<span id="cb36-10"><a href="http://localhost:3527/#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 male   group B          some college              free… none                  </span></span>
<span id="cb36-11"><a href="http://localhost:3527/#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 female group D          associate's degree        stan… none                  </span></span>
<span id="cb36-12"><a href="http://localhost:3527/#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ abbreviated names: ¹​`parental level of education`,</span></span>
<span id="cb36-13"><a href="http://localhost:3527/#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="do">## #   ²​`test preparation course`</span></span>
<span id="cb36-14"><a href="http://localhost:3527/#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ 3 more variables: `math score` &lt;dbl&gt;, `reading score` &lt;dbl&gt;,</span></span>
<span id="cb36-15"><a href="http://localhost:3527/#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="do">## #   `writing score` &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Before further steps can be made, the columns names need to be corrected, as they are including spaces and special characters. To remove those, the janitor package will be used.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="http://localhost:3527/#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb37-2"><a href="http://localhost:3527/#cb37-2" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> exams <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="http://localhost:3527/#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Beside the cleaning of the names, some variables shall be renamed in order to shorten the length.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="http://localhost:3527/#cb38-1" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> <span class="fu">rename</span>(exams, <span class="at">ethnic_group =</span> race_ethnicity)</span>
<span id="cb38-2"><a href="http://localhost:3527/#cb38-2" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> <span class="fu">rename</span>(exams, <span class="at">parent_education =</span> parental_level_of_education)</span>
<span id="cb38-3"><a href="http://localhost:3527/#cb38-3" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> <span class="fu">rename</span>(exams, <span class="at">test_prep =</span> test_preparation_course)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The available data consist of 1000 rows. The available features are gender, ethnic_group, parent_education, lunch, test_prep, math_score, reading_score, writing_score.</p>
</section>
<section id="missing-data" class="level3">
<h3 class="anchored" data-anchor-id="missing-data">Missing data<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#missing-data" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Lets have a look on the description of the data to check the formats.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="http://localhost:3527/#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span> (exams)</span>
<span id="cb39-2"><a href="http://localhost:3527/#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 1,000</span></span>
<span id="cb39-3"><a href="http://localhost:3527/#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Columns: 8</span></span>
<span id="cb39-4"><a href="http://localhost:3527/#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $ gender           &lt;chr&gt; "female", "male", "female", "male", "female", "male",…</span></span>
<span id="cb39-5"><a href="http://localhost:3527/#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="do">## $ ethnic_group     &lt;chr&gt; "group D", "group D", "group D", "group B", "group D"…</span></span>
<span id="cb39-6"><a href="http://localhost:3527/#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="do">## $ parent_education &lt;chr&gt; "some college", "associate's degree", "some college",…</span></span>
<span id="cb39-7"><a href="http://localhost:3527/#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="do">## $ lunch            &lt;chr&gt; "standard", "standard", "free/reduced", "free/reduced…</span></span>
<span id="cb39-8"><a href="http://localhost:3527/#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="do">## $ test_prep        &lt;chr&gt; "completed", "none", "none", "none", "none", "none", …</span></span>
<span id="cb39-9"><a href="http://localhost:3527/#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="do">## $ math_score       &lt;dbl&gt; 59, 96, 57, 70, 83, 68, 82, 46, 80, 57, 74, 53, 76, 7…</span></span>
<span id="cb39-10"><a href="http://localhost:3527/#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="do">## $ reading_score    &lt;dbl&gt; 70, 93, 76, 70, 85, 57, 83, 61, 75, 69, 69, 50, 74, 7…</span></span>
<span id="cb39-11"><a href="http://localhost:3527/#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="do">## $ writing_score    &lt;dbl&gt; 78, 87, 77, 63, 86, 54, 80, 58, 73, 77, 69, 49, 76, 7…</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Is there any missing data? lets check it:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="http://localhost:3527/#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(visdat)</span>
<span id="cb40-2"><a href="http://localhost:3527/#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_dat</span>(exams)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/missing_values_graphic-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Alternative method for missing data:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="http://localhost:3527/#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(exams) <span class="sc">%&gt;%</span> <span class="fu">colSums</span>()</span>
<span id="cb41-2"><a href="http://localhost:3527/#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="do">##           gender     ethnic_group parent_education            lunch </span></span>
<span id="cb41-3"><a href="http://localhost:3527/#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="do">##                0                0                0                0 </span></span>
<span id="cb41-4"><a href="http://localhost:3527/#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="do">##        test_prep       math_score    reading_score    writing_score </span></span>
<span id="cb41-5"><a href="http://localhost:3527/#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="do">##                0                0                0                0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>There are no missing numbers in the dataset. Three variables (scores in the exam) are numeric, the other variables are characters.</p>
</section>
<section id="format-data" class="level3">
<h3 class="anchored" data-anchor-id="format-data">Format data<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#format-data" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Lets have a look on the character columns and check if they should be formatted as factor.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="http://localhost:3527/#cb42-1" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="http://localhost:3527/#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(gender,</span>
<span id="cb42-3"><a href="http://localhost:3527/#cb42-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb42-4"><a href="http://localhost:3527/#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 2</span></span>
<span id="cb42-5"><a href="http://localhost:3527/#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   gender     n</span></span>
<span id="cb42-6"><a href="http://localhost:3527/#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;  &lt;int&gt;</span></span>
<span id="cb42-7"><a href="http://localhost:3527/#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 male     508</span></span>
<span id="cb42-8"><a href="http://localhost:3527/#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 female   492</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="http://localhost:3527/#cb43-1" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="http://localhost:3527/#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ethnic_group,</span>
<span id="cb43-3"><a href="http://localhost:3527/#cb43-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-4"><a href="http://localhost:3527/#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 5 × 2</span></span>
<span id="cb43-5"><a href="http://localhost:3527/#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   ethnic_group     n</span></span>
<span id="cb43-6"><a href="http://localhost:3527/#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;        &lt;int&gt;</span></span>
<span id="cb43-7"><a href="http://localhost:3527/#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 group C        323</span></span>
<span id="cb43-8"><a href="http://localhost:3527/#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 group D        257</span></span>
<span id="cb43-9"><a href="http://localhost:3527/#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 group B        198</span></span>
<span id="cb43-10"><a href="http://localhost:3527/#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 group E        143</span></span>
<span id="cb43-11"><a href="http://localhost:3527/#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 group A         79</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="http://localhost:3527/#cb44-1" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="http://localhost:3527/#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(parent_education,</span>
<span id="cb44-3"><a href="http://localhost:3527/#cb44-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb44-4"><a href="http://localhost:3527/#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 × 2</span></span>
<span id="cb44-5"><a href="http://localhost:3527/#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   parent_education       n</span></span>
<span id="cb44-6"><a href="http://localhost:3527/#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;              &lt;int&gt;</span></span>
<span id="cb44-7"><a href="http://localhost:3527/#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 some college         224</span></span>
<span id="cb44-8"><a href="http://localhost:3527/#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 high school          215</span></span>
<span id="cb44-9"><a href="http://localhost:3527/#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 associate's degree   204</span></span>
<span id="cb44-10"><a href="http://localhost:3527/#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 some high school     177</span></span>
<span id="cb44-11"><a href="http://localhost:3527/#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 bachelor's degree    105</span></span>
<span id="cb44-12"><a href="http://localhost:3527/#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 master's degree       75</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="http://localhost:3527/#cb45-1" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="http://localhost:3527/#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(lunch,</span>
<span id="cb45-3"><a href="http://localhost:3527/#cb45-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-4"><a href="http://localhost:3527/#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 2</span></span>
<span id="cb45-5"><a href="http://localhost:3527/#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   lunch            n</span></span>
<span id="cb45-6"><a href="http://localhost:3527/#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;        &lt;int&gt;</span></span>
<span id="cb45-7"><a href="http://localhost:3527/#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 standard       660</span></span>
<span id="cb45-8"><a href="http://localhost:3527/#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 free/reduced   340</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="http://localhost:3527/#cb46-1" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="http://localhost:3527/#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(test_prep,</span>
<span id="cb46-3"><a href="http://localhost:3527/#cb46-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-4"><a href="http://localhost:3527/#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 2</span></span>
<span id="cb46-5"><a href="http://localhost:3527/#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   test_prep     n</span></span>
<span id="cb46-6"><a href="http://localhost:3527/#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;     &lt;int&gt;</span></span>
<span id="cb46-7"><a href="http://localhost:3527/#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 none        656</span></span>
<span id="cb46-8"><a href="http://localhost:3527/#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 completed   344</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>All character variables are having only a small amount of different levels. Therefore all character variables shall be transferred as factor.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="http://localhost:3527/#cb47-1" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> </span>
<span id="cb47-2"><a href="http://localhost:3527/#cb47-2" aria-hidden="true" tabindex="-1"></a>  exams <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="http://localhost:3527/#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), as.factor))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="create-new-variables" class="level3">
<h3 class="anchored" data-anchor-id="create-new-variables">Create new variables<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#create-new-variables" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Target of this project is to predict the students performance on exams. Therefore an additional column shall be added. This column shall include the average exam score of the students.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="http://localhost:3527/#cb48-1" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> exams<span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="http://localhost:3527/#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">avg_score =</span> (math_score <span class="sc">+</span> reading_score <span class="sc">+</span> writing_score)<span class="sc">/</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>As all other variables are not numeric, no further new variables can be created.</p>
</section>
<section id="data-overview" class="level3">
<h3 class="anchored" data-anchor-id="data-overview">Data overview<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#data-overview" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>After successfully cleaning, formatting and checking the data, lets have an overview of the data with the package <em>skimr</em>:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="http://localhost:3527/#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb49-2"><a href="http://localhost:3527/#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(exams)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">exams</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 17%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">gender</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">mal: 508, fem: 492</td>
</tr>
<tr class="even">
<td style="text-align: left;">ethnic_group</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">gro: 323, gro: 257, gro: 198, gro: 143</td>
</tr>
<tr class="odd">
<td style="text-align: left;">parent_education</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">som: 224, hig: 215, ass: 204, som: 177</td>
</tr>
<tr class="even">
<td style="text-align: left;">lunch</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">sta: 660, fre: 340</td>
</tr>
<tr class="odd">
<td style="text-align: left;">test_prep</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">non: 656, com: 344</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 17%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 3%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">math_score</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">67.81</td>
<td style="text-align: right;">15.25</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">58.00</td>
<td style="text-align: right;">68.00</td>
<td style="text-align: right;">79.25</td>
<td style="text-align: right;">100</td>
<td style="text-align: left;">▁▂▇▇▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">reading_score</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">70.38</td>
<td style="text-align: right;">14.11</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">61.00</td>
<td style="text-align: right;">70.50</td>
<td style="text-align: right;">80.00</td>
<td style="text-align: right;">100</td>
<td style="text-align: left;">▁▃▇▇▃</td>
</tr>
<tr class="odd">
<td style="text-align: left;">writing_score</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">69.14</td>
<td style="text-align: right;">15.03</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">59.00</td>
<td style="text-align: right;">70.00</td>
<td style="text-align: right;">80.00</td>
<td style="text-align: right;">100</td>
<td style="text-align: left;">▁▂▆▇▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">avg_score</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">69.11</td>
<td style="text-align: right;">14.03</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">59.58</td>
<td style="text-align: right;">69.67</td>
<td style="text-align: right;">79.33</td>
<td style="text-align: right;">100</td>
<td style="text-align: left;">▁▂▇▇▃</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The available data set consists of 1000 rows with in total 9 columns. Four columns are numeric while five are a factor.</p>
<p>Three factor variables have only two levels, while the other two have five and six levels. The distribution of the gender column in the two genders is quite balanced. The columns lunch and test_prep are split in 2:1 in their variables.</p>
<p>The distribution of the numeric variables is very similar. in general the math_score has the lowest values compared to the other three scores, but the difference is not that big. The statistics for p25, p50, p75, p100 as well as the histograms are looking very similar and the differences are only minor. The reading score has the best results in the exam.</p>
</section>
<section id="define-features-and-outcome-variable" class="level3">
<h3 class="anchored" data-anchor-id="define-features-and-outcome-variable">Define features and outcome variable<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#define-features-and-outcome-variable" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>In advance of the data splitting the definition of the target variable and the feature variables shall be made.</p>
<p>The performance in the exams shall be predicted, for this the average performance is sufficient. As the target is to predict the performance, the variables for math, reading and writing score must not be included into the feature list.</p>
<p>It would be also possible to make a use case for students which predicts e.g.&nbsp;the performance in math and also includes the students performance in the other exams. In this case only the general performance shall be predicted to see which generic attributes have a influence on students performance. Also exams are most time in a thigh schedule, which means that there wont be a lot of time between exams. Therefore it does not make sense to include also the performance in other exams to predict the performance in e.g.&nbsp;math. Moreover it takes some time until the results are available. So probably the students already had their exam before they receive the first results. Therefore the target in this project is the prediction of an average exam performance without including the performance in the other exams.</p>
<p>Nevertheless in the data exploration these other exam scores will be also included, but they wont go into the model.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="http://localhost:3527/#cb50-1" aria-hidden="true" tabindex="-1"></a>y_label <span class="ot">&lt;-</span> <span class="st">'avg_score'</span> <span class="co">#define target</span></span>
<span id="cb50-2"><a href="http://localhost:3527/#cb50-2" aria-hidden="true" tabindex="-1"></a>features <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'gender'</span>, <span class="st">'ethnic_group'</span>, <span class="st">'parent_education'</span>, <span class="st">'lunch'</span>, <span class="st">'test_prep'</span>) <span class="co">#define features</span></span>
<span id="cb50-3"><a href="http://localhost:3527/#cb50-3" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> exams <span class="sc">%&gt;%</span></span>
<span id="cb50-4"><a href="http://localhost:3527/#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(features))</span>
<span id="cb50-5"><a href="http://localhost:3527/#cb50-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> exams <span class="sc">%&gt;%</span></span>
<span id="cb50-6"><a href="http://localhost:3527/#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(y_label))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Our data is now prepared for the data splitting and for building the pipelines.</p>
</section>
</section>
<section id="data-splitting" class="level2">
<h2 class="anchored" data-anchor-id="data-splitting">Data splitting<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#data-splitting" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Before the data exploration can be started, the data shall be split into a training and test set. No insights from the test data shall be used as data insights. Test data was not seen before therefore no information given by test data can be used.</p>
<p>To ensure that the training and test set is representative of the various categories of <code>avg_score</code> in the whole dataset, lets have a look on the histogram</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="http://localhost:3527/#cb51-1" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb51-2"><a href="http://localhost:3527/#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(avg_score)) <span class="sc">+</span> </span>
<span id="cb51-3"><a href="http://localhost:3527/#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span> (<span class="at">bins=</span><span class="dv">6</span>) <span class="co">#tested several, 6 makes most sense </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/bins_target_variable-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The split data shall included equally data from each of the bins. In order the have the same results for each run, a fix seed is set.</p>
<p>Target is to have 80% of the data for training and 20% for testing.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="http://localhost:3527/#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rsample)</span>
<span id="cb52-2"><a href="http://localhost:3527/#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="http://localhost:3527/#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>) <span class="co">#for reproducability</span></span>
<span id="cb52-4"><a href="http://localhost:3527/#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="http://localhost:3527/#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co"># split in train and test data</span></span>
<span id="cb52-6"><a href="http://localhost:3527/#cb52-6" aria-hidden="true" tabindex="-1"></a>data_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span> (exams,</span>
<span id="cb52-7"><a href="http://localhost:3527/#cb52-7" aria-hidden="true" tabindex="-1"></a>                             <span class="at">prop =</span><span class="dv">4</span><span class="sc">/</span><span class="dv">5</span>,</span>
<span id="cb52-8"><a href="http://localhost:3527/#cb52-8" aria-hidden="true" tabindex="-1"></a>                             <span class="at">strat =</span> avg_score,</span>
<span id="cb52-9"><a href="http://localhost:3527/#cb52-9" aria-hidden="true" tabindex="-1"></a>                             <span class="at">breaks =</span> <span class="dv">6</span>)</span>
<span id="cb52-10"><a href="http://localhost:3527/#cb52-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-11"><a href="http://localhost:3527/#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create train dataframe</span></span>
<span id="cb52-12"><a href="http://localhost:3527/#cb52-12" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> <span class="fu">training</span>(data_split)</span>
<span id="cb52-13"><a href="http://localhost:3527/#cb52-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-14"><a href="http://localhost:3527/#cb52-14" aria-hidden="true" tabindex="-1"></a><span class="co">#create test data set</span></span>
<span id="cb52-15"><a href="http://localhost:3527/#cb52-15" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> <span class="fu">testing</span>(data_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="analyze-data" class="level2">
<h2 class="anchored" data-anchor-id="analyze-data">Analyze data<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#analyze-data" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>This chapter had the target to understand the training data and to see which variables have an influence on the outcome variable <strong>avg_score</strong>.</p>
<section id="data-exploration-set" class="level3">
<h3 class="anchored" data-anchor-id="data-exploration-set">Data exploration set<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#data-exploration-set" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>First step is to create a copy of the training data which will be used for the exploratory data analysis.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="http://localhost:3527/#cb53-1" aria-hidden="true" tabindex="-1"></a>df_explo <span class="ot">&lt;-</span> train_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="r-queries" class="level3">
<h3 class="anchored" data-anchor-id="r-queries">R queries<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#r-queries" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>First of all the data is explored with R queries and afterwards the visualization part is made.</p>
<p>Lets have a look on the statistics of the target variable <em>avg_score</em>*:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="http://localhost:3527/#cb54-1" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="http://localhost:3527/#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb54-3"><a href="http://localhost:3527/#cb54-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_score =</span> <span class="fu">min</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>) <span class="co"># na dependency not needed as no missing values, but it might be that data changes with an updated dataset</span></span>
<span id="cb54-4"><a href="http://localhost:3527/#cb54-4" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb54-5"><a href="http://localhost:3527/#cb54-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb54-6"><a href="http://localhost:3527/#cb54-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_score =</span> <span class="fu">median</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb54-7"><a href="http://localhost:3527/#cb54-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">std_score =</span> <span class="fu">sd</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb54-8"><a href="http://localhost:3527/#cb54-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_score =</span> <span class="fu">IQR</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb54-9"><a href="http://localhost:3527/#cb54-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1 =</span><span class="fu">quantile</span>(avg_score, <span class="at">probs =</span><span class="fl">0.25</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb54-10"><a href="http://localhost:3527/#cb54-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">quantile</span>(avg_score, <span class="at">probs =</span> <span class="fl">0.75</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb54-11"><a href="http://localhost:3527/#cb54-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_score =</span> <span class="fu">max</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>)</span>
<span id="cb54-12"><a href="http://localhost:3527/#cb54-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-13"><a href="http://localhost:3527/#cb54-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-14"><a href="http://localhost:3527/#cb54-14" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 × 8</span></span>
<span id="cb54-15"><a href="http://localhost:3527/#cb54-15" aria-hidden="true" tabindex="-1"></a><span class="do">##   min_score mean_score med_score std_score iqr_score    q1    q3 max_score</span></span>
<span id="cb54-16"><a href="http://localhost:3527/#cb54-16" aria-hidden="true" tabindex="-1"></a><span class="do">##       &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb54-17"><a href="http://localhost:3527/#cb54-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 1        20       69.1      69.7      14.1        20  59.3  79.3       100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The worst exam result is <code>20</code> while <code>100</code> is the best one. Moreover the mean and median values are almost similar and there is only a slight difference. This means that there are no big outliers included here (which is also easy to explain as 100 is the best possible performance in an exam). The IQR score of 20 tells us, that the difference between the 75th and 25th percentile is only having a difference of 20. So 50% of the data is within a difference of 20.</p>
<p>25% of the students have an exam score of less than 59,3 and 25% of the students are above 79,3. 50% of the students are between 59,3 and 79,3 (the IQR value can be seen here).</p>
<p>Moreover it is interesting how the median, mean and iqr, q1, q3 values are distributed within the categorical variables.</p>
<p>Lets have a look on the gender variable and sort the results descending.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="http://localhost:3527/#cb55-1" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span></span>
<span id="cb55-2"><a href="http://localhost:3527/#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="http://localhost:3527/#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb55-4"><a href="http://localhost:3527/#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb55-5"><a href="http://localhost:3527/#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_score =</span> <span class="fu">median</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb55-6"><a href="http://localhost:3527/#cb55-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_score =</span> <span class="fu">IQR</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb55-7"><a href="http://localhost:3527/#cb55-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1 =</span><span class="fu">quantile</span>(avg_score, <span class="at">probs =</span><span class="fl">0.25</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb55-8"><a href="http://localhost:3527/#cb55-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">quantile</span>(avg_score, <span class="at">probs =</span> <span class="fl">0.75</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb55-9"><a href="http://localhost:3527/#cb55-9" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb55-10"><a href="http://localhost:3527/#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="fu">desc</span>(med_score))</span>
<span id="cb55-11"><a href="http://localhost:3527/#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 6</span></span>
<span id="cb55-12"><a href="http://localhost:3527/#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   gender mean_score med_score iqr_score    q1    q3</span></span>
<span id="cb55-13"><a href="http://localhost:3527/#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;fct&gt;       &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb55-14"><a href="http://localhost:3527/#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 female       70.9      71.7      20    61.7  81.7</span></span>
<span id="cb55-15"><a href="http://localhost:3527/#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 male         67.3      67.7      19.8  57.7  77.4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The performance of female students is better than the performance of male students. The mean score for females is 3.3 higher and the median score is 4.0 higher.</p>
<p>Lets have a look on the ethic_group variable and sort the results descending.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="http://localhost:3527/#cb56-1" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="http://localhost:3527/#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ethnic_group) <span class="sc">%&gt;%</span></span>
<span id="cb56-3"><a href="http://localhost:3527/#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb56-4"><a href="http://localhost:3527/#cb56-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb56-5"><a href="http://localhost:3527/#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_score =</span> <span class="fu">median</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb56-6"><a href="http://localhost:3527/#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_score =</span> <span class="fu">IQR</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb56-7"><a href="http://localhost:3527/#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1 =</span><span class="fu">quantile</span>(avg_score, <span class="at">probs =</span><span class="fl">0.25</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb56-8"><a href="http://localhost:3527/#cb56-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">quantile</span>(avg_score, <span class="at">probs =</span> <span class="fl">0.75</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb56-9"><a href="http://localhost:3527/#cb56-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb56-10"><a href="http://localhost:3527/#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="fu">desc</span>(med_score))</span>
<span id="cb56-11"><a href="http://localhost:3527/#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 5 × 6</span></span>
<span id="cb56-12"><a href="http://localhost:3527/#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   ethnic_group mean_score med_score iqr_score    q1    q3</span></span>
<span id="cb56-13"><a href="http://localhost:3527/#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;fct&gt;             &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb56-14"><a href="http://localhost:3527/#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 group E            76.2      79        22    65.3  87.3</span></span>
<span id="cb56-15"><a href="http://localhost:3527/#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 group D            70.3      71        18.7  61    79.7</span></span>
<span id="cb56-16"><a href="http://localhost:3527/#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 group A            66.2      67.3      16.5  57.5  74  </span></span>
<span id="cb56-17"><a href="http://localhost:3527/#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 group B            66.3      67.3      20.7  55.7  76.3</span></span>
<span id="cb56-18"><a href="http://localhost:3527/#cb56-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 group C            67.2      67.3      17    59.3  76.3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The <code>group E</code> has the best performance in the exams. There is a huge gap compared to <code>group D</code>. Moreover there is almost no difference in mean and median between the other three groups. It might make sense to combine there groups into one group. But lets analyse this first in a visualization, because the IQR score is spreading a lot between these groups. For example the difference in the q1 is much higher than in the mean and median.</p>
<p>Lets have a look on the variable of parents education and sort the results descending.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="http://localhost:3527/#cb57-1" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span></span>
<span id="cb57-2"><a href="http://localhost:3527/#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(parent_education) <span class="sc">%&gt;%</span></span>
<span id="cb57-3"><a href="http://localhost:3527/#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb57-4"><a href="http://localhost:3527/#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb57-5"><a href="http://localhost:3527/#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_score =</span> <span class="fu">median</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb57-6"><a href="http://localhost:3527/#cb57-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_score =</span> <span class="fu">IQR</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb57-7"><a href="http://localhost:3527/#cb57-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1 =</span><span class="fu">quantile</span>(avg_score, <span class="at">probs =</span><span class="fl">0.25</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb57-8"><a href="http://localhost:3527/#cb57-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">quantile</span>(avg_score, <span class="at">probs =</span> <span class="fl">0.75</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb57-9"><a href="http://localhost:3527/#cb57-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb57-10"><a href="http://localhost:3527/#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="fu">desc</span>(med_score))</span>
<span id="cb57-11"><a href="http://localhost:3527/#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 × 6</span></span>
<span id="cb57-12"><a href="http://localhost:3527/#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   parent_education   mean_score med_score iqr_score    q1    q3</span></span>
<span id="cb57-13"><a href="http://localhost:3527/#cb57-13" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;fct&gt;                   &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb57-14"><a href="http://localhost:3527/#cb57-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 associate's degree       71.7      72        19.2  62.8  82  </span></span>
<span id="cb57-15"><a href="http://localhost:3527/#cb57-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 master's degree          71.3      71.8      19.5  62.3  81.8</span></span>
<span id="cb57-16"><a href="http://localhost:3527/#cb57-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 some college             69.6      71        20.2  59.1  79.2</span></span>
<span id="cb57-17"><a href="http://localhost:3527/#cb57-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 bachelor's degree        72.1      70.5      19.3  61.7  81  </span></span>
<span id="cb57-18"><a href="http://localhost:3527/#cb57-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 high school              67.4      66.8      18.9  59.1  78  </span></span>
<span id="cb57-19"><a href="http://localhost:3527/#cb57-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 some high school         65.4      65        18.9  55.4  74.3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>It can be seen that a higher parent education is not directly leading to a better exam score. The best students are within the <code>associate's degree</code> which is a lower education than the <code>master's degree</code> and <code>bachelor's degree</code>.</p>
<p>Based on the given levels, this would be the ascending order of parent_education (based on these links):</p>
<ul>
<li><p><a href="https://thebestschools.org/degrees/college-degree-levels/#:~:text=A%20doctorate%20is%20the%20highest,research%20requirements%2C%20and%20a%20dissertation.">Associates, Bachelors and Masters</a></p></li>
<li><p><a href="https://usahello.org/education/children/grade-levels/#gref">High School and College</a></p></li>
<li><p><a href="http://www.differencebetween.net/miscellaneous/difference-between-diploma-and-associate-degree/#:~:text=A%20student%20may%20take%20one,stone%20to%20a%20higher%20education.">College vs Associates degree</a></p></li>
</ul>
<p>List of education level in a ascending order:</p>
<ol type="1">
<li>Some High School/High School –&gt; I did not find any results for this in a research. Probably High School might be a bit better than some High school</li>
<li>Some College</li>
<li>Associates degree</li>
<li>Bachelor degree</li>
<li>Masters degree</li>
</ol>
<p>This order of parental education is not represented in the performance of students performance.</p>
<p>The worst exam results are for the parental education of some High School and High School.</p>
<p>Lets have a look on the lunch variable and sort the results descending.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="http://localhost:3527/#cb58-1" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="http://localhost:3527/#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(lunch) <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="http://localhost:3527/#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb58-4"><a href="http://localhost:3527/#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb58-5"><a href="http://localhost:3527/#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_score =</span> <span class="fu">median</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb58-6"><a href="http://localhost:3527/#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_score =</span> <span class="fu">IQR</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb58-7"><a href="http://localhost:3527/#cb58-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1 =</span><span class="fu">quantile</span>(avg_score, <span class="at">probs =</span><span class="fl">0.25</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb58-8"><a href="http://localhost:3527/#cb58-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">quantile</span>(avg_score, <span class="at">probs =</span> <span class="fl">0.75</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb58-9"><a href="http://localhost:3527/#cb58-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb58-10"><a href="http://localhost:3527/#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="fu">desc</span>(med_score))</span>
<span id="cb58-11"><a href="http://localhost:3527/#cb58-11" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 6</span></span>
<span id="cb58-12"><a href="http://localhost:3527/#cb58-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   lunch        mean_score med_score iqr_score    q1    q3</span></span>
<span id="cb58-13"><a href="http://localhost:3527/#cb58-13" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;fct&gt;             &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb58-14"><a href="http://localhost:3527/#cb58-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 standard           72.3      72.7      18.6  63.4  82  </span></span>
<span id="cb58-15"><a href="http://localhost:3527/#cb58-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 free/reduced       62.9      63.7      18.8  53.7  72.4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>There is a huge difference between the students performance which have a standard meal and the ones which have a free/reduced meal. Probably the students who are getting a free/reduced meal are from a porerer family which might have less time to spend with their kids or maybe the kids education is not the highest priority. As the family might have financial issues it could be also possible that the students need to work in order to have enough money for the family. Therefore it might be possible that their study time is needed for working and this might lead to worse results.</p>
<p>Lets have a look on the test preparation variable and sort the results descending.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="http://localhost:3527/#cb59-1" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="http://localhost:3527/#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(test_prep) <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="http://localhost:3527/#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb59-4"><a href="http://localhost:3527/#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb59-5"><a href="http://localhost:3527/#cb59-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_score =</span> <span class="fu">median</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb59-6"><a href="http://localhost:3527/#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_score =</span> <span class="fu">IQR</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb59-7"><a href="http://localhost:3527/#cb59-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1 =</span><span class="fu">quantile</span>(avg_score, <span class="at">probs =</span><span class="fl">0.25</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb59-8"><a href="http://localhost:3527/#cb59-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">quantile</span>(avg_score, <span class="at">probs =</span> <span class="fl">0.75</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb59-9"><a href="http://localhost:3527/#cb59-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb59-10"><a href="http://localhost:3527/#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="fu">desc</span>(med_score))</span>
<span id="cb59-11"><a href="http://localhost:3527/#cb59-11" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 6</span></span>
<span id="cb59-12"><a href="http://localhost:3527/#cb59-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   test_prep mean_score med_score iqr_score    q1    q3</span></span>
<span id="cb59-13"><a href="http://localhost:3527/#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;fct&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb59-14"><a href="http://localhost:3527/#cb59-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 completed       73.8      73.5      18.7  65    83.7</span></span>
<span id="cb59-15"><a href="http://localhost:3527/#cb59-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 none            66.7      67.3      19.3  57.3  76.7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Students who made a test preparation course have much better results than students who didn’t. But the difference is much smaller than in the lunch variable.</p>
</section>
<section id="visualizations" class="level3">
<h3 class="anchored" data-anchor-id="visualizations">Visualizations<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#visualizations" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>In this chapter plots are created in order to learn from the data and find correlations between the variables.</p>
<p>In order to select the correct visualizations the visualizations are based on <a href="https://www.data-to-viz.com/">From Data to Viz</a></p>
<p>First of all lets start with the plot of the target variable. How is it distributed in the value range?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="http://localhost:3527/#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (ggplot2)</span>
<span id="cb60-2"><a href="http://localhost:3527/#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df_explo, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> avg_score)) <span class="sc">+</span></span>
<span id="cb60-3"><a href="http://localhost:3527/#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill=</span><span class="st">"lightblue"</span>) <span class="sc">+</span></span>
<span id="cb60-4"><a href="http://localhost:3527/#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students performance in exams"</span>, </span>
<span id="cb60-5"><a href="http://localhost:3527/#cb60-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Average performance of math, writing and reading exam"</span>,</span>
<span id="cb60-6"><a href="http://localhost:3527/#cb60-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average score"</span>,</span>
<span id="cb60-7"><a href="http://localhost:3527/#cb60-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Density"</span>) <span class="sc">+</span></span>
<span id="cb60-8"><a href="http://localhost:3527/#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb60-9"><a href="http://localhost:3527/#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb60-10"><a href="http://localhost:3527/#cb60-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/dense_plot_avg_score-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The results are quite similar compared to what was learned in the R queries. Highest density of the average_score is at the median score. There are only a small amount of scores which are below 40.</p>
<p>Now lets have a look on our features. For this use case we only got categorical features in our data set. Therefore lets have a look on their levels and the uniqueness.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="http://localhost:3527/#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> features){</span>
<span id="cb61-2"><a href="http://localhost:3527/#cb61-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-3"><a href="http://localhost:3527/#cb61-3" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_explo, <span class="fu">aes_string</span>(<span class="at">x=</span>i)) <span class="sc">+</span></span>
<span id="cb61-4"><a href="http://localhost:3527/#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill=</span><span class="st">"lightblue"</span>)<span class="sc">+</span></span>
<span id="cb61-5"><a href="http://localhost:3527/#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distibution of levels in the varaibles"</span>, </span>
<span id="cb61-6"><a href="http://localhost:3527/#cb61-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb61-7"><a href="http://localhost:3527/#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb61-8"><a href="http://localhost:3527/#cb61-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb61-9"><a href="http://localhost:3527/#cb61-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span>
<span id="cb61-10"><a href="http://localhost:3527/#cb61-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-11"><a href="http://localhost:3527/#cb61-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(p)</span>
<span id="cb61-12"><a href="http://localhost:3527/#cb61-12" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/cat_features_bar_plot-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/cat_features_bar_plot-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/cat_features_bar_plot-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/cat_features_bar_plot-4.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/cat_features_bar_plot-5.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It can be seen that there the variable <strong>gender</strong> is equally distributed on male and female.</p>
<p>The <strong>ethnic group</strong> has the most occurrences within group C, while group A and group E have a smaller occurency. Especially group A has only about 50 occurrences.</p>
<p>Regarding the <strong>parents education</strong>- this feature has six levels which are not equally distributed. Four levels has a almost similar occurrence, while the level Bachelors and Masters degree have the lowest occurrences.</p>
<p>The <strong>lunch</strong> type has two levels which are not equally distributed, about 66% occurrences are the standard lunch types, while 33% are the free/reduced type of lunch. This is actually quite a high number of reduced/free lunch meals.</p>
<p>The amount of students who performed a <strong>test preparation</strong> course is about 35% while 65% of students did not make any test preparation.</p>
<p>Lets have a look on the impact of these features and their levels on the target variable <strong>average score</strong></p>
<p>For this project the visualizations of categorical and the target variable will be made with box plots, density plots, violin plots and histograms in order to show the different possibilities in R. Therefore the variables will be displayed in different graphical visualizations. In general box plots would be a very good way to visualize these results, but for demonstration purposes different visualizations are made.</p>
<p><strong>Impact Gender on Avg_score</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="http://localhost:3527/#cb62-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-2"><a href="http://localhost:3527/#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df_explo, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> avg_score, <span class="at">fill=</span>gender)) <span class="sc">+</span></span>
<span id="cb62-3"><a href="http://localhost:3527/#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb62-4"><a href="http://localhost:3527/#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb62-5"><a href="http://localhost:3527/#cb62-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"By gender"</span>,</span>
<span id="cb62-6"><a href="http://localhost:3527/#cb62-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average score in exams"</span>,</span>
<span id="cb62-7"><a href="http://localhost:3527/#cb62-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb62-8"><a href="http://localhost:3527/#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb62-9"><a href="http://localhost:3527/#cb62-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb62-10"><a href="http://localhost:3527/#cb62-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/avg_score_gender_histogram-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Actually in this plot it is not that easy to see the differences between those two genders. So therefore lets try it with a facet wrap.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="http://localhost:3527/#cb63-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-2"><a href="http://localhost:3527/#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df_explo, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> avg_score, <span class="at">fill=</span>gender)) <span class="sc">+</span></span>
<span id="cb63-3"><a href="http://localhost:3527/#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb63-4"><a href="http://localhost:3527/#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>gender, <span class="at">ncol=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb63-5"><a href="http://localhost:3527/#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb63-6"><a href="http://localhost:3527/#cb63-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"By gender"</span>,</span>
<span id="cb63-7"><a href="http://localhost:3527/#cb63-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average score in exams"</span>,</span>
<span id="cb63-8"><a href="http://localhost:3527/#cb63-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb63-9"><a href="http://localhost:3527/#cb63-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb63-10"><a href="http://localhost:3527/#cb63-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb63-11"><a href="http://localhost:3527/#cb63-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/avg_score_gender_histogram2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now it can be seen that female are performing better than the males. There are a lot of test results above 80, while the males have a peak at above 75. But it is interesting that the are much more males who achieve 100 points in the exam compared to the women.</p>
<p><strong>Impact ethnic_group on Avg_score</strong></p>
<p>The different ethnic groups and their impact on the avg_score shall be displayed within a boxplot.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="http://localhost:3527/#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb64-2"><a href="http://localhost:3527/#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_explo, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(</span>
<span id="cb64-3"><a href="http://localhost:3527/#cb64-3" aria-hidden="true" tabindex="-1"></a>  ethnic_group, avg_score, <span class="at">.fun =</span> median, <span class="at">.desc=</span><span class="cn">TRUE</span>), <span class="at">y=</span>avg_score)) <span class="sc">+</span></span>
<span id="cb64-4"><a href="http://localhost:3527/#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill=</span><span class="st">"lightblue"</span>) <span class="sc">+</span></span>
<span id="cb64-5"><a href="http://localhost:3527/#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb64-6"><a href="http://localhost:3527/#cb64-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"By ethnic group"</span>,</span>
<span id="cb64-7"><a href="http://localhost:3527/#cb64-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Ethnic group"</span>,</span>
<span id="cb64-8"><a href="http://localhost:3527/#cb64-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average score in exams"</span>) <span class="sc">+</span></span>
<span id="cb64-9"><a href="http://localhost:3527/#cb64-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb64-10"><a href="http://localhost:3527/#cb64-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb64-11"><a href="http://localhost:3527/#cb64-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/avg_score_ethnic_group_box_plot-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Actually the results from the R queries can be confirmed. Best results are in <code>group E</code> and the groups <code>A</code>, <code>B</code> and <code>C</code> have almost the same values. Even though there are some outliers in <code>group C</code>. The mean for these three groups is almost the same, but it can be seen that <code>group B</code> has different whiskers, here the IQR range is spread the most.</p>
<p><strong>Impact parent_education on Avg_score</strong></p>
<p>This variable in their influence on the average score shall be visualized in a violin plot.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="http://localhost:3527/#cb65-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-2"><a href="http://localhost:3527/#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_explo, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(</span>
<span id="cb65-3"><a href="http://localhost:3527/#cb65-3" aria-hidden="true" tabindex="-1"></a>  parent_education, avg_score, <span class="at">.fun =</span> median, <span class="at">.desc=</span><span class="cn">TRUE</span>), <span class="at">y=</span>avg_score)) <span class="sc">+</span></span>
<span id="cb65-4"><a href="http://localhost:3527/#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">fill=</span><span class="st">"lightblue"</span>) <span class="sc">+</span></span>
<span id="cb65-5"><a href="http://localhost:3527/#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb65-6"><a href="http://localhost:3527/#cb65-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"By parents education"</span>,</span>
<span id="cb65-7"><a href="http://localhost:3527/#cb65-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Parent Education"</span>,</span>
<span id="cb65-8"><a href="http://localhost:3527/#cb65-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average score in exams"</span>) <span class="sc">+</span></span>
<span id="cb65-9"><a href="http://localhost:3527/#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb65-10"><a href="http://localhost:3527/#cb65-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb65-11"><a href="http://localhost:3527/#cb65-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>),</span>
<span id="cb65-12"><a href="http://localhost:3527/#cb65-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/avg_score_parent_edu_violin_plot-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Quite similar results as in the R queries. It can be seen that the <code>associates degree</code> as parent education leads to the best median score. But it can be seen that there are also a lot of students in this group which have results of less than 40. Only in two other groups the results are worse. In five out of six parent degrees the most students are concentrated nearby the median score. But the <code>high_school</code> degree has a peak of at the average score of 63 and as well another, smaller peak at the peak of 80. Moreover on this group there are the students with the worst results. Furthermore the group of <code>some college</code> and <code>bachelors degree</code> have a very similar violin plot and there are only minor differences between those two groups.</p>
<p><strong>Impact lunch on Avg_score</strong></p>
<p>The impact of the lunch type shall be displayed within a density plot. Moreover, this plot shall be extended by the <strong>Impact of test preparation course on Avg_score</strong>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="http://localhost:3527/#cb66-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-2"><a href="http://localhost:3527/#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_explo, <span class="at">mapping =</span> <span class="fu">aes</span> (<span class="at">x=</span>avg_score, <span class="at">fill=</span>lunch)) <span class="sc">+</span></span>
<span id="cb66-3"><a href="http://localhost:3527/#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb66-4"><a href="http://localhost:3527/#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="st">"Lunch"</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#339999"</span>, <span class="st">"#FFFF66"</span>))<span class="sc">+</span></span>
<span id="cb66-5"><a href="http://localhost:3527/#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>test_prep, <span class="at">ncol=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb66-6"><a href="http://localhost:3527/#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb66-7"><a href="http://localhost:3527/#cb66-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"By type of lunch and if a test preperation course was made"</span>,</span>
<span id="cb66-8"><a href="http://localhost:3527/#cb66-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average score in exams"</span>,</span>
<span id="cb66-9"><a href="http://localhost:3527/#cb66-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"density"</span>) <span class="sc">+</span></span>
<span id="cb66-10"><a href="http://localhost:3527/#cb66-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb66-11"><a href="http://localhost:3527/#cb66-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb66-12"><a href="http://localhost:3527/#cb66-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/lunch_test_prep_on_avg_score_dense-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It can be clearly seen that the students who completed the test preparation course have a much better performance than those who did not. Also the students who have a standard meal are performing better than those who are having only a free or reduced meal. If both features are combined it can be clearly seen that students who made the test preparation course AND have a standard meal are performing much better than those students who did not make a test preparation course and who only get a free/reduced meal. These two features have a big impact on the target variable.</p>
</section>
<section id="visualizations-incl.-perform-results" class="level3">
<h3 class="anchored" data-anchor-id="visualizations-incl.-perform-results">Visualizations (incl.&nbsp;perform results)<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#visualizations-incl.-perform-results" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>This chapter is used to show the possibilities of data visualizations if we could use numeric variables. Therefore plots correlations will be made with those variables - even though they must not be included into the later models.</p>
<p>In order to select the correct visualizations the visualizations are based on <a href="https://www.data-to-viz.com/">From Data to Viz</a></p>
<p>Lets start with the students performance in math compared to their performance in the average exam score.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="http://localhost:3527/#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_explo, <span class="fu">aes</span>(math_score, avg_score))<span class="sc">+</span></span>
<span id="cb67-2"><a href="http://localhost:3527/#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">"lightblue"</span>)<span class="sc">+</span></span>
<span id="cb67-3"><a href="http://localhost:3527/#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb67-4"><a href="http://localhost:3527/#cb67-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Average performance and math performance"</span>,</span>
<span id="cb67-5"><a href="http://localhost:3527/#cb67-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average score in maths"</span>,</span>
<span id="cb67-6"><a href="http://localhost:3527/#cb67-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average score in exams"</span>) <span class="sc">+</span></span>
<span id="cb67-7"><a href="http://localhost:3527/#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb67-8"><a href="http://localhost:3527/#cb67-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb67-9"><a href="http://localhost:3527/#cb67-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/math_avg_score_scatter-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It can be clearly seen that there is a linear relationship between the math performance and the average performance (which makes sense as the average performance is based on the math performance, but this is made for demonstration purposes). The correlation between those variables is very strong.</p>
<p>Lets add two further variables to this plot. Lets add the type of lunch and the test preparation as well. Moreover it shall be wrapped by the ethnic group.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="http://localhost:3527/#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_explo, <span class="fu">aes</span>(math_score, avg_score, <span class="at">color=</span>lunch, <span class="at">shape=</span>test_prep))<span class="sc">+</span></span>
<span id="cb68-2"><a href="http://localhost:3527/#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb68-3"><a href="http://localhost:3527/#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>ethnic_group)<span class="sc">+</span></span>
<span id="cb68-4"><a href="http://localhost:3527/#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb68-5"><a href="http://localhost:3527/#cb68-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"By lunch type, ethnic_group and if test preparation was made"</span>,</span>
<span id="cb68-6"><a href="http://localhost:3527/#cb68-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average score in maths"</span>,</span>
<span id="cb68-7"><a href="http://localhost:3527/#cb68-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average score in exams"</span>) <span class="sc">+</span></span>
<span id="cb68-8"><a href="http://localhost:3527/#cb68-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb68-9"><a href="http://localhost:3527/#cb68-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb68-10"><a href="http://localhost:3527/#cb68-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/impact_avg_score_scatter-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It can be seen that the performance in group E and D is the best, as well as that students with standard lunch and test preparation course are performing better.</p>
<p>Now lets have a look on the correlations between our three exam scores and the average exam score.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="http://localhost:3527/#cb69-1" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="http://localhost:3527/#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> <span class="co"># only select numerical data</span></span>
<span id="cb69-3"><a href="http://localhost:3527/#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">vis_cor</span>(<span class="at">cor_method =</span> <span class="st">"spearman"</span>, <span class="at">na_action =</span> <span class="st">"pairwise.complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/correlations-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It can be seen that all variables have a huge correlation with each other. Students which are performing good in one exam are likely to perform good in all exams. But it can be also seen that the correlation between writing and reading is much higher than the correlation to math and the other exams.</p>
<p>Lets have a look on the numbers:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="http://localhost:3527/#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrr)</span>
<span id="cb70-2"><a href="http://localhost:3527/#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="http://localhost:3527/#cb70-3" aria-hidden="true" tabindex="-1"></a>cor_res <span class="ot">&lt;-</span> </span>
<span id="cb70-4"><a href="http://localhost:3527/#cb70-4" aria-hidden="true" tabindex="-1"></a>  df_explo <span class="sc">%&gt;%</span></span>
<span id="cb70-5"><a href="http://localhost:3527/#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb70-6"><a href="http://localhost:3527/#cb70-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">correlate</span>(<span class="at">method =</span> <span class="st">"spearman"</span>, <span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>) </span>
<span id="cb70-7"><a href="http://localhost:3527/#cb70-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-8"><a href="http://localhost:3527/#cb70-8" aria-hidden="true" tabindex="-1"></a>cor_res <span class="sc">%&gt;%</span> </span>
<span id="cb70-9"><a href="http://localhost:3527/#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(term, avg_score) <span class="sc">%&gt;%</span> </span>
<span id="cb70-10"><a href="http://localhost:3527/#cb70-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(avg_score)) <span class="sc">%&gt;%</span> <span class="co">#  dependent variable </span></span>
<span id="cb70-11"><a href="http://localhost:3527/#cb70-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(avg_score) <span class="sc">%&gt;%</span> <span class="co"># sorting</span></span>
<span id="cb70-12"><a href="http://localhost:3527/#cb70-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fashion</span>() <span class="co"># print </span></span>
<span id="cb70-13"><a href="http://localhost:3527/#cb70-13" aria-hidden="true" tabindex="-1"></a><span class="do">##            term avg_score</span></span>
<span id="cb70-14"><a href="http://localhost:3527/#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 1    math_score       .91</span></span>
<span id="cb70-15"><a href="http://localhost:3527/#cb70-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 writing_score       .96</span></span>
<span id="cb70-16"><a href="http://localhost:3527/#cb70-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 reading_score       .97</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Math score has the lowest impact on the average score, while writing and reading scores have the highest. As learned in the correlation matrix before: Writing and Reading are correlating with each other. Therefore this result was expectable.</p>
<p>Now lets analyze the numeric variables in more detail. Moreover the categorical variable “lunch” shall be added as well.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="http://localhost:3527/#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb71-2"><a href="http://localhost:3527/#cb71-2" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span> </span>
<span id="cb71-3"><a href="http://localhost:3527/#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(avg_score, lunch, </span>
<span id="cb71-4"><a href="http://localhost:3527/#cb71-4" aria-hidden="true" tabindex="-1"></a>         math_score, reading_score, writing_score) <span class="sc">%&gt;%</span> </span>
<span id="cb71-5"><a href="http://localhost:3527/#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggscatmat</span>(<span class="at">color=</span><span class="st">"lunch"</span>, <span class="at">corMethod =</span> <span class="st">"spearman"</span>,</span>
<span id="cb71-6"><a href="http://localhost:3527/#cb71-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha=</span><span class="fl">0.4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/visual_inspection-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>As the numeric variables are already so good in predicting the avg_score, the impact of the lunch type is no longer seen. In the analysis before it was clearly seen that this variable has a big impact on the avg_score.</p>
</section>
</section>
<section id="anomaly-detection" class="level2">
<h2 class="anchored" data-anchor-id="anomaly-detection">Anomaly detection<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#anomaly-detection" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Within this chapter the data is checked for outliers and missing data. This is done in the original dataframe. This is done so that it can be learned which steps need to be made in the pipeline definitions. No changes are made with the data, it is only checked how to deal with detected issues.</p>
<section id="missing-values" class="level3">
<h3 class="anchored" data-anchor-id="missing-values">Missing values<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#missing-values" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>This was already performed in the Data Ingestion chapter, nevertheless it is performed again in this chapter.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="http://localhost:3527/#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(exams) <span class="sc">%&gt;%</span></span>
<span id="cb72-2"><a href="http://localhost:3527/#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colSums</span>()</span>
<span id="cb72-3"><a href="http://localhost:3527/#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="do">##           gender     ethnic_group parent_education            lunch </span></span>
<span id="cb72-4"><a href="http://localhost:3527/#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="do">##                0                0                0                0 </span></span>
<span id="cb72-5"><a href="http://localhost:3527/#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="do">##        test_prep       math_score    reading_score    writing_score </span></span>
<span id="cb72-6"><a href="http://localhost:3527/#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="do">##                0                0                0                0 </span></span>
<span id="cb72-7"><a href="http://localhost:3527/#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="do">##        avg_score </span></span>
<span id="cb72-8"><a href="http://localhost:3527/#cb72-8" aria-hidden="true" tabindex="-1"></a><span class="do">##                0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>There are no missing data/rows in the available data.</p>
</section>
<section id="outlier-and-novelty-detection" class="level3">
<h3 class="anchored" data-anchor-id="outlier-and-novelty-detection">Outlier and novelty detection<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#outlier-and-novelty-detection" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Lets check our data for outliers - as it was already made during the Data analysis. For the categorical data there are no outliers included, as they are only spread through a limited set of levels. Moreover there is no level included which is underrepresented. Therefore the check for outliers is only made in the target variable.</p>
<p>Lets create a plot of the target variable in box plots with all categorical data.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="http://localhost:3527/#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> features){</span>
<span id="cb73-2"><a href="http://localhost:3527/#cb73-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb73-3"><a href="http://localhost:3527/#cb73-3" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_explo, <span class="fu">aes_string</span>(<span class="at">x=</span>i, <span class="at">y=</span>y_label)) <span class="sc">+</span></span>
<span id="cb73-4"><a href="http://localhost:3527/#cb73-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_boxplot</span>(<span class="at">fill=</span><span class="st">"steelblue"</span>)</span>
<span id="cb73-5"><a href="http://localhost:3527/#cb73-5" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb73-6"><a href="http://localhost:3527/#cb73-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>(p)</span>
<span id="cb73-7"><a href="http://localhost:3527/#cb73-7" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/outlier_detection-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/outlier_detection-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/outlier_detection-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/outlier_detection-4.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/outlier_detection-5.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It can be seen that there are certain outliers included in the available data. These outliers are certain students who performed very bad in the exams. The training data contains outliers, these are defined as observations which are far from the others. Outlier detection estimators thus try to fit the regions where the training data is the most concentrated, ignoring the deviant observations.</p>
<p>These outliers make it hard for the later model to predict the result correctly. The learning from this chapter shall be included in the later model creation.</p>
</section>
</section>
<section id="feature-engineering" class="level2">
<h2 class="anchored" data-anchor-id="feature-engineering">Feature engineering<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#feature-engineering" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>All topics which were learned/discovered within the earlier steps shall be used now for the data preprocessing and feature engineering. This will be made with data pipelines. Those are generated with the tidymodels package <em>recipes</em> and <em>workflows</em>. The feature selection part wont be included here, as the features are selected within the modeling part. So the recipe will include all available features for a base model. In the model chapter the Feature Selection will be made with the available packages and tools in R.</p>
<section id="feature-transformation" class="level3">
<h3 class="anchored" data-anchor-id="feature-transformation">Feature transformation<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#feature-transformation" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Target of feature transformations - for this project and maybe new data in the future is to get red of:</p>
<ul>
<li>missing values</li>
<li>outliers</li>
<li>categorical variables –&gt; one hot encoding</li>
</ul>
<p>Other datasets would need further steps which do not apply in this project due to the data structure. Those other steps could be:</p>
<ul>
<li><p>get data on the same scale</p></li>
<li><p>standardize the data</p></li>
<li><p>handle skewed distribution of data</p></li>
<li><p>take care if the data might be censored at certain limits (e.g.&nbsp;at the low and or high of the data)</p></li>
</ul>
<p><strong>Missing values:</strong> As we do not have any missing data in the data set, this step could be skipped. But in case that there might be newer data in the future which could have missing data, this should be added to the pipeline. There are three ways to handle missing data: Delete the observation with missing data, remove the whole attribute or impute it with some other values, e.g.&nbsp;the mean, median, etc. For this project missing data shall be dropped within the pipeline.</p>
<p><strong>Outliers:</strong> Some outliers are included in the data set. For handling those the target is to test the experimental 3-rd party package from <a href="https://github.com/brunocarlin/tidy.outliers"><em>tidy_outlier</em></a></p>
<p><strong>One-Hot_encoding:</strong> Our available categorical data needs to be converted to numbers as algorithms prefer to work with numbers. For this the tidy models <a href="https://recipes.tidymodels.org/articles/Dummies.html">step_dummy</a> function will be used.</p>
</section>
<section id="feature-extraction" class="level3">
<h3 class="anchored" data-anchor-id="feature-extraction">Feature extraction<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#feature-extraction" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Some features might include relevant information which could be redundant. That would be there wont be any benefit in adding both features in the model, if the target variable can be determined with one of those.</p>
<p>Therefore it makes sense to remove features which have large correlations with each other. But this is more likely at numeric features. In the feature extraction this can be made by using the ratio of two predictors or with more complex methods like principal component analysis.</p>
<p>This also makes sense to use in case that the number of features is high.</p>
<p>For this usecase this is only partly applicable, as there are only categorical features available.</p>
</section>
<section id="final-data-pipeline" class="level3">
<h3 class="anchored" data-anchor-id="final-data-pipeline">Final data pipeline<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#final-data-pipeline" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>In the following pipeline all steps for the feature engineering are included:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="http://localhost:3527/#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("brunocarlin/tidy.outliers") </span></span>
<span id="cb74-2"><a href="http://localhost:3527/#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidy.outliers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="http://localhost:3527/#cb75-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-2"><a href="http://localhost:3527/#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(recipes)</span>
<span id="cb75-3"><a href="http://localhost:3527/#cb75-3" aria-hidden="true" tabindex="-1"></a>exam_rec <span class="ot">&lt;-</span></span>
<span id="cb75-4"><a href="http://localhost:3527/#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(avg_score <span class="sc">~</span> <span class="sc">+</span>gender  <span class="sc">+</span> ethnic_group <span class="sc">+</span> parent_education <span class="sc">+</span> lunch <span class="sc">+</span> test_prep, <span class="at">data =</span> train_data) <span class="sc">%&gt;%</span> <span class="co">#definition of features and target variable</span></span>
<span id="cb75-5"><a href="http://localhost:3527/#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_naomit</span>(<span class="fu">everything</span>(), <span class="at">skip =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="co">#remove missing observations</span></span>
<span id="cb75-6"><a href="http://localhost:3527/#cb75-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal</span>()) <span class="sc">%&gt;%</span> <span class="co">#converts factors into numeric binary (0 and 1) variables</span></span>
<span id="cb75-7"><a href="http://localhost:3527/#cb75-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_outliers_maha</span>(<span class="fu">all_numeric</span>(), <span class="sc">-</span><span class="fu">all_outcomes</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb75-8"><a href="http://localhost:3527/#cb75-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_outliers_lookout</span>(<span class="fu">all_numeric</span>(),<span class="sc">-</span><span class="fu">contains</span>(r<span class="st">"(.outliers)"</span>),<span class="sc">-</span><span class="fu">all_outcomes</span>()) <span class="sc">%&gt;%</span> <span class="co">#identify outliers</span></span>
<span id="cb75-9"><a href="http://localhost:3527/#cb75-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_outliers_remove</span>(<span class="fu">contains</span>(r<span class="st">"(.outliers)"</span>)) <span class="sc">%&gt;%</span> <span class="co">#remove outliers</span></span>
<span id="cb75-10"><a href="http://localhost:3527/#cb75-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_corr</span>(<span class="fu">all_predictors</span>(), <span class="at">threshold =</span> <span class="fl">0.7</span>, <span class="at">method =</span> <span class="st">"spearman"</span>) <span class="co"># remove correlated features (maybe not necessary as only character features as input)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Lets have a look on the current set of variables and roles:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="http://localhost:3527/#cb76-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-2"><a href="http://localhost:3527/#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(exam_rec)</span>
<span id="cb76-3"><a href="http://localhost:3527/#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 × 4</span></span>
<span id="cb76-4"><a href="http://localhost:3527/#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   variable         type      role      source  </span></span>
<span id="cb76-5"><a href="http://localhost:3527/#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;            &lt;list&gt;    &lt;chr&gt;     &lt;chr&gt;   </span></span>
<span id="cb76-6"><a href="http://localhost:3527/#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 gender           &lt;chr [3]&gt; predictor original</span></span>
<span id="cb76-7"><a href="http://localhost:3527/#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 ethnic_group     &lt;chr [3]&gt; predictor original</span></span>
<span id="cb76-8"><a href="http://localhost:3527/#cb76-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 parent_education &lt;chr [3]&gt; predictor original</span></span>
<span id="cb76-9"><a href="http://localhost:3527/#cb76-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 lunch            &lt;chr [3]&gt; predictor original</span></span>
<span id="cb76-10"><a href="http://localhost:3527/#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 test_prep        &lt;chr [3]&gt; predictor original</span></span>
<span id="cb76-11"><a href="http://localhost:3527/#cb76-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 avg_score        &lt;chr [2]&gt; outcome   original</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Lets check if all preprocessing steps worked as intended:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="http://localhost:3527/#cb77-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-2"><a href="http://localhost:3527/#cb77-2" aria-hidden="true" tabindex="-1"></a>prepped_data <span class="ot">&lt;-</span> </span>
<span id="cb77-3"><a href="http://localhost:3527/#cb77-3" aria-hidden="true" tabindex="-1"></a>  exam_rec <span class="sc">%&gt;%</span> <span class="co"># use the recipe object</span></span>
<span id="cb77-4"><a href="http://localhost:3527/#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prep</span>() <span class="sc">%&gt;%</span> <span class="co"># perform the recipe on training data</span></span>
<span id="cb77-5"><a href="http://localhost:3527/#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">juice</span>() <span class="co"># extract only the preprocessed dataframe </span></span>
<span id="cb77-6"><a href="http://localhost:3527/#cb77-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-7"><a href="http://localhost:3527/#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(prepped_data)</span>
<span id="cb77-8"><a href="http://localhost:3527/#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 795</span></span>
<span id="cb77-9"><a href="http://localhost:3527/#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Columns: 13</span></span>
<span id="cb77-10"><a href="http://localhost:3527/#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="do">## $ avg_score                          &lt;dbl&gt; 55.00000, 50.66667, 53.66667, 48.33…</span></span>
<span id="cb77-11"><a href="http://localhost:3527/#cb77-11" aria-hidden="true" tabindex="-1"></a><span class="do">## $ gender_male                        &lt;dbl&gt; 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0,…</span></span>
<span id="cb77-12"><a href="http://localhost:3527/#cb77-12" aria-hidden="true" tabindex="-1"></a><span class="do">## $ ethnic_group_group.B               &lt;dbl&gt; 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0,…</span></span>
<span id="cb77-13"><a href="http://localhost:3527/#cb77-13" aria-hidden="true" tabindex="-1"></a><span class="do">## $ ethnic_group_group.C               &lt;dbl&gt; 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1,…</span></span>
<span id="cb77-14"><a href="http://localhost:3527/#cb77-14" aria-hidden="true" tabindex="-1"></a><span class="do">## $ ethnic_group_group.D               &lt;dbl&gt; 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0,…</span></span>
<span id="cb77-15"><a href="http://localhost:3527/#cb77-15" aria-hidden="true" tabindex="-1"></a><span class="do">## $ ethnic_group_group.E               &lt;dbl&gt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span id="cb77-16"><a href="http://localhost:3527/#cb77-16" aria-hidden="true" tabindex="-1"></a><span class="do">## $ parent_education_bachelor.s.degree &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span id="cb77-17"><a href="http://localhost:3527/#cb77-17" aria-hidden="true" tabindex="-1"></a><span class="do">## $ parent_education_high.school       &lt;dbl&gt; 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0,…</span></span>
<span id="cb77-18"><a href="http://localhost:3527/#cb77-18" aria-hidden="true" tabindex="-1"></a><span class="do">## $ parent_education_master.s.degree   &lt;dbl&gt; 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0,…</span></span>
<span id="cb77-19"><a href="http://localhost:3527/#cb77-19" aria-hidden="true" tabindex="-1"></a><span class="do">## $ parent_education_some.college      &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span id="cb77-20"><a href="http://localhost:3527/#cb77-20" aria-hidden="true" tabindex="-1"></a><span class="do">## $ parent_education_some.high.school  &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1,…</span></span>
<span id="cb77-21"><a href="http://localhost:3527/#cb77-21" aria-hidden="true" tabindex="-1"></a><span class="do">## $ lunch_standard                     &lt;dbl&gt; 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1,…</span></span>
<span id="cb77-22"><a href="http://localhost:3527/#cb77-22" aria-hidden="true" tabindex="-1"></a><span class="do">## $ test_prep_none                     &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1,…</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The recipe was successful! The character columns were successfully changed to dummy variables, so that the models can work with them. Moreover three observations were removed as they were identified as outliers.</p>
<p>Moreover a validation set shall be created. This shall be used to validate the later models. After the best model is used (based on the validation set) the model can be tested with the test data. The amount of breaks is the value which was learned in the Data Visualization chapter.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="http://localhost:3527/#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12</span>)</span>
<span id="cb78-2"><a href="http://localhost:3527/#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="http://localhost:3527/#cb78-3" aria-hidden="true" tabindex="-1"></a>cv_folds <span class="ot">&lt;-</span> </span>
<span id="cb78-4"><a href="http://localhost:3527/#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">vfold_cv</span>(train_data,</span>
<span id="cb78-5"><a href="http://localhost:3527/#cb78-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">v=</span><span class="dv">5</span>,</span>
<span id="cb78-6"><a href="http://localhost:3527/#cb78-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">strata =</span> y_label,</span>
<span id="cb78-7"><a href="http://localhost:3527/#cb78-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">breaks =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
</section>
<section id="model" class="level1">
<h1>Model</h1>
<p>After the data and features have been preprocessed in a format which is ready for the modeling algorithms, they can be used in the model selection process.</p>
<p>Target for the Model and Deployment phase is to perform all steps in the usual way with tidymodels and afterwards one time by using MLFfow.</p>
<section id="select-algorithm" class="level2">
<h2 class="anchored" data-anchor-id="select-algorithm">Select algorithm<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#select-algorithm" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>The target is to predict the <em>avg_score</em> of students in exams. This outcome variable is numeric. Therefore a <strong>Regression</strong> model needs to be selected for this usecase. As labeled data is available a supervised learning is performed. The following page is used to select three different model types and their engines: <a href="https://www.tidymodels.org/find/parsnip/">Tidymodels: Search parsnip models</a></p>
<p>Three different kind of models shall be selected in order to see how the performance of them differentiates and which is handling the available data the best.</p>
<p>The following three models were selected:</p>
<ul>
<li><p>Boosted Tree (XGBoost)</p>
<ul>
<li><p>Decision trees would be good for modelling non linear relationships, as we only have categorical variables this might be useful.</p></li>
<li><p>Risk of overfitting on the training data –&gt; Implement cross-validation in order to prevent this.</p></li>
<li><p>Boosted tree is an ensembeld learner which starts with simple base models and tries to “boost” their aggregate complexity –&gt; In practice often with a high performance for the results.</p></li>
</ul></li>
<li><p>Linear Regression (<del>Keras</del> - changed to glmnet as I had issues to get keras and tensorflow running. For this a python installation and connection is needed)</p>
<ul>
<li><p>Faster to train and are simpler. Linear algorithms might get issues if the data has many intersecting correlations, but this is not the case in this dataset.</p></li>
<li><p>Fits normally a “straight line” on the data –&gt; perfectly for our target variable.</p></li>
<li><p>Disadvantage: Prone to overfit with many input features and are not that good in expressing non-linear relationships –&gt; Both does not apply for this dataset, but only categorical input data is available.</p></li>
</ul></li>
<li><p>Single layer neural network (<del>Keras</del> - changed to nnet, see above)</p>
<ul>
<li><p>Can recognize patterns by itself.</p></li>
<li><p>Good for complex datasets –&gt; our dataset is quite simple</p></li>
<li><p>Sadly it is not really possible to find out why the model has decided for the output. Also hyperparameter tuning is not that easy.</p></li>
</ul></li>
</ul>
<p>Sources: <a href="https://elitedatascience.com/algorithm-selection">Elite Datascience: Model Selection</a>, <a href="https://towardsdatascience.com/do-you-know-how-to-choose-the-right-machine-learning-algorithm-among-7-different-types-295d0b0c7f60">Towards Datascience: Algorithm selection</a></p>
</section>
<section id="model-specification" class="level2">
<h2 class="anchored" data-anchor-id="model-specification">Model Specification<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#model-specification" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Regarding the model specification three steps need to be made:</p>
<ol type="1">
<li>Pick a model type (see above)</li>
<li>Set the engine (see above)</li>
<li>Set the mode regression (as the target is to perform a regression)</li>
</ol>
<p>The further chapters are based on the documentation of the following pages:</p>
<ul>
<li><p><a href="https://parsnip.tidymodels.org/reference/boost_tree.html">Tidymodels: Bossted Tree</a></p></li>
<li><p><a href="https://parsnip.tidymodels.org/reference/linear_reg.html">Tidymodels: Linear Regression</a></p></li>
<li><p><a href="https://parsnip.tidymodels.org/reference/mlp.html">Tidymodels: Single layer neural network</a></p></li>
<li><p><a href="https://tune.tidymodels.org/">Tidymodels: Tune</a></p></li>
</ul>
<section id="boosted-tree" class="level3">
<h3 class="anchored" data-anchor-id="boosted-tree">Boosted Tree<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#boosted-tree" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>At first the target is to keep the model simple, that’s why the model will be created with standard settings:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="http://localhost:3527/#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb79-2"><a href="http://localhost:3527/#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xgboost)</span>
<span id="cb79-3"><a href="http://localhost:3527/#cb79-3" aria-hidden="true" tabindex="-1"></a>xgb_spec_1 <span class="ot">&lt;-</span> </span>
<span id="cb79-4"><a href="http://localhost:3527/#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">boost_tree</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb79-5"><a href="http://localhost:3527/#cb79-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"xgboost"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb79-6"><a href="http://localhost:3527/#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Add the created model into a workflow:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="http://localhost:3527/#cb80-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-2"><a href="http://localhost:3527/#cb80-2" aria-hidden="true" tabindex="-1"></a>xgb_workflow_1 <span class="ot">&lt;-</span></span>
<span id="cb80-3"><a href="http://localhost:3527/#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb80-4"><a href="http://localhost:3527/#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb80-5"><a href="http://localhost:3527/#cb80-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(xgb_spec_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="linear-regression" class="level3">
<h3 class="anchored" data-anchor-id="linear-regression">Linear Regression<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#linear-regression" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>At first the target is to keep the model simple, that’s why the model will be created with standard settings:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="http://localhost:3527/#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(keras)</span>
<span id="cb81-2"><a href="http://localhost:3527/#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tensorflow)</span>
<span id="cb81-3"><a href="http://localhost:3527/#cb81-3" aria-hidden="true" tabindex="-1"></a>lin_spec_1 <span class="ot">&lt;-</span> </span>
<span id="cb81-4"><a href="http://localhost:3527/#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linear_reg</span>(<span class="at">penalty =</span> <span class="fl">0.1</span>, <span class="at">mixture =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb81-5"><a href="http://localhost:3527/#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb81-6"><a href="http://localhost:3527/#cb81-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Add the created model into a workflow:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="http://localhost:3527/#cb82-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-2"><a href="http://localhost:3527/#cb82-2" aria-hidden="true" tabindex="-1"></a>lin_reg_workflow_1 <span class="ot">&lt;-</span></span>
<span id="cb82-3"><a href="http://localhost:3527/#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb82-4"><a href="http://localhost:3527/#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb82-5"><a href="http://localhost:3527/#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(lin_spec_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="single-layer-neural-network" class="level3">
<h3 class="anchored" data-anchor-id="single-layer-neural-network">Single Layer Neural Network<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#single-layer-neural-network" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>At first the target is to keep the model simple, that’s why the model will be created with standard settings:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="http://localhost:3527/#cb83-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-2"><a href="http://localhost:3527/#cb83-2" aria-hidden="true" tabindex="-1"></a>neural_spec_1 <span class="ot">&lt;-</span> </span>
<span id="cb83-3"><a href="http://localhost:3527/#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mlp</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb83-4"><a href="http://localhost:3527/#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"nnet"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb83-5"><a href="http://localhost:3527/#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Add the created model into a workflow:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="http://localhost:3527/#cb84-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-2"><a href="http://localhost:3527/#cb84-2" aria-hidden="true" tabindex="-1"></a>neural_workflow_1 <span class="ot">&lt;-</span></span>
<span id="cb84-3"><a href="http://localhost:3527/#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb84-4"><a href="http://localhost:3527/#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb84-5"><a href="http://localhost:3527/#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(neural_spec_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="model-training-evaluation" class="level2">
<h2 class="anchored" data-anchor-id="model-training-evaluation">Model training &amp; evaluation<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#model-training-evaluation" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<section id="boosted-tree-1" class="level3">
<h3 class="anchored" data-anchor-id="boosted-tree-1">Boosted tree<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#boosted-tree-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="http://localhost:3527/#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb85-2"><a href="http://localhost:3527/#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="http://localhost:3527/#cb85-3" aria-hidden="true" tabindex="-1"></a>xgb_res_1 <span class="ot">&lt;-</span></span>
<span id="cb85-4"><a href="http://localhost:3527/#cb85-4" aria-hidden="true" tabindex="-1"></a>  xgb_workflow_1 <span class="sc">%&gt;%</span></span>
<span id="cb85-5"><a href="http://localhost:3527/#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit_resamples</span>(</span>
<span id="cb85-6"><a href="http://localhost:3527/#cb85-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb85-7"><a href="http://localhost:3527/#cb85-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb85-8"><a href="http://localhost:3527/#cb85-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb85-9"><a href="http://localhost:3527/#cb85-9" aria-hidden="true" tabindex="-1"></a>xgb_res_1 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">TRUE</span>)</span>
<span id="cb85-10"><a href="http://localhost:3527/#cb85-10" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 6</span></span>
<span id="cb85-11"><a href="http://localhost:3527/#cb85-11" aria-hidden="true" tabindex="-1"></a><span class="do">##   .metric .estimator   mean     n std_err .config             </span></span>
<span id="cb85-12"><a href="http://localhost:3527/#cb85-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb85-13"><a href="http://localhost:3527/#cb85-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 rmse    standard   13.0       5  0.225  Preprocessor1_Model1</span></span>
<span id="cb85-14"><a href="http://localhost:3527/#cb85-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 rsq     standard    0.176     5  0.0149 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>How are these metrics spreading through the cross_validation:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="http://localhost:3527/#cb86-1" aria-hidden="true" tabindex="-1"></a>xgb_res_1 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">FALSE</span>)</span>
<span id="cb86-2"><a href="http://localhost:3527/#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 10 × 5</span></span>
<span id="cb86-3"><a href="http://localhost:3527/#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    id    .metric .estimator .estimate .config             </span></span>
<span id="cb86-4"><a href="http://localhost:3527/#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb86-5"><a href="http://localhost:3527/#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Fold1 rmse    standard      12.3   Preprocessor1_Model1</span></span>
<span id="cb86-6"><a href="http://localhost:3527/#cb86-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Fold1 rsq     standard       0.220 Preprocessor1_Model1</span></span>
<span id="cb86-7"><a href="http://localhost:3527/#cb86-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Fold2 rmse    standard      12.8   Preprocessor1_Model1</span></span>
<span id="cb86-8"><a href="http://localhost:3527/#cb86-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Fold2 rsq     standard       0.178 Preprocessor1_Model1</span></span>
<span id="cb86-9"><a href="http://localhost:3527/#cb86-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Fold3 rmse    standard      13.3   Preprocessor1_Model1</span></span>
<span id="cb86-10"><a href="http://localhost:3527/#cb86-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Fold3 rsq     standard       0.183 Preprocessor1_Model1</span></span>
<span id="cb86-11"><a href="http://localhost:3527/#cb86-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Fold4 rmse    standard      13.6   Preprocessor1_Model1</span></span>
<span id="cb86-12"><a href="http://localhost:3527/#cb86-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Fold4 rsq     standard       0.127 Preprocessor1_Model1</span></span>
<span id="cb86-13"><a href="http://localhost:3527/#cb86-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Fold5 rmse    standard      13.0   Preprocessor1_Model1</span></span>
<span id="cb86-14"><a href="http://localhost:3527/#cb86-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Fold5 rsq     standard       0.170 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>There are some smaller differences between these folds, but overall those differences are not to big.</p>
<p>Lets visualize these metrics into a plot. For this the predictions are plotted on the y-axis and the actual values on the x-axis. If a perfect model would have been created, all points would be on the diagonal line</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="http://localhost:3527/#cb87-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-2"><a href="http://localhost:3527/#cb87-2" aria-hidden="true" tabindex="-1"></a>assess_xgb_res_1 <span class="ot">&lt;-</span> <span class="fu">collect_predictions</span>(xgb_res_1)</span>
<span id="cb87-3"><a href="http://localhost:3527/#cb87-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-4"><a href="http://localhost:3527/#cb87-4" aria-hidden="true" tabindex="-1"></a>assess_xgb_res_1 <span class="sc">%&gt;%</span> </span>
<span id="cb87-5"><a href="http://localhost:3527/#cb87-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_score, <span class="at">y =</span> .pred)) <span class="sc">+</span>   <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb87-6"><a href="http://localhost:3527/#cb87-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">col =</span> <span class="st">"blue"</span>) <span class="sc">+</span> </span>
<span id="cb87-7"><a href="http://localhost:3527/#cb87-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_obs_pred</span>() <span class="sc">+</span> </span>
<span id="cb87-8"><a href="http://localhost:3527/#cb87-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted"</span>) <span class="sc">+</span></span>
<span id="cb87-9"><a href="http://localhost:3527/#cb87-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Actual Average Exam Score"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/plot_xgboost_res_1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>If we consider that this is the first created model and that there are only categorical features in the dataset, this result (RMSE) not that bad, but the R squared is low. Lets see in the next chapter how the Boosted Tree Performance can be increased. Further steps are to adapt the hyperparameters and the features which are added into the model.</p>
</section>
<section id="linear-regression-1" class="level3">
<h3 class="anchored" data-anchor-id="linear-regression-1">Linear Regression<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#linear-regression-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="http://localhost:3527/#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb88-2"><a href="http://localhost:3527/#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="http://localhost:3527/#cb88-3" aria-hidden="true" tabindex="-1"></a>lin_reg_res_1 <span class="ot">&lt;-</span></span>
<span id="cb88-4"><a href="http://localhost:3527/#cb88-4" aria-hidden="true" tabindex="-1"></a>  lin_reg_workflow_1 <span class="sc">%&gt;%</span></span>
<span id="cb88-5"><a href="http://localhost:3527/#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit_resamples</span>(</span>
<span id="cb88-6"><a href="http://localhost:3527/#cb88-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb88-7"><a href="http://localhost:3527/#cb88-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb88-8"><a href="http://localhost:3527/#cb88-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb88-9"><a href="http://localhost:3527/#cb88-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-10"><a href="http://localhost:3527/#cb88-10" aria-hidden="true" tabindex="-1"></a>lin_reg_res_1 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">TRUE</span>)</span>
<span id="cb88-11"><a href="http://localhost:3527/#cb88-11" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 6</span></span>
<span id="cb88-12"><a href="http://localhost:3527/#cb88-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   .metric .estimator   mean     n std_err .config             </span></span>
<span id="cb88-13"><a href="http://localhost:3527/#cb88-13" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb88-14"><a href="http://localhost:3527/#cb88-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 rmse    standard   12.1       5  0.290  Preprocessor1_Model1</span></span>
<span id="cb88-15"><a href="http://localhost:3527/#cb88-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 rsq     standard    0.261     5  0.0238 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>How are these metrics spreading through the cross_validation:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="http://localhost:3527/#cb89-1" aria-hidden="true" tabindex="-1"></a>lin_reg_res_1 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">FALSE</span>)</span>
<span id="cb89-2"><a href="http://localhost:3527/#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 10 × 5</span></span>
<span id="cb89-3"><a href="http://localhost:3527/#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    id    .metric .estimator .estimate .config             </span></span>
<span id="cb89-4"><a href="http://localhost:3527/#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb89-5"><a href="http://localhost:3527/#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Fold1 rmse    standard      11.6   Preprocessor1_Model1</span></span>
<span id="cb89-6"><a href="http://localhost:3527/#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Fold1 rsq     standard       0.288 Preprocessor1_Model1</span></span>
<span id="cb89-7"><a href="http://localhost:3527/#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Fold2 rmse    standard      11.7   Preprocessor1_Model1</span></span>
<span id="cb89-8"><a href="http://localhost:3527/#cb89-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Fold2 rsq     standard       0.288 Preprocessor1_Model1</span></span>
<span id="cb89-9"><a href="http://localhost:3527/#cb89-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Fold3 rmse    standard      12.8   Preprocessor1_Model1</span></span>
<span id="cb89-10"><a href="http://localhost:3527/#cb89-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Fold3 rsq     standard       0.227 Preprocessor1_Model1</span></span>
<span id="cb89-11"><a href="http://localhost:3527/#cb89-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Fold4 rmse    standard      12.8   Preprocessor1_Model1</span></span>
<span id="cb89-12"><a href="http://localhost:3527/#cb89-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Fold4 rsq     standard       0.185 Preprocessor1_Model1</span></span>
<span id="cb89-13"><a href="http://localhost:3527/#cb89-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Fold5 rmse    standard      11.6   Preprocessor1_Model1</span></span>
<span id="cb89-14"><a href="http://localhost:3527/#cb89-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Fold5 rsq     standard       0.315 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>There are some smaller differences between these folds, but overall those differences are not to big. Overall these metrics changed compared to the simple XGBoost model. The First model had a higher RMSE and a lower RSQ value.</p>
<p>Lets visualize these metrics into a plot. For this the predictions are plotted on the y-axis and the actual values on the x-axis. If a perfect model would have been created, all points would be on the diagonal line</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="http://localhost:3527/#cb90-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-2"><a href="http://localhost:3527/#cb90-2" aria-hidden="true" tabindex="-1"></a>assess_lin_reg_res_1 <span class="ot">&lt;-</span> <span class="fu">collect_predictions</span>(lin_reg_res_1)</span>
<span id="cb90-3"><a href="http://localhost:3527/#cb90-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-4"><a href="http://localhost:3527/#cb90-4" aria-hidden="true" tabindex="-1"></a>assess_lin_reg_res_1 <span class="sc">%&gt;%</span> </span>
<span id="cb90-5"><a href="http://localhost:3527/#cb90-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_score, <span class="at">y =</span> .pred)) <span class="sc">+</span>   <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb90-6"><a href="http://localhost:3527/#cb90-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">col =</span> <span class="st">"blue"</span>) <span class="sc">+</span> </span>
<span id="cb90-7"><a href="http://localhost:3527/#cb90-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_obs_pred</span>() <span class="sc">+</span> </span>
<span id="cb90-8"><a href="http://localhost:3527/#cb90-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted"</span>) <span class="sc">+</span></span>
<span id="cb90-9"><a href="http://localhost:3527/#cb90-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Actual Average Exam Score"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/plot_lin_reg_res_1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="single-layer-perceptron" class="level3">
<h3 class="anchored" data-anchor-id="single-layer-perceptron">Single Layer Perceptron<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#single-layer-perceptron" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="http://localhost:3527/#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb91-2"><a href="http://localhost:3527/#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="http://localhost:3527/#cb91-3" aria-hidden="true" tabindex="-1"></a>neural_res_1 <span class="ot">&lt;-</span></span>
<span id="cb91-4"><a href="http://localhost:3527/#cb91-4" aria-hidden="true" tabindex="-1"></a>  neural_workflow_1 <span class="sc">%&gt;%</span></span>
<span id="cb91-5"><a href="http://localhost:3527/#cb91-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit_resamples</span>(</span>
<span id="cb91-6"><a href="http://localhost:3527/#cb91-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb91-7"><a href="http://localhost:3527/#cb91-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb91-8"><a href="http://localhost:3527/#cb91-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb91-9"><a href="http://localhost:3527/#cb91-9" aria-hidden="true" tabindex="-1"></a>neural_res_1 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">TRUE</span>)</span>
<span id="cb91-10"><a href="http://localhost:3527/#cb91-10" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 6</span></span>
<span id="cb91-11"><a href="http://localhost:3527/#cb91-11" aria-hidden="true" tabindex="-1"></a><span class="do">##   .metric .estimator   mean     n std_err .config             </span></span>
<span id="cb91-12"><a href="http://localhost:3527/#cb91-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb91-13"><a href="http://localhost:3527/#cb91-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 rmse    standard   13.3       5  0.339  Preprocessor1_Model1</span></span>
<span id="cb91-14"><a href="http://localhost:3527/#cb91-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 rsq     standard    0.177     3  0.0271 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>How are these metrics spreading through the cross_validation:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="http://localhost:3527/#cb92-1" aria-hidden="true" tabindex="-1"></a>neural_res_1 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">FALSE</span>)</span>
<span id="cb92-2"><a href="http://localhost:3527/#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 10 × 5</span></span>
<span id="cb92-3"><a href="http://localhost:3527/#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    id    .metric .estimator .estimate .config             </span></span>
<span id="cb92-4"><a href="http://localhost:3527/#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb92-5"><a href="http://localhost:3527/#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Fold1 rmse    standard      13.7   Preprocessor1_Model1</span></span>
<span id="cb92-6"><a href="http://localhost:3527/#cb92-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Fold1 rsq     standard      NA     Preprocessor1_Model1</span></span>
<span id="cb92-7"><a href="http://localhost:3527/#cb92-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Fold2 rmse    standard      12.3   Preprocessor1_Model1</span></span>
<span id="cb92-8"><a href="http://localhost:3527/#cb92-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Fold2 rsq     standard       0.223 Preprocessor1_Model1</span></span>
<span id="cb92-9"><a href="http://localhost:3527/#cb92-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Fold3 rmse    standard      13.6   Preprocessor1_Model1</span></span>
<span id="cb92-10"><a href="http://localhost:3527/#cb92-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Fold3 rsq     standard       0.129 Preprocessor1_Model1</span></span>
<span id="cb92-11"><a href="http://localhost:3527/#cb92-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Fold4 rmse    standard      14.2   Preprocessor1_Model1</span></span>
<span id="cb92-12"><a href="http://localhost:3527/#cb92-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Fold4 rsq     standard      NA     Preprocessor1_Model1</span></span>
<span id="cb92-13"><a href="http://localhost:3527/#cb92-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Fold5 rmse    standard      12.9   Preprocessor1_Model1</span></span>
<span id="cb92-14"><a href="http://localhost:3527/#cb92-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Fold5 rsq     standard       0.177 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>There are some smaller differences between these folds, but overall those differences are not to big.</p>
<p>This model has the highest RSME score. The RSQ score is similar to the result of the XGBoost.</p>
<p>Lets visualize these metrics into a plot. For this the predictions are plotted on the y-axis and the actual values on the x-axis. If a perfect model would have been created, all points would be on the diagonal line</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="http://localhost:3527/#cb93-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-2"><a href="http://localhost:3527/#cb93-2" aria-hidden="true" tabindex="-1"></a>assess_neural_res_1 <span class="ot">&lt;-</span> <span class="fu">collect_predictions</span>(neural_res_1)</span>
<span id="cb93-3"><a href="http://localhost:3527/#cb93-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-4"><a href="http://localhost:3527/#cb93-4" aria-hidden="true" tabindex="-1"></a>assess_xgb_res_1 <span class="sc">%&gt;%</span> </span>
<span id="cb93-5"><a href="http://localhost:3527/#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_score, <span class="at">y =</span> .pred)) <span class="sc">+</span>   <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb93-6"><a href="http://localhost:3527/#cb93-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">col =</span> <span class="st">"blue"</span>) <span class="sc">+</span> </span>
<span id="cb93-7"><a href="http://localhost:3527/#cb93-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_obs_pred</span>() <span class="sc">+</span> </span>
<span id="cb93-8"><a href="http://localhost:3527/#cb93-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted"</span>) <span class="sc">+</span></span>
<span id="cb93-9"><a href="http://localhost:3527/#cb93-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Actual Average Exam Score"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/plot_neural_res_1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="feature-selection" class="level2">
<h2 class="anchored" data-anchor-id="feature-selection">Feature Selection<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#feature-selection" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>After the initial models were created and their results were visualized, lets have a look on the feature importance’s. Currently all available features were used for the model creation. Therefore lets analyze the Feature Importance and maybe it might be better to remove some features.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="http://localhost:3527/#cb94-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-2"><a href="http://localhost:3527/#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ensure results are repeatable</span></span>
<span id="cb94-3"><a href="http://localhost:3527/#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb94-4"><a href="http://localhost:3527/#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="co"># load the library</span></span>
<span id="cb94-5"><a href="http://localhost:3527/#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mlbench)</span>
<span id="cb94-6"><a href="http://localhost:3527/#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb94-7"><a href="http://localhost:3527/#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="co"># load the dataset</span></span>
<span id="cb94-8"><a href="http://localhost:3527/#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(train_data)</span>
<span id="cb94-9"><a href="http://localhost:3527/#cb94-9" aria-hidden="true" tabindex="-1"></a><span class="co"># prepare training scheme</span></span>
<span id="cb94-10"><a href="http://localhost:3527/#cb94-10" aria-hidden="true" tabindex="-1"></a>control <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(<span class="at">method=</span><span class="st">"repeatedcv"</span>, <span class="at">number=</span><span class="dv">10</span>, <span class="at">repeats=</span><span class="dv">3</span>)</span>
<span id="cb94-11"><a href="http://localhost:3527/#cb94-11" aria-hidden="true" tabindex="-1"></a><span class="co"># train the model</span></span>
<span id="cb94-12"><a href="http://localhost:3527/#cb94-12" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">train</span>(avg_score<span class="sc">~</span> ., <span class="at">data=</span>train_data, <span class="at">method=</span><span class="st">"pls"</span>, <span class="at">preProcess=</span><span class="st">"scale"</span>, <span class="at">trControl=</span>control)</span>
<span id="cb94-13"><a href="http://localhost:3527/#cb94-13" aria-hidden="true" tabindex="-1"></a><span class="co"># estimate variable importance</span></span>
<span id="cb94-14"><a href="http://localhost:3527/#cb94-14" aria-hidden="true" tabindex="-1"></a>importance <span class="ot">&lt;-</span> <span class="fu">varImp</span>(model, <span class="at">scale=</span><span class="cn">FALSE</span>)</span>
<span id="cb94-15"><a href="http://localhost:3527/#cb94-15" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize importance</span></span>
<span id="cb94-16"><a href="http://localhost:3527/#cb94-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(importance)</span>
<span id="cb94-17"><a href="http://localhost:3527/#cb94-17" aria-hidden="true" tabindex="-1"></a><span class="do">## pls variable importance</span></span>
<span id="cb94-18"><a href="http://localhost:3527/#cb94-18" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb94-19"><a href="http://localhost:3527/#cb94-19" aria-hidden="true" tabindex="-1"></a><span class="do">##                                     Overall</span></span>
<span id="cb94-20"><a href="http://localhost:3527/#cb94-20" aria-hidden="true" tabindex="-1"></a><span class="do">## reading_score                       4.40236</span></span>
<span id="cb94-21"><a href="http://localhost:3527/#cb94-21" aria-hidden="true" tabindex="-1"></a><span class="do">## writing_score                       4.36047</span></span>
<span id="cb94-22"><a href="http://localhost:3527/#cb94-22" aria-hidden="true" tabindex="-1"></a><span class="do">## math_score                          4.16323</span></span>
<span id="cb94-23"><a href="http://localhost:3527/#cb94-23" aria-hidden="true" tabindex="-1"></a><span class="do">## lunchstandard                       1.44992</span></span>
<span id="cb94-24"><a href="http://localhost:3527/#cb94-24" aria-hidden="true" tabindex="-1"></a><span class="do">## test_prepnone                       1.10585</span></span>
<span id="cb94-25"><a href="http://localhost:3527/#cb94-25" aria-hidden="true" tabindex="-1"></a><span class="do">## `ethnic_groupgroup E`               0.98925</span></span>
<span id="cb94-26"><a href="http://localhost:3527/#cb94-26" aria-hidden="true" tabindex="-1"></a><span class="do">## gendermale                          0.59114</span></span>
<span id="cb94-27"><a href="http://localhost:3527/#cb94-27" aria-hidden="true" tabindex="-1"></a><span class="do">## `parent_educationsome high school`  0.57987</span></span>
<span id="cb94-28"><a href="http://localhost:3527/#cb94-28" aria-hidden="true" tabindex="-1"></a><span class="do">## `ethnic_groupgroup B`               0.45876</span></span>
<span id="cb94-29"><a href="http://localhost:3527/#cb94-29" aria-hidden="true" tabindex="-1"></a><span class="do">## `ethnic_groupgroup C`               0.44201</span></span>
<span id="cb94-30"><a href="http://localhost:3527/#cb94-30" aria-hidden="true" tabindex="-1"></a><span class="do">## `parent_educationbachelor's degree` 0.32318</span></span>
<span id="cb94-31"><a href="http://localhost:3527/#cb94-31" aria-hidden="true" tabindex="-1"></a><span class="do">## `parent_educationhigh school`       0.29171</span></span>
<span id="cb94-32"><a href="http://localhost:3527/#cb94-32" aria-hidden="true" tabindex="-1"></a><span class="do">## `ethnic_groupgroup D`               0.23756</span></span>
<span id="cb94-33"><a href="http://localhost:3527/#cb94-33" aria-hidden="true" tabindex="-1"></a><span class="do">## `parent_educationmaster's degree`   0.19733</span></span>
<span id="cb94-34"><a href="http://localhost:3527/#cb94-34" aria-hidden="true" tabindex="-1"></a><span class="do">## `parent_educationsome college`      0.09161</span></span>
<span id="cb94-35"><a href="http://localhost:3527/#cb94-35" aria-hidden="true" tabindex="-1"></a><span class="co"># plot importance</span></span>
<span id="cb94-36"><a href="http://localhost:3527/#cb94-36" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(importance)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="./Project_student_grades_files/feature_importance_caret-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It can be seen that the other exam scores are having the biggest influence on the average score - which totally makes sense as these variables are the basis for this variable. This is exactly why they need to be removed from the modelling, even though they have a huge feature importance.</p>
<p>Beside these variables the most important features are the <code>lunch</code> and <code>test_preparation</code>variables. Also an important features seems to be the <code>ethnic_group</code> but only for one level (Group E). The other levels have only a very small influence on the result. Also the <code>gender</code> variable seems to be a bit important. The lowest feature importance is brought in by the <code>parent_education</code> as most of the levels have only a very small Importance. This result is matching the learning from the data visualization. In that chapter it was learned the most of the other levels have only a small impact on the average exam score.</p>
<p><strong>Forward Selection</strong></p>
<p>Lets make a simple model in which a Forward selection if performed. The result of this shall determine the variables which shall be used in all models.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="http://localhost:3527/#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb95-2"><a href="http://localhost:3527/#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb95-3"><a href="http://localhost:3527/#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up repeated k-fold cross-validation</span></span>
<span id="cb95-4"><a href="http://localhost:3527/#cb95-4" aria-hidden="true" tabindex="-1"></a>train.control <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"cv"</span>, <span class="at">number =</span> <span class="dv">50</span>)</span>
<span id="cb95-5"><a href="http://localhost:3527/#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model</span></span>
<span id="cb95-6"><a href="http://localhost:3527/#cb95-6" aria-hidden="true" tabindex="-1"></a>step.model <span class="ot">&lt;-</span> <span class="fu">train</span>(avg_score <span class="sc">~</span> gender <span class="sc">+</span> ethnic_group <span class="sc">+</span> parent_education <span class="sc">+</span> lunch <span class="sc">+</span> test_prep, <span class="at">data =</span> train_data,</span>
<span id="cb95-7"><a href="http://localhost:3527/#cb95-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">method =</span> <span class="st">"leapForward"</span>, </span>
<span id="cb95-8"><a href="http://localhost:3527/#cb95-8" aria-hidden="true" tabindex="-1"></a>                    <span class="at">tuneGrid =</span> <span class="fu">data.frame</span>(<span class="at">nvmax =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>), <span class="co"># only add 5 variables - we only have 5 in the data</span></span>
<span id="cb95-9"><a href="http://localhost:3527/#cb95-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">trControl =</span> train.control</span>
<span id="cb95-10"><a href="http://localhost:3527/#cb95-10" aria-hidden="true" tabindex="-1"></a>                    )</span>
<span id="cb95-11"><a href="http://localhost:3527/#cb95-11" aria-hidden="true" tabindex="-1"></a>step.model<span class="sc">$</span>results</span>
<span id="cb95-12"><a href="http://localhost:3527/#cb95-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   nvmax     RMSE  Rsquared      MAE   RMSESD RsquaredSD    MAESD</span></span>
<span id="cb95-13"><a href="http://localhost:3527/#cb95-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 1     1 13.24565 0.1390763 10.85628 1.724771  0.1253628 1.404933</span></span>
<span id="cb95-14"><a href="http://localhost:3527/#cb95-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 2     2 12.70180 0.2215130 10.48467 1.867817  0.1835467 1.635797</span></span>
<span id="cb95-15"><a href="http://localhost:3527/#cb95-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 3     3 12.34800 0.2499183 10.17653 1.836641  0.1850143 1.617479</span></span>
<span id="cb95-16"><a href="http://localhost:3527/#cb95-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 4     4 12.19919 0.2660067 10.09570 1.794291  0.1793756 1.605500</span></span>
<span id="cb95-17"><a href="http://localhost:3527/#cb95-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 5     5 12.19822 0.2684751 10.08568 1.890109  0.1707500 1.664600</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>It can be seen that we get the best scores for RMSE and R squared are achieved if all variables are added into the model. But the difference between 3, 4 and 5 variables is very small. Moreover there is no consideration of the adjusted R squared. R squared is increasing most times if additional variables are added into the model while the adjusted R squared is adding a penalty for this.</p>
<p>Nevertheless we will continue with the model which has the highest R squared and RMSE score. It needs to be added that both of these values are not that good.</p>
<p>Lets display the best tuning values (nvmax) selected by the train() function.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="http://localhost:3527/#cb96-1" aria-hidden="true" tabindex="-1"></a>step.model<span class="sc">$</span>bestTune</span>
<span id="cb96-2"><a href="http://localhost:3527/#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="do">##   nvmax</span></span>
<span id="cb96-3"><a href="http://localhost:3527/#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 5     5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Result from Forward selection is to use all 5 variables for modelling.</p>
<p>Lets check in which order these variables are selected. This can be seen by the * in the corresponding selection step.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="http://localhost:3527/#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(step.model<span class="sc">$</span>finalModel)</span>
<span id="cb97-2"><a href="http://localhost:3527/#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Subset selection object</span></span>
<span id="cb97-3"><a href="http://localhost:3527/#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 Variables  (and intercept)</span></span>
<span id="cb97-4"><a href="http://localhost:3527/#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="do">##                                   Forced in Forced out</span></span>
<span id="cb97-5"><a href="http://localhost:3527/#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="do">## gendermale                            FALSE      FALSE</span></span>
<span id="cb97-6"><a href="http://localhost:3527/#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="do">## ethnic_groupgroup B                   FALSE      FALSE</span></span>
<span id="cb97-7"><a href="http://localhost:3527/#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="do">## ethnic_groupgroup C                   FALSE      FALSE</span></span>
<span id="cb97-8"><a href="http://localhost:3527/#cb97-8" aria-hidden="true" tabindex="-1"></a><span class="do">## ethnic_groupgroup D                   FALSE      FALSE</span></span>
<span id="cb97-9"><a href="http://localhost:3527/#cb97-9" aria-hidden="true" tabindex="-1"></a><span class="do">## ethnic_groupgroup E                   FALSE      FALSE</span></span>
<span id="cb97-10"><a href="http://localhost:3527/#cb97-10" aria-hidden="true" tabindex="-1"></a><span class="do">## parent_educationbachelor's degree     FALSE      FALSE</span></span>
<span id="cb97-11"><a href="http://localhost:3527/#cb97-11" aria-hidden="true" tabindex="-1"></a><span class="do">## parent_educationhigh school           FALSE      FALSE</span></span>
<span id="cb97-12"><a href="http://localhost:3527/#cb97-12" aria-hidden="true" tabindex="-1"></a><span class="do">## parent_educationmaster's degree       FALSE      FALSE</span></span>
<span id="cb97-13"><a href="http://localhost:3527/#cb97-13" aria-hidden="true" tabindex="-1"></a><span class="do">## parent_educationsome college          FALSE      FALSE</span></span>
<span id="cb97-14"><a href="http://localhost:3527/#cb97-14" aria-hidden="true" tabindex="-1"></a><span class="do">## parent_educationsome high school      FALSE      FALSE</span></span>
<span id="cb97-15"><a href="http://localhost:3527/#cb97-15" aria-hidden="true" tabindex="-1"></a><span class="do">## lunchstandard                         FALSE      FALSE</span></span>
<span id="cb97-16"><a href="http://localhost:3527/#cb97-16" aria-hidden="true" tabindex="-1"></a><span class="do">## test_prepnone                         FALSE      FALSE</span></span>
<span id="cb97-17"><a href="http://localhost:3527/#cb97-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 subsets of each size up to 5</span></span>
<span id="cb97-18"><a href="http://localhost:3527/#cb97-18" aria-hidden="true" tabindex="-1"></a><span class="do">## Selection Algorithm: forward</span></span>
<span id="cb97-19"><a href="http://localhost:3527/#cb97-19" aria-hidden="true" tabindex="-1"></a><span class="do">##          gendermale ethnic_groupgroup B ethnic_groupgroup C ethnic_groupgroup D</span></span>
<span id="cb97-20"><a href="http://localhost:3527/#cb97-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  ( 1 ) " "        " "                 " "                 " "                </span></span>
<span id="cb97-21"><a href="http://localhost:3527/#cb97-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  ( 1 ) " "        " "                 " "                 " "                </span></span>
<span id="cb97-22"><a href="http://localhost:3527/#cb97-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  ( 1 ) " "        " "                 " "                 " "                </span></span>
<span id="cb97-23"><a href="http://localhost:3527/#cb97-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  ( 1 ) " "        " "                 " "                 " "                </span></span>
<span id="cb97-24"><a href="http://localhost:3527/#cb97-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  ( 1 ) "*"        " "                 " "                 " "                </span></span>
<span id="cb97-25"><a href="http://localhost:3527/#cb97-25" aria-hidden="true" tabindex="-1"></a><span class="do">##          ethnic_groupgroup E parent_educationbachelor's degree</span></span>
<span id="cb97-26"><a href="http://localhost:3527/#cb97-26" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  ( 1 ) " "                 " "                              </span></span>
<span id="cb97-27"><a href="http://localhost:3527/#cb97-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  ( 1 ) " "                 " "                              </span></span>
<span id="cb97-28"><a href="http://localhost:3527/#cb97-28" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  ( 1 ) "*"                 " "                              </span></span>
<span id="cb97-29"><a href="http://localhost:3527/#cb97-29" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  ( 1 ) "*"                 " "                              </span></span>
<span id="cb97-30"><a href="http://localhost:3527/#cb97-30" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  ( 1 ) "*"                 " "                              </span></span>
<span id="cb97-31"><a href="http://localhost:3527/#cb97-31" aria-hidden="true" tabindex="-1"></a><span class="do">##          parent_educationhigh school parent_educationmaster's degree</span></span>
<span id="cb97-32"><a href="http://localhost:3527/#cb97-32" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  ( 1 ) " "                         " "                            </span></span>
<span id="cb97-33"><a href="http://localhost:3527/#cb97-33" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  ( 1 ) " "                         " "                            </span></span>
<span id="cb97-34"><a href="http://localhost:3527/#cb97-34" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  ( 1 ) " "                         " "                            </span></span>
<span id="cb97-35"><a href="http://localhost:3527/#cb97-35" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  ( 1 ) " "                         " "                            </span></span>
<span id="cb97-36"><a href="http://localhost:3527/#cb97-36" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  ( 1 ) " "                         " "                            </span></span>
<span id="cb97-37"><a href="http://localhost:3527/#cb97-37" aria-hidden="true" tabindex="-1"></a><span class="do">##          parent_educationsome college parent_educationsome high school</span></span>
<span id="cb97-38"><a href="http://localhost:3527/#cb97-38" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  ( 1 ) " "                          " "                             </span></span>
<span id="cb97-39"><a href="http://localhost:3527/#cb97-39" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  ( 1 ) " "                          " "                             </span></span>
<span id="cb97-40"><a href="http://localhost:3527/#cb97-40" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  ( 1 ) " "                          " "                             </span></span>
<span id="cb97-41"><a href="http://localhost:3527/#cb97-41" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  ( 1 ) " "                          "*"                             </span></span>
<span id="cb97-42"><a href="http://localhost:3527/#cb97-42" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  ( 1 ) " "                          "*"                             </span></span>
<span id="cb97-43"><a href="http://localhost:3527/#cb97-43" aria-hidden="true" tabindex="-1"></a><span class="do">##          lunchstandard test_prepnone</span></span>
<span id="cb97-44"><a href="http://localhost:3527/#cb97-44" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  ( 1 ) "*"           " "          </span></span>
<span id="cb97-45"><a href="http://localhost:3527/#cb97-45" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  ( 1 ) "*"           "*"          </span></span>
<span id="cb97-46"><a href="http://localhost:3527/#cb97-46" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  ( 1 ) "*"           "*"          </span></span>
<span id="cb97-47"><a href="http://localhost:3527/#cb97-47" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  ( 1 ) "*"           "*"          </span></span>
<span id="cb97-48"><a href="http://localhost:3527/#cb97-48" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  ( 1 ) "*"           "*"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Below is the result summed up. The rank of the most important features is:</p>
<ol type="1">
<li>Lunch</li>
<li>Test preparation</li>
<li>ethnic_group</li>
<li>parent_education</li>
<li>gender</li>
</ol>
<p>For better results of the model it would make sense to have a deeper analysis of the adjusted R squared score for the added variables. Moreover it would probably make sense to reduce the amount of levels in the variables. For example some ethnic groups have almost no difference between their performance on the average exam score.</p>
</section>
<section id="model-tuning" class="level2">
<h2 class="anchored" data-anchor-id="model-tuning">Model Tuning<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#model-tuning" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>This chapter will cover the possibilities of model tuning. For this the three created basis models will be tuned. In the first step the adaption of parameters is made manually. In the second step the tune package is used. For the model performance only the numeric results will be compared. No further analysis of the visualization of model results will be made. At the end the model with the best performance will be used to make a final fit on the training data.</p>
<p>As a comparison a model which only contains the mean will be created. This will be used as a simple comparison if the created model performs better than a simple guess of the mean for all exam scores.</p>
<section id="boosted-tree-2" class="level3">
<h3 class="anchored" data-anchor-id="boosted-tree-2">Boosted Tree<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#boosted-tree-2" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>For the Boosted Tree the following hyperparameters shall be adapted:</p>
<ul>
<li><p>Trees: Amount of trees in the ensemble - default 15</p></li>
<li><p>Tree_depth: Maximal depth of the tree (e.g number of splits) - default 6</p></li>
<li><p>min_n; minimum amount of data points for a further split - default 1</p></li>
<li><p>Learn_rate: Learn-rate at which the algorithm adapts from iteration to iteration - default 0.3</p></li>
<li><p>Loss_reduction: Minimum loss reduction - default 0.0</p></li>
</ul>
<p>Source: <a href="https://parsnip.tidymodels.org/reference/details_boost_tree_xgboost.html">Boosted trees via xgboost</a></p>
<p>At first manually the hyper parameters are adapted and the result will be checked.</p>
<p>First of all the model will be specified:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="http://localhost:3527/#cb98-1" aria-hidden="true" tabindex="-1"></a>xgb_spec_2 <span class="ot">&lt;-</span> </span>
<span id="cb98-2"><a href="http://localhost:3527/#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">boost_tree</span>(</span>
<span id="cb98-3"><a href="http://localhost:3527/#cb98-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">trees =</span> <span class="dv">30</span>,</span>
<span id="cb98-4"><a href="http://localhost:3527/#cb98-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">tree_depth =</span> <span class="dv">4</span>,</span>
<span id="cb98-5"><a href="http://localhost:3527/#cb98-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_n =</span> <span class="dv">8</span>,</span>
<span id="cb98-6"><a href="http://localhost:3527/#cb98-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">learn_rate =</span> <span class="fl">0.2</span>,</span>
<span id="cb98-7"><a href="http://localhost:3527/#cb98-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">loss_reduction =</span> <span class="fl">0.05</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb98-8"><a href="http://localhost:3527/#cb98-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"xgboost"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb98-9"><a href="http://localhost:3527/#cb98-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Afterwards the new model will be added to the workflow with the created recipe</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="http://localhost:3527/#cb99-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-2"><a href="http://localhost:3527/#cb99-2" aria-hidden="true" tabindex="-1"></a>xgb_workflow_2 <span class="ot">&lt;-</span></span>
<span id="cb99-3"><a href="http://localhost:3527/#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb99-4"><a href="http://localhost:3527/#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb99-5"><a href="http://localhost:3527/#cb99-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(xgb_spec_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="http://localhost:3527/#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb100-2"><a href="http://localhost:3527/#cb100-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-3"><a href="http://localhost:3527/#cb100-3" aria-hidden="true" tabindex="-1"></a>xgb_res_2 <span class="ot">&lt;-</span></span>
<span id="cb100-4"><a href="http://localhost:3527/#cb100-4" aria-hidden="true" tabindex="-1"></a>  xgb_workflow_2 <span class="sc">%&gt;%</span></span>
<span id="cb100-5"><a href="http://localhost:3527/#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit_resamples</span>(</span>
<span id="cb100-6"><a href="http://localhost:3527/#cb100-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb100-7"><a href="http://localhost:3527/#cb100-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb100-8"><a href="http://localhost:3527/#cb100-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb100-9"><a href="http://localhost:3527/#cb100-9" aria-hidden="true" tabindex="-1"></a>xgb_res_2 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">TRUE</span>)</span>
<span id="cb100-10"><a href="http://localhost:3527/#cb100-10" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 6</span></span>
<span id="cb100-11"><a href="http://localhost:3527/#cb100-11" aria-hidden="true" tabindex="-1"></a><span class="do">##   .metric .estimator   mean     n std_err .config             </span></span>
<span id="cb100-12"><a href="http://localhost:3527/#cb100-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb100-13"><a href="http://localhost:3527/#cb100-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 rmse    standard   12.5       5  0.255  Preprocessor1_Model1</span></span>
<span id="cb100-14"><a href="http://localhost:3527/#cb100-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 rsq     standard    0.217     5  0.0186 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The model performance improved by adapting the hyper parameters. The RMSE score could be reduced by 0.5. Now lets try it with the tune package.</p>
<p>The hyperparameter tuning is based on the following documentations:</p>
<ul>
<li><p><a href="https://www.tidymodels.org/start/tuning/">Tidymodels: Tuning</a></p></li>
<li><p><a href="https://www.tidymodels.org/learn/work/tune-svm/">Tidymodels: Tune SVM</a> –&gt; includes also a generic approach</p></li>
<li><p><a href="https://tune.tidymodels.org/">Tidymodels: Tune</a></p></li>
</ul>
<p>First of all a new model specification is created. In this the hyperparameters are specified which shall be tuned.</p>
<p>Note: Due to to many different model variations, I have decided to reduce the grid to a maximum of three hyper parameters. Instead of additional hyper parameters, it makes more sense to test more levels in between.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="http://localhost:3527/#cb101-1" aria-hidden="true" tabindex="-1"></a>xgb_spec_3 <span class="ot">&lt;-</span> </span>
<span id="cb101-2"><a href="http://localhost:3527/#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">boost_tree</span>(</span>
<span id="cb101-3"><a href="http://localhost:3527/#cb101-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">trees =</span> <span class="fu">tune</span>(),</span>
<span id="cb101-4"><a href="http://localhost:3527/#cb101-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">tree_depth =</span> <span class="fu">tune</span>(),</span>
<span id="cb101-5"><a href="http://localhost:3527/#cb101-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_n =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb101-6"><a href="http://localhost:3527/#cb101-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"xgboost"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb101-7"><a href="http://localhost:3527/#cb101-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Have a look on the tune spec:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="http://localhost:3527/#cb102-1" aria-hidden="true" tabindex="-1"></a>xgb_spec_3</span>
<span id="cb102-2"><a href="http://localhost:3527/#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Boosted Tree Model Specification (regression)</span></span>
<span id="cb102-3"><a href="http://localhost:3527/#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb102-4"><a href="http://localhost:3527/#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Main Arguments:</span></span>
<span id="cb102-5"><a href="http://localhost:3527/#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   trees = tune()</span></span>
<span id="cb102-6"><a href="http://localhost:3527/#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   min_n = tune()</span></span>
<span id="cb102-7"><a href="http://localhost:3527/#cb102-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   tree_depth = tune()</span></span>
<span id="cb102-8"><a href="http://localhost:3527/#cb102-8" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb102-9"><a href="http://localhost:3527/#cb102-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Computational engine: xgboost</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The <code>tune()</code> is like a placeholder. After the tuning process single numeric values are selected for each of the hyperparameter.</p>
<p>In the next steps several models are trained using resampled data. Afterwards it is checked which model performs best. For this a grid of values is created:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="http://localhost:3527/#cb103-1" aria-hidden="true" tabindex="-1"></a>xgboost_grid <span class="ot">&lt;-</span> <span class="fu">grid_regular</span>(</span>
<span id="cb103-2"><a href="http://localhost:3527/#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">trees</span>(),</span>
<span id="cb103-3"><a href="http://localhost:3527/#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">min_n</span>(),</span>
<span id="cb103-4"><a href="http://localhost:3527/#cb103-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tree_depth</span>(),</span>
<span id="cb103-5"><a href="http://localhost:3527/#cb103-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">5</span></span>
<span id="cb103-6"><a href="http://localhost:3527/#cb103-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb103-7"><a href="http://localhost:3527/#cb103-7" aria-hidden="true" tabindex="-1"></a>xgboost_grid</span>
<span id="cb103-8"><a href="http://localhost:3527/#cb103-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 125 × 3</span></span>
<span id="cb103-9"><a href="http://localhost:3527/#cb103-9" aria-hidden="true" tabindex="-1"></a><span class="do">##    trees min_n tree_depth</span></span>
<span id="cb103-10"><a href="http://localhost:3527/#cb103-10" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;int&gt;      &lt;int&gt;</span></span>
<span id="cb103-11"><a href="http://localhost:3527/#cb103-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  1     1     2          1</span></span>
<span id="cb103-12"><a href="http://localhost:3527/#cb103-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  2   500     2          1</span></span>
<span id="cb103-13"><a href="http://localhost:3527/#cb103-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  3  1000     2          1</span></span>
<span id="cb103-14"><a href="http://localhost:3527/#cb103-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  4  1500     2          1</span></span>
<span id="cb103-15"><a href="http://localhost:3527/#cb103-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  5  2000     2          1</span></span>
<span id="cb103-16"><a href="http://localhost:3527/#cb103-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  6     1    11          1</span></span>
<span id="cb103-17"><a href="http://localhost:3527/#cb103-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  7   500    11          1</span></span>
<span id="cb103-18"><a href="http://localhost:3527/#cb103-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  8  1000    11          1</span></span>
<span id="cb103-19"><a href="http://localhost:3527/#cb103-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  9  1500    11          1</span></span>
<span id="cb103-20"><a href="http://localhost:3527/#cb103-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 10  2000    11          1</span></span>
<span id="cb103-21"><a href="http://localhost:3527/#cb103-21" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ 115 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In total 125 different models with different hyperparameters were specified.</p>
<p>Everything is ready to tune. <code>tune_grid</code> can be used to fit models for all different hyperparameters.</p>
<p>Define the workflow with the model and recipe.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="http://localhost:3527/#cb104-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-2"><a href="http://localhost:3527/#cb104-2" aria-hidden="true" tabindex="-1"></a>xgb_workflow_3 <span class="ot">&lt;-</span></span>
<span id="cb104-3"><a href="http://localhost:3527/#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb104-4"><a href="http://localhost:3527/#cb104-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb104-5"><a href="http://localhost:3527/#cb104-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(xgb_spec_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Calculate the results with tune_grid.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="http://localhost:3527/#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb105-2"><a href="http://localhost:3527/#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="http://localhost:3527/#cb105-3" aria-hidden="true" tabindex="-1"></a>xgb_res_3 <span class="ot">&lt;-</span></span>
<span id="cb105-4"><a href="http://localhost:3527/#cb105-4" aria-hidden="true" tabindex="-1"></a>  xgb_workflow_3 <span class="sc">%&gt;%</span></span>
<span id="cb105-5"><a href="http://localhost:3527/#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(</span>
<span id="cb105-6"><a href="http://localhost:3527/#cb105-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb105-7"><a href="http://localhost:3527/#cb105-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid =</span> xgboost_grid,</span>
<span id="cb105-8"><a href="http://localhost:3527/#cb105-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb105-9"><a href="http://localhost:3527/#cb105-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The results of this can be filtered so that only the best 5 shall be displayed:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="http://localhost:3527/#cb106-1" aria-hidden="true" tabindex="-1"></a>xgb_res_3 <span class="sc">%&gt;%</span></span>
<span id="cb106-2"><a href="http://localhost:3527/#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb106-3"><a href="http://localhost:3527/#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 5 × 9</span></span>
<span id="cb106-4"><a href="http://localhost:3527/#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   trees min_n tree_depth .metric .estimator  mean     n std_err .config         </span></span>
<span id="cb106-5"><a href="http://localhost:3527/#cb106-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;int&gt; &lt;int&gt;      &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;           </span></span>
<span id="cb106-6"><a href="http://localhost:3527/#cb106-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1   500     2          1 rmse    standard    12.1     5   0.306 Preprocessor1_M…</span></span>
<span id="cb106-7"><a href="http://localhost:3527/#cb106-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2   500    11          1 rmse    standard    12.1     5   0.306 Preprocessor1_M…</span></span>
<span id="cb106-8"><a href="http://localhost:3527/#cb106-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 3   500    21          1 rmse    standard    12.1     5   0.306 Preprocessor1_M…</span></span>
<span id="cb106-9"><a href="http://localhost:3527/#cb106-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 4   500    30          1 rmse    standard    12.1     5   0.306 Preprocessor1_M…</span></span>
<span id="cb106-10"><a href="http://localhost:3527/#cb106-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 5   500    40          1 rmse    standard    12.1     5   0.306 Preprocessor1_M…</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Moreover a selection for the best tree can be made. With that the single set with the best hyperparameters is selected:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="http://localhost:3527/#cb107-1" aria-hidden="true" tabindex="-1"></a>xgboost_best <span class="ot">&lt;-</span> xgb_res_3 <span class="sc">%&gt;%</span></span>
<span id="cb107-2"><a href="http://localhost:3527/#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb107-3"><a href="http://localhost:3527/#cb107-3" aria-hidden="true" tabindex="-1"></a>xgboost_best</span>
<span id="cb107-4"><a href="http://localhost:3527/#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 × 4</span></span>
<span id="cb107-5"><a href="http://localhost:3527/#cb107-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   trees min_n tree_depth .config               </span></span>
<span id="cb107-6"><a href="http://localhost:3527/#cb107-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;int&gt; &lt;int&gt;      &lt;int&gt; &lt;chr&gt;                 </span></span>
<span id="cb107-7"><a href="http://localhost:3527/#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1   500     2          1 Preprocessor1_Model002</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The hyper parameter optimization with the tune package increased the RMSE a lot compared to the initial model. It has also increased to the manual selected hyper parameters.</p>
<p>But it has to be said that I am skeptical regarding the selected best hyper parameters… Tree_depth of one and a min_n of two do not seem to be robust for new data… Probably the model is overfitting.</p>
</section>
<section id="linear-regression-2" class="level3">
<h3 class="anchored" data-anchor-id="linear-regression-2">Linear regression<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#linear-regression-2" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>For the Linear Regression model the following hyper parameters shall be adapted:</p>
<ul>
<li><p>Penalty: Amount of regularization - has no default and requires a single numeric value</p></li>
<li><p>Mixture: Proportion of lasso penalty - default 1.0</p></li>
</ul>
<p>Source: <a href="https://parsnip.tidymodels.org/reference/details_linear_reg_glmnet.html">Linear regression via glmnet</a></p>
<p>At first manually the hyper parameters are adapted and the result will be checked.</p>
<p>First of all the model will be specified:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="http://localhost:3527/#cb108-1" aria-hidden="true" tabindex="-1"></a>lin_spec_2 <span class="ot">&lt;-</span> </span>
<span id="cb108-2"><a href="http://localhost:3527/#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linear_reg</span>(<span class="at">penalty =</span> <span class="fl">0.3</span>, <span class="at">mixture =</span> <span class="fl">0.7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb108-3"><a href="http://localhost:3527/#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb108-4"><a href="http://localhost:3527/#cb108-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Afterwards the new model will be added to the workflow with the created recipe</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="http://localhost:3527/#cb109-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-2"><a href="http://localhost:3527/#cb109-2" aria-hidden="true" tabindex="-1"></a>lin_workflow_2 <span class="ot">&lt;-</span></span>
<span id="cb109-3"><a href="http://localhost:3527/#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb109-4"><a href="http://localhost:3527/#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb109-5"><a href="http://localhost:3527/#cb109-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(lin_spec_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="http://localhost:3527/#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb110-2"><a href="http://localhost:3527/#cb110-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-3"><a href="http://localhost:3527/#cb110-3" aria-hidden="true" tabindex="-1"></a>lim_res_2 <span class="ot">&lt;-</span></span>
<span id="cb110-4"><a href="http://localhost:3527/#cb110-4" aria-hidden="true" tabindex="-1"></a>  lin_workflow_2 <span class="sc">%&gt;%</span></span>
<span id="cb110-5"><a href="http://localhost:3527/#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit_resamples</span>(</span>
<span id="cb110-6"><a href="http://localhost:3527/#cb110-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb110-7"><a href="http://localhost:3527/#cb110-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb110-8"><a href="http://localhost:3527/#cb110-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb110-9"><a href="http://localhost:3527/#cb110-9" aria-hidden="true" tabindex="-1"></a>lim_res_2 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">TRUE</span>)</span>
<span id="cb110-10"><a href="http://localhost:3527/#cb110-10" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 6</span></span>
<span id="cb110-11"><a href="http://localhost:3527/#cb110-11" aria-hidden="true" tabindex="-1"></a><span class="do">##   .metric .estimator   mean     n std_err .config             </span></span>
<span id="cb110-12"><a href="http://localhost:3527/#cb110-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb110-13"><a href="http://localhost:3527/#cb110-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 rmse    standard   12.1       5  0.278  Preprocessor1_Model1</span></span>
<span id="cb110-14"><a href="http://localhost:3527/#cb110-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 rsq     standard    0.259     5  0.0227 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The model performance was not improved… Now lets try it with the tune package.</p>
<p>First of all a new model specification is created. In this the hyperparameters are specified which shall be tuned.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="http://localhost:3527/#cb111-1" aria-hidden="true" tabindex="-1"></a>lin_spec_3 <span class="ot">&lt;-</span> </span>
<span id="cb111-2"><a href="http://localhost:3527/#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linear_reg</span>(</span>
<span id="cb111-3"><a href="http://localhost:3527/#cb111-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">penalty =</span> <span class="fu">tune</span>(),</span>
<span id="cb111-4"><a href="http://localhost:3527/#cb111-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mixture =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb111-5"><a href="http://localhost:3527/#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb111-6"><a href="http://localhost:3527/#cb111-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Have a look on the tune spec:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="http://localhost:3527/#cb112-1" aria-hidden="true" tabindex="-1"></a>lin_spec_3</span>
<span id="cb112-2"><a href="http://localhost:3527/#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Linear Regression Model Specification (regression)</span></span>
<span id="cb112-3"><a href="http://localhost:3527/#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb112-4"><a href="http://localhost:3527/#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Main Arguments:</span></span>
<span id="cb112-5"><a href="http://localhost:3527/#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   penalty = tune()</span></span>
<span id="cb112-6"><a href="http://localhost:3527/#cb112-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   mixture = tune()</span></span>
<span id="cb112-7"><a href="http://localhost:3527/#cb112-7" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb112-8"><a href="http://localhost:3527/#cb112-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Computational engine: glmnet</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The <code>tune()</code> is like a placeholder. After the tuning process single numeric values are selected for each of the hyper parameter.</p>
<p>In the next steps several models are trained using resampeled data. Afterwards it is checked which model performs best. For this a grid of values is created:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="http://localhost:3527/#cb113-1" aria-hidden="true" tabindex="-1"></a>lin_grid <span class="ot">&lt;-</span> <span class="fu">grid_regular</span>(</span>
<span id="cb113-2"><a href="http://localhost:3527/#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">penalty</span>(),</span>
<span id="cb113-3"><a href="http://localhost:3527/#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mixture</span>(),</span>
<span id="cb113-4"><a href="http://localhost:3527/#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">5</span></span>
<span id="cb113-5"><a href="http://localhost:3527/#cb113-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb113-6"><a href="http://localhost:3527/#cb113-6" aria-hidden="true" tabindex="-1"></a>lin_grid</span>
<span id="cb113-7"><a href="http://localhost:3527/#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 25 × 2</span></span>
<span id="cb113-8"><a href="http://localhost:3527/#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="do">##         penalty mixture</span></span>
<span id="cb113-9"><a href="http://localhost:3527/#cb113-9" aria-hidden="true" tabindex="-1"></a><span class="do">##           &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb113-10"><a href="http://localhost:3527/#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 0.0000000001    0   </span></span>
<span id="cb113-11"><a href="http://localhost:3527/#cb113-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 0.0000000316    0   </span></span>
<span id="cb113-12"><a href="http://localhost:3527/#cb113-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 0.00001         0   </span></span>
<span id="cb113-13"><a href="http://localhost:3527/#cb113-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 0.00316         0   </span></span>
<span id="cb113-14"><a href="http://localhost:3527/#cb113-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 1               0   </span></span>
<span id="cb113-15"><a href="http://localhost:3527/#cb113-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 0.0000000001    0.25</span></span>
<span id="cb113-16"><a href="http://localhost:3527/#cb113-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 0.0000000316    0.25</span></span>
<span id="cb113-17"><a href="http://localhost:3527/#cb113-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 0.00001         0.25</span></span>
<span id="cb113-18"><a href="http://localhost:3527/#cb113-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 0.00316         0.25</span></span>
<span id="cb113-19"><a href="http://localhost:3527/#cb113-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 1               0.25</span></span>
<span id="cb113-20"><a href="http://localhost:3527/#cb113-20" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ 15 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In total 25 different models with different hyperparameters were specified.</p>
<p>Everything is ready to tune. <code>tune_grid</code> can be used to fit models for all different hyperparameters.</p>
<p>Define the workflow with the model and recipe.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="http://localhost:3527/#cb114-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-2"><a href="http://localhost:3527/#cb114-2" aria-hidden="true" tabindex="-1"></a>lin_workflow_3 <span class="ot">&lt;-</span></span>
<span id="cb114-3"><a href="http://localhost:3527/#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb114-4"><a href="http://localhost:3527/#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb114-5"><a href="http://localhost:3527/#cb114-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(lin_spec_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Calculate the results with tune_grid.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="http://localhost:3527/#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb115-2"><a href="http://localhost:3527/#cb115-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-3"><a href="http://localhost:3527/#cb115-3" aria-hidden="true" tabindex="-1"></a>lin_res_3 <span class="ot">&lt;-</span></span>
<span id="cb115-4"><a href="http://localhost:3527/#cb115-4" aria-hidden="true" tabindex="-1"></a>  lin_workflow_3 <span class="sc">%&gt;%</span></span>
<span id="cb115-5"><a href="http://localhost:3527/#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(</span>
<span id="cb115-6"><a href="http://localhost:3527/#cb115-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb115-7"><a href="http://localhost:3527/#cb115-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid =</span> lin_grid,</span>
<span id="cb115-8"><a href="http://localhost:3527/#cb115-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb115-9"><a href="http://localhost:3527/#cb115-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The results of this can be filtered so that only the best 5 shall be displayed:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="http://localhost:3527/#cb116-1" aria-hidden="true" tabindex="-1"></a>lin_res_3 <span class="sc">%&gt;%</span></span>
<span id="cb116-2"><a href="http://localhost:3527/#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb116-3"><a href="http://localhost:3527/#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 5 × 8</span></span>
<span id="cb116-4"><a href="http://localhost:3527/#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="do">##        penalty mixture .metric .estimator  mean     n std_err .config           </span></span>
<span id="cb116-5"><a href="http://localhost:3527/#cb116-5" aria-hidden="true" tabindex="-1"></a><span class="do">##          &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;             </span></span>
<span id="cb116-6"><a href="http://localhost:3527/#cb116-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 0.0000000001       0 rmse    standard    12.1     5   0.299 Preprocessor1_Mod…</span></span>
<span id="cb116-7"><a href="http://localhost:3527/#cb116-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 0.0000000316       0 rmse    standard    12.1     5   0.299 Preprocessor1_Mod…</span></span>
<span id="cb116-8"><a href="http://localhost:3527/#cb116-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 0.00001            0 rmse    standard    12.1     5   0.299 Preprocessor1_Mod…</span></span>
<span id="cb116-9"><a href="http://localhost:3527/#cb116-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 0.00316            0 rmse    standard    12.1     5   0.299 Preprocessor1_Mod…</span></span>
<span id="cb116-10"><a href="http://localhost:3527/#cb116-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 0.0000000001       1 rmse    standard    12.1     5   0.307 Preprocessor1_Mod…</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Moreover a selection for the best linear model can be made. With that the single set with the best hyper parameters is selected:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="http://localhost:3527/#cb117-1" aria-hidden="true" tabindex="-1"></a>lin_best <span class="ot">&lt;-</span> lin_res_3 <span class="sc">%&gt;%</span></span>
<span id="cb117-2"><a href="http://localhost:3527/#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb117-3"><a href="http://localhost:3527/#cb117-3" aria-hidden="true" tabindex="-1"></a>lin_best</span>
<span id="cb117-4"><a href="http://localhost:3527/#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 × 3</span></span>
<span id="cb117-5"><a href="http://localhost:3527/#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="do">##        penalty mixture .config              </span></span>
<span id="cb117-6"><a href="http://localhost:3527/#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="do">##          &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;                </span></span>
<span id="cb117-7"><a href="http://localhost:3527/#cb117-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 0.0000000001       0 Preprocessor1_Model01</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The hyper parameter optimization with the tune package increased the RMSE only by a minimum compared to the initial model. For the linear regression almost no improvement was possible.</p>
<p>The model performance is similar to the xgboost model which was tuned with the tune package.</p>
</section>
<section id="single-layer-neural-network-1" class="level3">
<h3 class="anchored" data-anchor-id="single-layer-neural-network-1">Single Layer Neural Network<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#single-layer-neural-network-1" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>For the Single Layer Neural Network the following hyperparameters shall be adapted:</p>
<ul>
<li><p>hidden_units: #Hidden units - default 0</p></li>
<li><p>Penalty: Amount of regularization - default 0.0</p></li>
<li><p>epochs: Amount of epochs for training - default 100L</p></li>
</ul>
<p>Source: <a href="https://parsnip.tidymodels.org/reference/details_mlp_nnet.html">Multilayer perceptron via nnet</a></p>
<p>At first manually the hyper parameters are adapted and the result will be checked.</p>
<p>First of all the model will be specified:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="http://localhost:3527/#cb118-1" aria-hidden="true" tabindex="-1"></a>neural_spec_2 <span class="ot">&lt;-</span> </span>
<span id="cb118-2"><a href="http://localhost:3527/#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mlp</span>(</span>
<span id="cb118-3"><a href="http://localhost:3527/#cb118-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">hidden_units =</span> <span class="dv">5</span>,</span>
<span id="cb118-4"><a href="http://localhost:3527/#cb118-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">penalty =</span> <span class="fl">0.1</span>,</span>
<span id="cb118-5"><a href="http://localhost:3527/#cb118-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">epochs =</span> <span class="dv">200</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb118-6"><a href="http://localhost:3527/#cb118-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"nnet"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb118-7"><a href="http://localhost:3527/#cb118-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Afterwards the new model will be added to the workflow with the created recipe</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="http://localhost:3527/#cb119-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-2"><a href="http://localhost:3527/#cb119-2" aria-hidden="true" tabindex="-1"></a>neural_workflow_2 <span class="ot">&lt;-</span></span>
<span id="cb119-3"><a href="http://localhost:3527/#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb119-4"><a href="http://localhost:3527/#cb119-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb119-5"><a href="http://localhost:3527/#cb119-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(neural_spec_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="http://localhost:3527/#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb120-2"><a href="http://localhost:3527/#cb120-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-3"><a href="http://localhost:3527/#cb120-3" aria-hidden="true" tabindex="-1"></a>neural_res_2 <span class="ot">&lt;-</span></span>
<span id="cb120-4"><a href="http://localhost:3527/#cb120-4" aria-hidden="true" tabindex="-1"></a>  neural_workflow_2 <span class="sc">%&gt;%</span></span>
<span id="cb120-5"><a href="http://localhost:3527/#cb120-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit_resamples</span>(</span>
<span id="cb120-6"><a href="http://localhost:3527/#cb120-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb120-7"><a href="http://localhost:3527/#cb120-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-8"><a href="http://localhost:3527/#cb120-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-9"><a href="http://localhost:3527/#cb120-9" aria-hidden="true" tabindex="-1"></a>neural_res_2 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-10"><a href="http://localhost:3527/#cb120-10" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 6</span></span>
<span id="cb120-11"><a href="http://localhost:3527/#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="do">##   .metric .estimator   mean     n std_err .config             </span></span>
<span id="cb120-12"><a href="http://localhost:3527/#cb120-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb120-13"><a href="http://localhost:3527/#cb120-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 rmse    standard   13.0       5  0.189  Preprocessor1_Model1</span></span>
<span id="cb120-14"><a href="http://localhost:3527/#cb120-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 rsq     standard    0.178     5  0.0113 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The model performance improved a bit the hyper parameters. The RMSE score could be reduced by 0.3. Now lets try it with the tune package.</p>
<p>First of all a new model specification is created. In this the hyperparameters are specified which shall be tuned.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="http://localhost:3527/#cb121-1" aria-hidden="true" tabindex="-1"></a>neural_spec_3 <span class="ot">&lt;-</span> </span>
<span id="cb121-2"><a href="http://localhost:3527/#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mlp</span>(</span>
<span id="cb121-3"><a href="http://localhost:3527/#cb121-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">hidden_units =</span> <span class="fu">tune</span>(),</span>
<span id="cb121-4"><a href="http://localhost:3527/#cb121-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">penalty =</span> <span class="fu">tune</span>(),</span>
<span id="cb121-5"><a href="http://localhost:3527/#cb121-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">epochs =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb121-6"><a href="http://localhost:3527/#cb121-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"nnet"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb121-7"><a href="http://localhost:3527/#cb121-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Have a look on the tune spec:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="http://localhost:3527/#cb122-1" aria-hidden="true" tabindex="-1"></a>neural_spec_3</span>
<span id="cb122-2"><a href="http://localhost:3527/#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Single Layer Neural Network Model Specification (regression)</span></span>
<span id="cb122-3"><a href="http://localhost:3527/#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb122-4"><a href="http://localhost:3527/#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Main Arguments:</span></span>
<span id="cb122-5"><a href="http://localhost:3527/#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   hidden_units = tune()</span></span>
<span id="cb122-6"><a href="http://localhost:3527/#cb122-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   penalty = tune()</span></span>
<span id="cb122-7"><a href="http://localhost:3527/#cb122-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   epochs = tune()</span></span>
<span id="cb122-8"><a href="http://localhost:3527/#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb122-9"><a href="http://localhost:3527/#cb122-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Computational engine: nnet</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The <code>tune()</code> is like a placeholder. After the tuning process single numeric values are selected for each of the hyper parameter.</p>
<p>In the next steps several models are trained using resampelled data. Afterwards it is checked which model performs best. For this a grid of values is created:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="http://localhost:3527/#cb123-1" aria-hidden="true" tabindex="-1"></a>neural_grid <span class="ot">&lt;-</span> <span class="fu">grid_regular</span>(</span>
<span id="cb123-2"><a href="http://localhost:3527/#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hidden_units</span>(),</span>
<span id="cb123-3"><a href="http://localhost:3527/#cb123-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">penalty</span>(),</span>
<span id="cb123-4"><a href="http://localhost:3527/#cb123-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">epochs</span>(),</span>
<span id="cb123-5"><a href="http://localhost:3527/#cb123-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">5</span></span>
<span id="cb123-6"><a href="http://localhost:3527/#cb123-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb123-7"><a href="http://localhost:3527/#cb123-7" aria-hidden="true" tabindex="-1"></a>neural_grid</span>
<span id="cb123-8"><a href="http://localhost:3527/#cb123-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 125 × 3</span></span>
<span id="cb123-9"><a href="http://localhost:3527/#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="do">##    hidden_units      penalty epochs</span></span>
<span id="cb123-10"><a href="http://localhost:3527/#cb123-10" aria-hidden="true" tabindex="-1"></a><span class="do">##           &lt;int&gt;        &lt;dbl&gt;  &lt;int&gt;</span></span>
<span id="cb123-11"><a href="http://localhost:3527/#cb123-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  1            1 0.0000000001     10</span></span>
<span id="cb123-12"><a href="http://localhost:3527/#cb123-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  2            3 0.0000000001     10</span></span>
<span id="cb123-13"><a href="http://localhost:3527/#cb123-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  3            5 0.0000000001     10</span></span>
<span id="cb123-14"><a href="http://localhost:3527/#cb123-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  4            7 0.0000000001     10</span></span>
<span id="cb123-15"><a href="http://localhost:3527/#cb123-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  5           10 0.0000000001     10</span></span>
<span id="cb123-16"><a href="http://localhost:3527/#cb123-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  6            1 0.0000000316     10</span></span>
<span id="cb123-17"><a href="http://localhost:3527/#cb123-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  7            3 0.0000000316     10</span></span>
<span id="cb123-18"><a href="http://localhost:3527/#cb123-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  8            5 0.0000000316     10</span></span>
<span id="cb123-19"><a href="http://localhost:3527/#cb123-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  9            7 0.0000000316     10</span></span>
<span id="cb123-20"><a href="http://localhost:3527/#cb123-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 10           10 0.0000000316     10</span></span>
<span id="cb123-21"><a href="http://localhost:3527/#cb123-21" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ 115 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In total 125 different models with different hyperparameters were specified.</p>
<p>Everything is ready to tune. <code>tune_grid</code> can be used to fit models for all different hyperparameters.</p>
<p>Define the workflow with the model and recipe.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="http://localhost:3527/#cb124-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-2"><a href="http://localhost:3527/#cb124-2" aria-hidden="true" tabindex="-1"></a>neural_workflow_3 <span class="ot">&lt;-</span></span>
<span id="cb124-3"><a href="http://localhost:3527/#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb124-4"><a href="http://localhost:3527/#cb124-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb124-5"><a href="http://localhost:3527/#cb124-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(neural_spec_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Calculate the results with tune_grid.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="http://localhost:3527/#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb125-2"><a href="http://localhost:3527/#cb125-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-3"><a href="http://localhost:3527/#cb125-3" aria-hidden="true" tabindex="-1"></a>neural_res_3 <span class="ot">&lt;-</span></span>
<span id="cb125-4"><a href="http://localhost:3527/#cb125-4" aria-hidden="true" tabindex="-1"></a>  neural_workflow_3 <span class="sc">%&gt;%</span></span>
<span id="cb125-5"><a href="http://localhost:3527/#cb125-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(</span>
<span id="cb125-6"><a href="http://localhost:3527/#cb125-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb125-7"><a href="http://localhost:3527/#cb125-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid =</span> neural_grid,</span>
<span id="cb125-8"><a href="http://localhost:3527/#cb125-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb125-9"><a href="http://localhost:3527/#cb125-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The results of this can be filtered so that only the best 5 shall be displayed:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="http://localhost:3527/#cb126-1" aria-hidden="true" tabindex="-1"></a>neural_res_3 <span class="sc">%&gt;%</span></span>
<span id="cb126-2"><a href="http://localhost:3527/#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb126-3"><a href="http://localhost:3527/#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 5 × 9</span></span>
<span id="cb126-4"><a href="http://localhost:3527/#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   hidden_units penalty epochs .metric .estimator  mean     n std_err .config    </span></span>
<span id="cb126-5"><a href="http://localhost:3527/#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="do">##          &lt;int&gt;   &lt;dbl&gt;  &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;      </span></span>
<span id="cb126-6"><a href="http://localhost:3527/#cb126-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1            1 0.00001    505 rmse    standard    12.1     5   0.302 Preprocess…</span></span>
<span id="cb126-7"><a href="http://localhost:3527/#cb126-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2            1 1          505 rmse    standard    12.2     5   0.306 Preprocess…</span></span>
<span id="cb126-8"><a href="http://localhost:3527/#cb126-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 3            1 1          257 rmse    standard    12.2     5   0.306 Preprocess…</span></span>
<span id="cb126-9"><a href="http://localhost:3527/#cb126-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 4            1 1         1000 rmse    standard    12.2     5   0.308 Preprocess…</span></span>
<span id="cb126-10"><a href="http://localhost:3527/#cb126-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 5            1 1          752 rmse    standard    12.2     5   0.308 Preprocess…</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Moreover a selection for the best result can be made. With that the single set with the best hyperparameters is selected:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="http://localhost:3527/#cb127-1" aria-hidden="true" tabindex="-1"></a>neural_best <span class="ot">&lt;-</span> neural_res_3 <span class="sc">%&gt;%</span></span>
<span id="cb127-2"><a href="http://localhost:3527/#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb127-3"><a href="http://localhost:3527/#cb127-3" aria-hidden="true" tabindex="-1"></a>neural_best</span>
<span id="cb127-4"><a href="http://localhost:3527/#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 × 4</span></span>
<span id="cb127-5"><a href="http://localhost:3527/#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   hidden_units penalty epochs .config               </span></span>
<span id="cb127-6"><a href="http://localhost:3527/#cb127-6" aria-hidden="true" tabindex="-1"></a><span class="do">##          &lt;int&gt;   &lt;dbl&gt;  &lt;int&gt; &lt;chr&gt;                 </span></span>
<span id="cb127-7"><a href="http://localhost:3527/#cb127-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1            1 0.00001    505 Preprocessor1_Model061</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The hyper parameter optimization with the tune package increased the RMSE a lot compared to the initial model. It has also increased to the manual selected hyper parameters.</p>
<p>The best models (based on lowest RMSE) are:</p>
<ol type="1">
<li>RMSE: 12.10604 - Linear Regression</li>
<li>RMSE: 12.10782 - XGBoost</li>
<li>RMSE: 12.13196 - Neural Network</li>
</ol>
<p>All models have very similar performance metrics and the differences are minor. But the RMSE score is still quite high and the R squared quite low... Probably the available (only categorical) variables are not that good for predicting the performance of the students in the exams. This was also seen in the previous chapters with the R squared score which was only slightly above 0.25.</p>
<p>In the next step the best model will be fitted a last time on the training data before the deployment phase can be started.</p>
<p>For the final model the Linear regression models is chosen as it has one the one hand the best results and on the other hand the model is quite simple and is well suited for predicting linear relationships.</p>
</section>
</section>
</section>
<section id="deployment" class="level1">
<h1>Deployment</h1>
<p>Within this chapter three different topics shall be made. On the one hand the model deployment via ventiver shall be made. For this the model shall be validated, deployed, etc…</p>
<p>Moreover, a dashbaord shall be created which displays the dataset and in which different visualizations can be made. It would be also possible to add there the model and make predictions within that Dashboard, but I do prefer to also have a look in the other tools instead of going very deep only in one tool. With that I am familiar with more tools and can decide in future which fits best for certain problems. The code for the dashboard is in a separate folder.</p>
<p>As third target of this chapter MLFlow shall be used for modeling, model monitoring etc.</p>
<section id="validate-model" class="level2">
<h2 class="anchored" data-anchor-id="validate-model">Validate model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#validate-model" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>In this chapter the best model from the modeling will be fitted on all training data instead of only the split cross-validation data set. The final fitted model can be deployed and validated on the test data.</p>
<p>Add the model with the best results to the defined workflow:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="http://localhost:3527/#cb128-1" aria-hidden="true" tabindex="-1"></a>workflow_best_model <span class="ot">&lt;-</span></span>
<span id="cb128-2"><a href="http://localhost:3527/#cb128-2" aria-hidden="true" tabindex="-1"></a>  lin_workflow_3 <span class="sc">%&gt;%</span></span>
<span id="cb128-3"><a href="http://localhost:3527/#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(lin_best)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="http://localhost:3527/#cb129-1" aria-hidden="true" tabindex="-1"></a>last_fit_model <span class="ot">&lt;-</span> workflow_best_model <span class="sc">%&gt;%</span> </span>
<span id="cb129-2"><a href="http://localhost:3527/#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">last_fit</span>(data_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="http://localhost:3527/#cb130-1" aria-hidden="true" tabindex="-1"></a>last_fit_model <span class="sc">%&gt;%</span></span>
<span id="cb130-2"><a href="http://localhost:3527/#cb130-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">collect_metrics</span>()</span>
<span id="cb130-3"><a href="http://localhost:3527/#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 4</span></span>
<span id="cb130-4"><a href="http://localhost:3527/#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   .metric .estimator .estimate .config             </span></span>
<span id="cb130-5"><a href="http://localhost:3527/#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb130-6"><a href="http://localhost:3527/#cb130-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 rmse    standard      12.8   Preprocessor1_Model1</span></span>
<span id="cb130-7"><a href="http://localhost:3527/#cb130-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 rsq     standard       0.163 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The performance of the model on test data is worse than it was on the training data. The RMSE metric increased from 12.1 to 12.77. Probably the model was overfitted a bit on the training data. But the RMSE score is still better than for certain created models in the Modelling phase (on training data).</p>
<p>The R squared value is really low compared to the defined metrics at the project begin. It can be said that all created models are not fulfilling the defined metrics for a successful project. Nevertheless the model will be used for the deployment.</p>
<p><strong>Compare the model with a simple model which only predicts the mean:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="http://localhost:3527/#cb131-1" aria-hidden="true" tabindex="-1"></a>mean_model_data <span class="ot">&lt;-</span> train_data <span class="sc">%&gt;%</span></span>
<span id="cb131-2"><a href="http://localhost:3527/#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">mean =</span> <span class="fu">mean</span>(avg_score))</span>
<span id="cb131-3"><a href="http://localhost:3527/#cb131-3" aria-hidden="true" tabindex="-1"></a>mean_model_data</span>
<span id="cb131-4"><a href="http://localhost:3527/#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 798 × 10</span></span>
<span id="cb131-5"><a href="http://localhost:3527/#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    gender ethnic_group parent_education lunch test_prep math_score reading_score</span></span>
<span id="cb131-6"><a href="http://localhost:3527/#cb131-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;fct&gt;  &lt;fct&gt;        &lt;fct&gt;            &lt;fct&gt; &lt;fct&gt;          &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span id="cb131-7"><a href="http://localhost:3527/#cb131-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 female group B      some high school stan… none              46            61</span></span>
<span id="cb131-8"><a href="http://localhost:3527/#cb131-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 male   group B      master's degree  stan… none              53            50</span></span>
<span id="cb131-9"><a href="http://localhost:3527/#cb131-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 male   group C      master's degree  free… none              55            54</span></span>
<span id="cb131-10"><a href="http://localhost:3527/#cb131-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 male   group E      master's degree  free… none              56            46</span></span>
<span id="cb131-11"><a href="http://localhost:3527/#cb131-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 female group C      some college     free… none              35            47</span></span>
<span id="cb131-12"><a href="http://localhost:3527/#cb131-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 male   group D      high school      free… none              58            52</span></span>
<span id="cb131-13"><a href="http://localhost:3527/#cb131-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 female group D      master's degree  free… none              32            35</span></span>
<span id="cb131-14"><a href="http://localhost:3527/#cb131-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 female group A      some high school stan… none              57            53</span></span>
<span id="cb131-15"><a href="http://localhost:3527/#cb131-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 male   group C      associate's deg… free… completed         46            46</span></span>
<span id="cb131-16"><a href="http://localhost:3527/#cb131-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 female group B      high school      stan… none              52            56</span></span>
<span id="cb131-17"><a href="http://localhost:3527/#cb131-17" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ 788 more rows</span></span>
<span id="cb131-18"><a href="http://localhost:3527/#cb131-18" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ 3 more variables: writing_score &lt;dbl&gt;, avg_score &lt;dbl&gt;, mean &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now lets see how this prediction is performing on the available data.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="http://localhost:3527/#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Metrics)</span>
<span id="cb132-2"><a href="http://localhost:3527/#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">RMSE</span>(mean_model_data<span class="sc">$</span>avg_score, mean_model_data<span class="sc">$</span>mean)</span>
<span id="cb132-3"><a href="http://localhost:3527/#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 14.06398</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The RMSE score of a model which is only predicting the mean is worse than the created model. Even thought the difference is not that big…</p>
<p>As the created model is better than a simple model which only predicts the mean the project can continue and the deployment can be made.</p>
<p>Atleast the model is better than this simple one for comparison. If the set target was not achieved, this still shows that the created model is atleast better then only a mean prediction.</p>
</section>
<section id="deploy-model" class="level2">
<h2 class="anchored" data-anchor-id="deploy-model">Deploy model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#deploy-model" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Sources for Model deployment:</p>
<ul>
<li><p><a href="https://www.youtube.com/watch?v=oFQANK13-k4">Youtube Posit: MLOps with vetiver in Python and R</a></p></li>
<li><p><a href="https://solutions.posit.co/gallery/model-management/vetiver/">Posit Solutions: MLOps with vetiver and Posit</a></p></li>
<li><p><a href="https://github.com/sol-eng/bike_predict">Github: End-to-End machine Learning Pipeline</a></p></li>
<li><p><a href="https://colorado.posit.co/rsc/bike-predict-r-dashboard/document.html">Posit: End-to_end Data Science with RStudio Connect</a></p></li>
<li><p><a href="https://cran.r-project.org/web/packages/vetiver/vetiver.pdf">Ventiver documentation</a></p></li>
<li><p><a href="https://www.rplumber.io/articles/introduction.html">Plumber Documentation</a></p></li>
</ul>
<p>First of all a last fit of the created final model will be made. This is done as with the previous last fit the model is not compatible for deploying with vetiver. With this last fit on the training data the model fits to the requirements from vetiver</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="http://localhost:3527/#cb133-1" aria-hidden="true" tabindex="-1"></a>last_fit_model_depl <span class="ot">&lt;-</span> <span class="fu">fit</span>(workflow_best_model, <span class="at">data=</span>train_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In the next step the model name and pin name gets specified.</p>
<p>Moreover the model is defined. For this the vetiver package is used.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="http://localhost:3527/#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vetiver)</span>
<span id="cb134-2"><a href="http://localhost:3527/#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb134-3"><a href="http://localhost:3527/#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rsconnect)</span>
<span id="cb134-4"><a href="http://localhost:3527/#cb134-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pins)</span>
<span id="cb134-5"><a href="http://localhost:3527/#cb134-5" aria-hidden="true" tabindex="-1"></a><span class="co"># define names for model and pin</span></span>
<span id="cb134-6"><a href="http://localhost:3527/#cb134-6" aria-hidden="true" tabindex="-1"></a>model_name <span class="ot">&lt;-</span> <span class="st">"Prediction_of_exam_score_model_r"</span></span>
<span id="cb134-7"><a href="http://localhost:3527/#cb134-7" aria-hidden="true" tabindex="-1"></a>pin_name <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"daniel.steck/{model_name}"</span>)</span>
<span id="cb134-8"><a href="http://localhost:3527/#cb134-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-9"><a href="http://localhost:3527/#cb134-9" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">vetiver_model</span>( <span class="co">#create vetiver model</span></span>
<span id="cb134-10"><a href="http://localhost:3527/#cb134-10" aria-hidden="true" tabindex="-1"></a>  last_fit_model_depl, <span class="co">#model which performed the last fit</span></span>
<span id="cb134-11"><a href="http://localhost:3527/#cb134-11" aria-hidden="true" tabindex="-1"></a>  model_name, <span class="co">#model name from above</span></span>
<span id="cb134-12"><a href="http://localhost:3527/#cb134-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">versioned =</span> <span class="cn">TRUE</span> <span class="co">#versioning shall be made</span></span>
<span id="cb134-13"><a href="http://localhost:3527/#cb134-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb134-14"><a href="http://localhost:3527/#cb134-14" aria-hidden="true" tabindex="-1"></a>v</span>
<span id="cb134-15"><a href="http://localhost:3527/#cb134-15" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb134-16"><a href="http://localhost:3527/#cb134-16" aria-hidden="true" tabindex="-1"></a><span class="do">## ── Prediction_of_exam_score_model_r ─ &lt;bundled_workflow&gt; model for deployment </span></span>
<span id="cb134-17"><a href="http://localhost:3527/#cb134-17" aria-hidden="true" tabindex="-1"></a><span class="do">## A glmnet regression modeling workflow using 5 features</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>After the model was defined the model is written to the pin in order to deploy it.</p>
<p>Sadly I could not find the information for Rsconnect in order to deploy it via an API in Rsconnect. Therefore the model will be written to a local and temporary board.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="http://localhost:3527/#cb135-1" aria-hidden="true" tabindex="-1"></a>model_board <span class="ot">&lt;-</span> <span class="fu">board_temp</span>(<span class="at">versioned =</span> <span class="cn">TRUE</span>) <span class="co">#authentifact information for rsconnect board not found, therefore no deployment on rsconnect</span></span>
<span id="cb135-2"><a href="http://localhost:3527/#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Write the model to the board.</span></span>
<span id="cb135-3"><a href="http://localhost:3527/#cb135-3" aria-hidden="true" tabindex="-1"></a>model_board <span class="sc">%&gt;%</span></span>
<span id="cb135-4"><a href="http://localhost:3527/#cb135-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">vetiver_pin_write</span>(v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Check all versions on the board:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="http://localhost:3527/#cb136-1" aria-hidden="true" tabindex="-1"></a>model_board <span class="sc">%&gt;%</span> <span class="fu">pin_versions</span>(model_name)</span>
<span id="cb136-2"><a href="http://localhost:3527/#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 × 3</span></span>
<span id="cb136-3"><a href="http://localhost:3527/#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   version                created             hash </span></span>
<span id="cb136-4"><a href="http://localhost:3527/#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;                  &lt;dttm&gt;              &lt;chr&gt;</span></span>
<span id="cb136-5"><a href="http://localhost:3527/#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 20230423T170758Z-87efe 2023-04-23 19:07:58 87efe</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="serve-model" class="level2">
<h2 class="anchored" data-anchor-id="serve-model">Serve model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#serve-model" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Usage of plumber in order to deploy the model with vetiver.</p>
<p>If this code chunk is running it is possible to make predictions with the model in a separate window.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="http://localhost:3527/#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plumber)</span>
<span id="cb137-2"><a href="http://localhost:3527/#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="co">#code is commeted out in order for the rendering of the quarto file. This code shall be put into the console in order to make predictions on the model.</span></span>
<span id="cb137-3"><a href="http://localhost:3527/#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="co">#pr() %&gt;%</span></span>
<span id="cb137-4"><a href="http://localhost:3527/#cb137-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  vetiver_api(v) %&gt;%</span></span>
<span id="cb137-5"><a href="http://localhost:3527/#cb137-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  pr_run(port = 8000)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>It is also possible to deploy the vetiver API to other infrastructures than Posit Connect (e.g.&nbsp;AWS or Azure). For this a Docker container helps a lot. This docker container will be created in the next code block. The code is commented out as it shall not be made for each run of the document. Moreover there wont be further changes in the model. If new files shall be created the code can be added to the console or the “#” can be removed.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="http://localhost:3527/#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co">#vetiver_prepare_docker(model_board, model_name)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Three files have been created:</p>
<ul>
<li><p>Dockerfile</p></li>
<li><p>Plumber file serving the REST API</p></li>
<li><p>ventiver_renv_lock file to capture the model dependencies.</p></li>
</ul>
<p><strong>Predict from the model endpoint:</strong></p>
<p>In case that the model is running in another process (e.g.&nbsp;remotely) it would be also possible to get predictions from this model in R. Below the endpoint definition is made as well as the request for a new student exam performance.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="http://localhost:3527/#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co">#endpoint &lt;- vetiver_endpoint("http://127.0.0.1:8000/predict")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="http://localhost:3527/#cb140-1" aria-hidden="true" tabindex="-1"></a>random_student <span class="ot">&lt;-</span> <span class="fu">tibble</span> (</span>
<span id="cb140-2"><a href="http://localhost:3527/#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender =</span> <span class="st">"female"</span>,</span>
<span id="cb140-3"><a href="http://localhost:3527/#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ethnic_group =</span> <span class="st">"group E"</span>,</span>
<span id="cb140-4"><a href="http://localhost:3527/#cb140-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">parent_education =</span><span class="st">"some college"</span>, </span>
<span id="cb140-5"><a href="http://localhost:3527/#cb140-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">lunch =</span> <span class="st">"standard"</span>,</span>
<span id="cb140-6"><a href="http://localhost:3527/#cb140-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">test_preparation =</span> <span class="st">"completed"</span></span>
<span id="cb140-7"><a href="http://localhost:3527/#cb140-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb140-8"><a href="http://localhost:3527/#cb140-8" aria-hidden="true" tabindex="-1"></a><span class="co">#predict(endpoint, random_student)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Sadly this prediction is not working as I always get the error message, that the connection is refused…</p>
<p>Probably the issue is that it was only deployed locally maybe the prediction from the endpoint is only possible as long as the model is deployed locally. In order to execute this chunk here, the previous needs to be stopped.</p>
</section>
<section id="monitor-model" class="level2">
<h2 class="anchored" data-anchor-id="monitor-model">Monitor model<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#monitor-model" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>After the model was successfully deployed it is very important to monitor its statistical performance. The issue is that the decrease of model performance is not noticed as the model can continue returning predictions without errors. These quiet performance problems might occur when the statistical distribution of an input feature changes or when there is change in the relationship between input features and the outcome.</p>
<p>The silent failure can happen unnoticed if there is no monitoring for degradation.</p>
<p>The model monitoring did not work as I planned. I tried to solve it with the posit documentations and their examples. I assume that I am having issues as the model is not deployed to rsconnect and I only have it running locally as long as my code chunk on top is running.</p>
<p>Sources for the attempt of model monitoring:</p>
<ul>
<li><p><a href="https://colorado.posit.co/rsc/bike-predict-r-model-metrics/document.html">Posit Model metrics</a></p></li>
<li><p><a href="https://rstudio.github.io/vetiver-r/reference/vetiver_compute_metrics.html">Vetiver compute metrics</a></p></li>
<li><p><a href="https://vetiver.rstudio.com/get-started/monitor.html">Vetiver Model monitoring</a></p></li>
</ul>
</section>
<section id="shiny" class="level2">
<h2 class="anchored" data-anchor-id="shiny">Shiny<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3527/#shiny" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Within this chapter the model and corresponding visualization shall be deployed with shiny and the target is to visualize everything in a dashboard.</p>
<p>First of all the connection has to be established. For this the data provided within the shiny account is used based on this documentation: <a href="https://shiny.rstudio.com/articles/shinyapps.html?_ga=2.28034556.1347876817.1682150371-373314606.1682150371">Getting started with shiny</a></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="http://localhost:3527/#cb141-1" aria-hidden="true" tabindex="-1"></a>rsconnect<span class="sc">::</span><span class="fu">setAccountInfo</span>(<span class="at">name=</span><span class="st">'danielsteck'</span>, <span class="at">token=</span><span class="st">'27FA72E141C5D1C0E638BBD54BB2421B'</span>, <span class="at">secret=</span><span class="st">'kxHXXMfIFDDJDac/jIvWP7OOffeX8+eWZdDKl/Hu'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Note: Jan I have removed here my connection details for my shiny account.</p>
<p>For creating shiny app it is required to build an separate server.R file as well as a ui.R file in which the data for the app are stored so that the app can be run. These files were created and are stored within t a separate folder in this working directory. Therefore no further input regarding shiny can be found below. Please have a look in the r file which is creating the shiny application.</p>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb142" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb142-1"><a href="http://localhost:3527/#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb142-2"><a href="http://localhost:3527/#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Project_student_grades"</span></span>
<span id="cb142-3"><a href="http://localhost:3527/#cb142-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "Programming languages for Data Science"</span></span>
<span id="cb142-4"><a href="http://localhost:3527/#cb142-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Daniel Steck"</span></span>
<span id="cb142-5"><a href="http://localhost:3527/#cb142-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "04.07.2023"</span></span>
<span id="cb142-6"><a href="http://localhost:3527/#cb142-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb142-7"><a href="http://localhost:3527/#cb142-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb142-8"><a href="http://localhost:3527/#cb142-8" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb142-9"><a href="http://localhost:3527/#cb142-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb142-10"><a href="http://localhost:3527/#cb142-10" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb142-11"><a href="http://localhost:3527/#cb142-11" aria-hidden="true" tabindex="-1"></a><span class="co">  html_document:</span></span>
<span id="cb142-12"><a href="http://localhost:3527/#cb142-12" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb142-13"><a href="http://localhost:3527/#cb142-13" aria-hidden="true" tabindex="-1"></a><span class="co">    toc_depth: 3</span></span>
<span id="cb142-14"><a href="http://localhost:3527/#cb142-14" aria-hidden="true" tabindex="-1"></a><span class="co">    number_sections: true</span></span>
<span id="cb142-15"><a href="http://localhost:3527/#cb142-15" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb142-16"><a href="http://localhost:3527/#cb142-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-17"><a href="http://localhost:3527/#cb142-17" aria-hidden="true" tabindex="-1"></a><span class="fu"># Academic Honesty Statement</span></span>
<span id="cb142-18"><a href="http://localhost:3527/#cb142-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-19"><a href="http://localhost:3527/#cb142-19" aria-hidden="true" tabindex="-1"></a>I, Daniel Steck, hereby state that I have not communicated with or gained information in any way from my classmates or anyone other than the Professor during this exam, and that all work is my own.</span>
<span id="cb142-20"><a href="http://localhost:3527/#cb142-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-21"><a href="http://localhost:3527/#cb142-21" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb142-22"><a href="http://localhost:3527/#cb142-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-23"><a href="http://localhost:3527/#cb142-23" aria-hidden="true" tabindex="-1"></a>This project was created within the module "Programming languages for Data Science.This project will follow the data science life-cycle, which consists of four main topics:</span>
<span id="cb142-24"><a href="http://localhost:3527/#cb142-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-25"><a href="http://localhost:3527/#cb142-25" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Plan</span>
<span id="cb142-26"><a href="http://localhost:3527/#cb142-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-27"><a href="http://localhost:3527/#cb142-27" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Data</span>
<span id="cb142-28"><a href="http://localhost:3527/#cb142-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-29"><a href="http://localhost:3527/#cb142-29" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Model</span>
<span id="cb142-30"><a href="http://localhost:3527/#cb142-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-31"><a href="http://localhost:3527/#cb142-31" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Deployment</span>
<span id="cb142-32"><a href="http://localhost:3527/#cb142-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-33"><a href="http://localhost:3527/#cb142-33" aria-hidden="true" tabindex="-1"></a>This project focuses on using all techniques which were learned during the lecture. Moreover it has the target to learn further topics during the project and to implement them (e.g. Deployment via ventiver or shiny).</span>
<span id="cb142-34"><a href="http://localhost:3527/#cb142-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-35"><a href="http://localhost:3527/#cb142-35" aria-hidden="true" tabindex="-1"></a><span class="al">![Data Science Lifecycle](Images/Data_Science_lifecycle.PNG)</span></span>
<span id="cb142-36"><a href="http://localhost:3527/#cb142-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-37"><a href="http://localhost:3527/#cb142-37" aria-hidden="true" tabindex="-1"></a>The whole documentation of this project can be also found on Github: <span class="co">[</span><span class="ot">Github Repo: Student Grades</span><span class="co">](https://github.com/DanielSteck/Project-Students-grades)</span></span>
<span id="cb142-38"><a href="http://localhost:3527/#cb142-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-39"><a href="http://localhost:3527/#cb142-39" aria-hidden="true" tabindex="-1"></a><span class="fu"># Plan</span></span>
<span id="cb142-40"><a href="http://localhost:3527/#cb142-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-41"><a href="http://localhost:3527/#cb142-41" aria-hidden="true" tabindex="-1"></a>Before a project can be started the planning needs to be made first. Without the planning for the project the result often is not what was requested at the beginning. Therefore it is necessary to define what shall be made in the project and what are the targets of this project to be considered succesfull. Moreover, an usecase is needed as the project shall bring a benefit for the company or the results and models can be sold to others.</span>
<span id="cb142-42"><a href="http://localhost:3527/#cb142-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-43"><a href="http://localhost:3527/#cb142-43" aria-hidden="true" tabindex="-1"></a>To sum is up this chapter is basis for the project and defines the usecase, the problem which shall be solved in this project and the targets which shall be achieved in order to determine at the end if the project was successful or not.</span>
<span id="cb142-44"><a href="http://localhost:3527/#cb142-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-45"><a href="http://localhost:3527/#cb142-45" aria-hidden="true" tabindex="-1"></a>Note: The description in this chapter is without sources for the statements as the target was to describe a fitting "plan" chapter for this project. Some statements wont be applicable, but in the following they will be used as an assumption for the project.</span>
<span id="cb142-46"><a href="http://localhost:3527/#cb142-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-47"><a href="http://localhost:3527/#cb142-47" aria-hidden="true" tabindex="-1"></a><span class="fu">## Identify use case</span></span>
<span id="cb142-48"><a href="http://localhost:3527/#cb142-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-49"><a href="http://localhost:3527/#cb142-49" aria-hidden="true" tabindex="-1"></a>We are a new start-up which is solving issues in companies with the latest data science technology. As we are not know in the market yet, our costumers are a bit skeptical regarding our skills. Due to that we got the job to show our skills within this project. For this our costumer provided this dataset from kaggle:</span>
<span id="cb142-50"><a href="http://localhost:3527/#cb142-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-51"><a href="http://localhost:3527/#cb142-51" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Predict the performance of students</span><span class="co">](https://www.kaggle.com/datasets/rkiattisak/student-performance-in-mathematics?resource=download)</span></span>
<span id="cb142-52"><a href="http://localhost:3527/#cb142-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-53"><a href="http://localhost:3527/#cb142-53" aria-hidden="true" tabindex="-1"></a>This dataset contains 1000 observations of students and their performance on their exams. Moreover, several further information for each student is given.</span>
<span id="cb142-54"><a href="http://localhost:3527/#cb142-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-55"><a href="http://localhost:3527/#cb142-55" aria-hidden="true" tabindex="-1"></a>The target is to predict the performance of students based on demographic criteria and other factors. In addition to that several research questions shall be answered (e.g which impact has the level of education of the parents on their exam score). In order to prove our skills to the costumer the following topics shall be included within that project:</span>
<span id="cb142-56"><a href="http://localhost:3527/#cb142-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-57"><a href="http://localhost:3527/#cb142-57" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>SQL queries</span>
<span id="cb142-58"><a href="http://localhost:3527/#cb142-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-59"><a href="http://localhost:3527/#cb142-59" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>R queries</span>
<span id="cb142-60"><a href="http://localhost:3527/#cb142-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-61"><a href="http://localhost:3527/#cb142-61" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Data visualization and the impact on the target variable</span>
<span id="cb142-62"><a href="http://localhost:3527/#cb142-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-63"><a href="http://localhost:3527/#cb142-63" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Data Preprocessing</span>
<span id="cb142-64"><a href="http://localhost:3527/#cb142-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-65"><a href="http://localhost:3527/#cb142-65" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Train different types of machine learning models</span>
<span id="cb142-66"><a href="http://localhost:3527/#cb142-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-67"><a href="http://localhost:3527/#cb142-67" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Determine the best model and deploy it</span>
<span id="cb142-68"><a href="http://localhost:3527/#cb142-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-69"><a href="http://localhost:3527/#cb142-69" aria-hidden="true" tabindex="-1"></a><span class="fu">## Frame the problem</span></span>
<span id="cb142-70"><a href="http://localhost:3527/#cb142-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-71"><a href="http://localhost:3527/#cb142-71" aria-hidden="true" tabindex="-1"></a>In the past it was noticed that the gap between students with very good marks and the one with quite bad ones is getting bigger and bigger, but it is not known yet why this keeps happening. This also leads to a gap when the students finish their education and they are going to work. In the future more and more people are not having the required qualification for their jobs as they are not able to finish their education due to bad marks. This needs to be stopped and changes in the system have to be made in order to improve this and to keep the country ready for the developments in the next decades.</span>
<span id="cb142-72"><a href="http://localhost:3527/#cb142-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-73"><a href="http://localhost:3527/#cb142-73" aria-hidden="true" tabindex="-1"></a>As our costumer is responsible for the education system they are very curious of the results from this project. Based on what can be learned in the queries and visualizations as well as in the models, they plan to make changes in their education system. For example a special assistance for students who are not performing that good. It depends on the results of this project to identify possible target groups who need more support in order to improve their skills and performance in exams. Therefore, it is important to learn which groups have disadvantages in their education and why. Only with this information it is possible to support them. As more and more students with a good mark are finishing their education the qualification in the labour market will increase and this will improve the economic power of our country.</span>
<span id="cb142-74"><a href="http://localhost:3527/#cb142-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-75"><a href="http://localhost:3527/#cb142-75" aria-hidden="true" tabindex="-1"></a>The model shall support on this task. As it will be possible to play around with the characteristics of the students and their background. The model can be the basis for the decisions for the education system.</span>
<span id="cb142-76"><a href="http://localhost:3527/#cb142-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-77"><a href="http://localhost:3527/#cb142-77" aria-hidden="true" tabindex="-1"></a>Due to the fact that a numeric target variable shall be predicted, this project focuses on the supervised learning and a regression model shall be created.</span>
<span id="cb142-78"><a href="http://localhost:3527/#cb142-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-79"><a href="http://localhost:3527/#cb142-79" aria-hidden="true" tabindex="-1"></a><span class="fu">## Identify variables</span></span>
<span id="cb142-80"><a href="http://localhost:3527/#cb142-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-81"><a href="http://localhost:3527/#cb142-81" aria-hidden="true" tabindex="-1"></a>The provided dataset contains eight different variables and 1000 observations. Each observation represents one student (data was anonymized) with his/her score in exams and their characteristics and their background.</span>
<span id="cb142-82"><a href="http://localhost:3527/#cb142-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-83"><a href="http://localhost:3527/#cb142-83" aria-hidden="true" tabindex="-1"></a>Variables in the dataset:</span>
<span id="cb142-84"><a href="http://localhost:3527/#cb142-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-85"><a href="http://localhost:3527/#cb142-85" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Gender:** Gender of the student. This variable has two levels in this dataset. The available data is split either in male or female.</span>
<span id="cb142-86"><a href="http://localhost:3527/#cb142-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-87"><a href="http://localhost:3527/#cb142-87" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Race/ethnicity:** This columns describe the racial or ethnic background of the students (e.g. Asian, African-American, Hispanic, etc.). Note: This column was transferred in groups without information which group displays which ethnicity. This was done to get the result in this project only on the data itself and to avoid the influence of prejudges and stereotypes.</span>
<span id="cb142-88"><a href="http://localhost:3527/#cb142-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-89"><a href="http://localhost:3527/#cb142-89" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Parental level of education:** What is the highest level of education attained from the students parents.There is no differentiation between the parents and only the highest level of education is listed here. The level of education from the other parent is ignored.</span>
<span id="cb142-90"><a href="http://localhost:3527/#cb142-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-91"><a href="http://localhost:3527/#cb142-91" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Lunch:** What type of lunch do the students receive: Either the standard type of lunch or a free/reduced option. The free/reduced option is probably only available for students who have a family which is kind of poor.</span>
<span id="cb142-92"><a href="http://localhost:3527/#cb142-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-93"><a href="http://localhost:3527/#cb142-93" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Test preparation course:** Did the students complete a test preparation course or not?</span>
<span id="cb142-94"><a href="http://localhost:3527/#cb142-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-95"><a href="http://localhost:3527/#cb142-95" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Math score:** Score which was achieved by the student in a standardized mathematics test.</span>
<span id="cb142-96"><a href="http://localhost:3527/#cb142-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-97"><a href="http://localhost:3527/#cb142-97" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Reading score:** Score which was achieved by the student in a standardized reading test.</span>
<span id="cb142-98"><a href="http://localhost:3527/#cb142-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-99"><a href="http://localhost:3527/#cb142-99" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Writing score:** Score which was achieved by the student in a standardized writing test.</span>
<span id="cb142-100"><a href="http://localhost:3527/#cb142-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-101"><a href="http://localhost:3527/#cb142-101" aria-hidden="true" tabindex="-1"></a>Target of this project is to get a general overview of the students performance. It is not needed to know in which course they are performing good or bad. This is important for the later steps to work with the data, but not for now. Therefore, a more generic variable shall be created which combines the total performance of the students instead of the detailed overview for math, reading and writing.</span>
<span id="cb142-102"><a href="http://localhost:3527/#cb142-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-103"><a href="http://localhost:3527/#cb142-103" aria-hidden="true" tabindex="-1"></a><span class="fu">## Define metrics</span></span>
<span id="cb142-104"><a href="http://localhost:3527/#cb142-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-105"><a href="http://localhost:3527/#cb142-105" aria-hidden="true" tabindex="-1"></a>This project has several aspects which determine that is was successful. Note not all aspects need to be fulfilled, but there are some targets which should be fulfilled. One of this aspects is that new insights are made based on the available data set and our costumer can use this information as a basis for their decisions. It would be great if these results could be visualized in an interactive dashboard to work with the data.</span>
<span id="cb142-106"><a href="http://localhost:3527/#cb142-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-107"><a href="http://localhost:3527/#cb142-107" aria-hidden="true" tabindex="-1"></a>Regarding the modelling process it is important that the model shall be deployed at the end of the project. Moreover some metrics are defined in order to define if the model is fulfilling the requested performance. As a regression model shall be created the following metrics are suitable in order the check if the model is performing good or not. These metrics are commonly used for evaluating and reporting the performance of regression models.</span>
<span id="cb142-108"><a href="http://localhost:3527/#cb142-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-109"><a href="http://localhost:3527/#cb142-109" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**RMSE/MSE:** Root Mean Squared Error / Mean Squared Error. The MSE is the mean of the squared differences between the predicted and the actual target values in the dataset. This means the result displays the squared units. This often leads to confusion (e.g. if the result is in squared dollars). The RMSE is the root of this value and is therefore often used when reporting results. Target for this project is to have a RMSE value which is smaller than 10.</span>
<span id="cb142-110"><a href="http://localhost:3527/#cb142-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-111"><a href="http://localhost:3527/#cb142-111" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**R squared:** Measure how much variability in dependent variable can be explained by the model. This metric is the square of Correlation Coefficient (R). The values of this metrics are between 0 and 1. The higher this metric is indicates a better fit between prediction and the actual variable. For this project the R squared value shall be at 0.4, as we only have categorical variables in the dataset.</span>
<span id="cb142-112"><a href="http://localhost:3527/#cb142-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-113"><a href="http://localhost:3527/#cb142-113" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**MAE:** Mean absolute error is the average of the absolute errors. Unlike the RMSE the changes in the MAE are linear and therefore intuitive. The created model at the end shall have a MAE of less than ten percent of the mean of the target value. After the data analysis was made it can be said that this would be less than 6.9.</span>
<span id="cb142-114"><a href="http://localhost:3527/#cb142-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-115"><a href="http://localhost:3527/#cb142-115" aria-hidden="true" tabindex="-1"></a>Beside these metrics the model has to be for sure better than a model which only predicts the average of the target variable.</span>
<span id="cb142-116"><a href="http://localhost:3527/#cb142-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-117"><a href="http://localhost:3527/#cb142-117" aria-hidden="true" tabindex="-1"></a>Sources: <span class="co">[</span><span class="ot">Machine Learning Mastery: Regression Metrics</span><span class="co">](https://machinelearningmastery.com/regression-metrics-for-machine-learning/)</span>, <span class="co">[</span><span class="ot">Towards Data Science: 3 best metrics to evaluate Regression Model?</span><span class="co">](https://towardsdatascience.com/what-are-the-best-metrics-to-evaluate-your-regression-model-418ca481755b)</span></span>
<span id="cb142-118"><a href="http://localhost:3527/#cb142-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-119"><a href="http://localhost:3527/#cb142-119" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data</span></span>
<span id="cb142-120"><a href="http://localhost:3527/#cb142-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-121"><a href="http://localhost:3527/#cb142-121" aria-hidden="true" tabindex="-1"></a>Within this chapter the data will be ingested and analyzed. Furthermore the data is also added into a SQL database and will be used for making queries.</span>
<span id="cb142-122"><a href="http://localhost:3527/#cb142-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-123"><a href="http://localhost:3527/#cb142-123" aria-hidden="true" tabindex="-1"></a><span class="fu">## SQL data analysis</span></span>
<span id="cb142-124"><a href="http://localhost:3527/#cb142-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-125"><a href="http://localhost:3527/#cb142-125" aria-hidden="true" tabindex="-1"></a>Before the steps of the data science lifecycle are made, some SQL queries will be made on the data, in order to answer questions from our costumers.</span>
<span id="cb142-126"><a href="http://localhost:3527/#cb142-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-127"><a href="http://localhost:3527/#cb142-127" aria-hidden="true" tabindex="-1"></a>First the DBI library is loaded and afterwards the data is added into the database.</span>
<span id="cb142-128"><a href="http://localhost:3527/#cb142-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-129"><a href="http://localhost:3527/#cb142-129" aria-hidden="true" tabindex="-1"></a><span class="in">```{r import_SQL_librarys}</span></span>
<span id="cb142-130"><a href="http://localhost:3527/#cb142-130" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>, <span class="at">collapse =</span> <span class="cn">TRUE</span>) </span>
<span id="cb142-131"><a href="http://localhost:3527/#cb142-131" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (DBI)</span>
<span id="cb142-132"><a href="http://localhost:3527/#cb142-132" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb142-133"><a href="http://localhost:3527/#cb142-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-134"><a href="http://localhost:3527/#cb142-134" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-135"><a href="http://localhost:3527/#cb142-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-136"><a href="http://localhost:3527/#cb142-136" aria-hidden="true" tabindex="-1"></a><span class="in">```{r database_connection}</span></span>
<span id="cb142-137"><a href="http://localhost:3527/#cb142-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-138"><a href="http://localhost:3527/#cb142-138" aria-hidden="true" tabindex="-1"></a><span class="co"># Connection to database </span></span>
<span id="cb142-139"><a href="http://localhost:3527/#cb142-139" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="st">":memory:"</span>)</span>
<span id="cb142-140"><a href="http://localhost:3527/#cb142-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-141"><a href="http://localhost:3527/#cb142-141" aria-hidden="true" tabindex="-1"></a>path_sql <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/DanielSteck/Project-Students-grades/main/exams.csv"</span></span>
<span id="cb142-142"><a href="http://localhost:3527/#cb142-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-143"><a href="http://localhost:3527/#cb142-143" aria-hidden="true" tabindex="-1"></a><span class="co"># Write data into database</span></span>
<span id="cb142-144"><a href="http://localhost:3527/#cb142-144" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">"exams_sql"</span>, <span class="fu">read_csv</span>(path_sql, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>))</span>
<span id="cb142-145"><a href="http://localhost:3527/#cb142-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-146"><a href="http://localhost:3527/#cb142-146" aria-hidden="true" tabindex="-1"></a><span class="co">#show table in database</span></span>
<span id="cb142-147"><a href="http://localhost:3527/#cb142-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-148"><a href="http://localhost:3527/#cb142-148" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(con)</span>
<span id="cb142-149"><a href="http://localhost:3527/#cb142-149" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-150"><a href="http://localhost:3527/#cb142-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-151"><a href="http://localhost:3527/#cb142-151" aria-hidden="true" tabindex="-1"></a><span class="fu">### First look on the data</span></span>
<span id="cb142-152"><a href="http://localhost:3527/#cb142-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-153"><a href="http://localhost:3527/#cb142-153" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-154"><a href="http://localhost:3527/#cb142-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-155"><a href="http://localhost:3527/#cb142-155" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb142-156"><a href="http://localhost:3527/#cb142-156" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span>
<span id="cb142-157"><a href="http://localhost:3527/#cb142-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-158"><a href="http://localhost:3527/#cb142-158" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-159"><a href="http://localhost:3527/#cb142-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-160"><a href="http://localhost:3527/#cb142-160" aria-hidden="true" tabindex="-1"></a>The dataset contains 1000 observation with eight variables. Three out of these 8 variables are the students performance on different exams.</span>
<span id="cb142-161"><a href="http://localhost:3527/#cb142-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-162"><a href="http://localhost:3527/#cb142-162" aria-hidden="true" tabindex="-1"></a>Show the first 10 observations:</span>
<span id="cb142-163"><a href="http://localhost:3527/#cb142-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-164"><a href="http://localhost:3527/#cb142-164" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-165"><a href="http://localhost:3527/#cb142-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-166"><a href="http://localhost:3527/#cb142-166" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb142-167"><a href="http://localhost:3527/#cb142-167" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb142-168"><a href="http://localhost:3527/#cb142-168" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span>
<span id="cb142-169"><a href="http://localhost:3527/#cb142-169" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-170"><a href="http://localhost:3527/#cb142-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-171"><a href="http://localhost:3527/#cb142-171" aria-hidden="true" tabindex="-1"></a>It can be seen that the columns should be renamed as there are e.g. spaces included:</span>
<span id="cb142-172"><a href="http://localhost:3527/#cb142-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-173"><a href="http://localhost:3527/#cb142-173" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-174"><a href="http://localhost:3527/#cb142-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-175"><a href="http://localhost:3527/#cb142-175" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> exams_sql</span>
<span id="cb142-176"><a href="http://localhost:3527/#cb142-176" aria-hidden="true" tabindex="-1"></a><span class="kw">RENAME</span> <span class="kw">COLUMN</span> <span class="st">"race/ethnicity"</span> <span class="kw">TO</span> ethnicity</span>
<span id="cb142-177"><a href="http://localhost:3527/#cb142-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-178"><a href="http://localhost:3527/#cb142-178" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-179"><a href="http://localhost:3527/#cb142-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-180"><a href="http://localhost:3527/#cb142-180" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-181"><a href="http://localhost:3527/#cb142-181" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> exams_sql</span>
<span id="cb142-182"><a href="http://localhost:3527/#cb142-182" aria-hidden="true" tabindex="-1"></a><span class="kw">RENAME</span> <span class="kw">COLUMN</span> <span class="st">"parental level of education"</span> <span class="kw">TO</span> parent_education</span>
<span id="cb142-183"><a href="http://localhost:3527/#cb142-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-184"><a href="http://localhost:3527/#cb142-184" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-185"><a href="http://localhost:3527/#cb142-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-186"><a href="http://localhost:3527/#cb142-186" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-187"><a href="http://localhost:3527/#cb142-187" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> exams_sql</span>
<span id="cb142-188"><a href="http://localhost:3527/#cb142-188" aria-hidden="true" tabindex="-1"></a><span class="kw">RENAME</span> <span class="kw">COLUMN</span> <span class="st">"test preparation course"</span> <span class="kw">TO</span> prep_course</span>
<span id="cb142-189"><a href="http://localhost:3527/#cb142-189" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-190"><a href="http://localhost:3527/#cb142-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-191"><a href="http://localhost:3527/#cb142-191" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-192"><a href="http://localhost:3527/#cb142-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-193"><a href="http://localhost:3527/#cb142-193" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> exams_sql</span>
<span id="cb142-194"><a href="http://localhost:3527/#cb142-194" aria-hidden="true" tabindex="-1"></a><span class="kw">RENAME</span> <span class="kw">COLUMN</span> <span class="st">"math score"</span> <span class="kw">TO</span> math_score</span>
<span id="cb142-195"><a href="http://localhost:3527/#cb142-195" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-196"><a href="http://localhost:3527/#cb142-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-197"><a href="http://localhost:3527/#cb142-197" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-198"><a href="http://localhost:3527/#cb142-198" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> exams_sql</span>
<span id="cb142-199"><a href="http://localhost:3527/#cb142-199" aria-hidden="true" tabindex="-1"></a><span class="kw">RENAME</span> <span class="kw">COLUMN</span> <span class="st">"reading score"</span> <span class="kw">TO</span> reading_score</span>
<span id="cb142-200"><a href="http://localhost:3527/#cb142-200" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-201"><a href="http://localhost:3527/#cb142-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-202"><a href="http://localhost:3527/#cb142-202" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-203"><a href="http://localhost:3527/#cb142-203" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> exams_sql</span>
<span id="cb142-204"><a href="http://localhost:3527/#cb142-204" aria-hidden="true" tabindex="-1"></a><span class="kw">RENAME</span> <span class="kw">COLUMN</span> <span class="st">"writing score"</span> <span class="kw">TO</span> writing_score;</span>
<span id="cb142-205"><a href="http://localhost:3527/#cb142-205" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-206"><a href="http://localhost:3527/#cb142-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-207"><a href="http://localhost:3527/#cb142-207" aria-hidden="true" tabindex="-1"></a>Check the renamed columns</span>
<span id="cb142-208"><a href="http://localhost:3527/#cb142-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-209"><a href="http://localhost:3527/#cb142-209" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-210"><a href="http://localhost:3527/#cb142-210" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb142-211"><a href="http://localhost:3527/#cb142-211" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb142-212"><a href="http://localhost:3527/#cb142-212" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-213"><a href="http://localhost:3527/#cb142-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-214"><a href="http://localhost:3527/#cb142-214" aria-hidden="true" tabindex="-1"></a>Lets have a look on the gender and their performance in math.</span>
<span id="cb142-215"><a href="http://localhost:3527/#cb142-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-216"><a href="http://localhost:3527/#cb142-216" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-217"><a href="http://localhost:3527/#cb142-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-218"><a href="http://localhost:3527/#cb142-218" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> gender, <span class="st">"math_score"</span></span>
<span id="cb142-219"><a href="http://localhost:3527/#cb142-219" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span>
<span id="cb142-220"><a href="http://localhost:3527/#cb142-220" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-221"><a href="http://localhost:3527/#cb142-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-222"><a href="http://localhost:3527/#cb142-222" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data Exploration</span></span>
<span id="cb142-223"><a href="http://localhost:3527/#cb142-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-224"><a href="http://localhost:3527/#cb142-224" aria-hidden="true" tabindex="-1"></a>How many different genders are in the dataset?</span>
<span id="cb142-225"><a href="http://localhost:3527/#cb142-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-226"><a href="http://localhost:3527/#cb142-226" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-227"><a href="http://localhost:3527/#cb142-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-228"><a href="http://localhost:3527/#cb142-228" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> gender</span>
<span id="cb142-229"><a href="http://localhost:3527/#cb142-229" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span>
<span id="cb142-230"><a href="http://localhost:3527/#cb142-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-231"><a href="http://localhost:3527/#cb142-231" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-232"><a href="http://localhost:3527/#cb142-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-233"><a href="http://localhost:3527/#cb142-233" aria-hidden="true" tabindex="-1"></a>How many different ethnicities are in the dataset?</span>
<span id="cb142-234"><a href="http://localhost:3527/#cb142-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-235"><a href="http://localhost:3527/#cb142-235" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-236"><a href="http://localhost:3527/#cb142-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-237"><a href="http://localhost:3527/#cb142-237" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> ethnicity</span>
<span id="cb142-238"><a href="http://localhost:3527/#cb142-238" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span>
<span id="cb142-239"><a href="http://localhost:3527/#cb142-239" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-240"><a href="http://localhost:3527/#cb142-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-241"><a href="http://localhost:3527/#cb142-241" aria-hidden="true" tabindex="-1"></a>How many different forms of parent_education are in the dataset?</span>
<span id="cb142-242"><a href="http://localhost:3527/#cb142-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-243"><a href="http://localhost:3527/#cb142-243" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-244"><a href="http://localhost:3527/#cb142-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-245"><a href="http://localhost:3527/#cb142-245" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> parent_education</span>
<span id="cb142-246"><a href="http://localhost:3527/#cb142-246" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span>
<span id="cb142-247"><a href="http://localhost:3527/#cb142-247" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-248"><a href="http://localhost:3527/#cb142-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-249"><a href="http://localhost:3527/#cb142-249" aria-hidden="true" tabindex="-1"></a>How many different lunch types are in the dataset?</span>
<span id="cb142-250"><a href="http://localhost:3527/#cb142-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-251"><a href="http://localhost:3527/#cb142-251" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-252"><a href="http://localhost:3527/#cb142-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-253"><a href="http://localhost:3527/#cb142-253" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> lunch</span>
<span id="cb142-254"><a href="http://localhost:3527/#cb142-254" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span>
<span id="cb142-255"><a href="http://localhost:3527/#cb142-255" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-256"><a href="http://localhost:3527/#cb142-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-257"><a href="http://localhost:3527/#cb142-257" aria-hidden="true" tabindex="-1"></a>How many different types of preparation courses are in the dataset?</span>
<span id="cb142-258"><a href="http://localhost:3527/#cb142-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-259"><a href="http://localhost:3527/#cb142-259" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-260"><a href="http://localhost:3527/#cb142-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-261"><a href="http://localhost:3527/#cb142-261" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> prep_course</span>
<span id="cb142-262"><a href="http://localhost:3527/#cb142-262" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span>
<span id="cb142-263"><a href="http://localhost:3527/#cb142-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-264"><a href="http://localhost:3527/#cb142-264" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-265"><a href="http://localhost:3527/#cb142-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-266"><a href="http://localhost:3527/#cb142-266" aria-hidden="true" tabindex="-1"></a>How many observations are in the data set?</span>
<span id="cb142-267"><a href="http://localhost:3527/#cb142-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-268"><a href="http://localhost:3527/#cb142-268" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-269"><a href="http://localhost:3527/#cb142-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-270"><a href="http://localhost:3527/#cb142-270" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb142-271"><a href="http://localhost:3527/#cb142-271" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">as</span> rows</span>
<span id="cb142-272"><a href="http://localhost:3527/#cb142-272" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span>
<span id="cb142-273"><a href="http://localhost:3527/#cb142-273" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-274"><a href="http://localhost:3527/#cb142-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-275"><a href="http://localhost:3527/#cb142-275" aria-hidden="true" tabindex="-1"></a>How many observations are available for each parent_education</span>
<span id="cb142-276"><a href="http://localhost:3527/#cb142-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-277"><a href="http://localhost:3527/#cb142-277" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-278"><a href="http://localhost:3527/#cb142-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-279"><a href="http://localhost:3527/#cb142-279" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> parent_education,</span>
<span id="cb142-280"><a href="http://localhost:3527/#cb142-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COUNT</span>(parent_education) <span class="kw">AS</span> amount_of_observations</span>
<span id="cb142-281"><a href="http://localhost:3527/#cb142-281" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb142-282"><a href="http://localhost:3527/#cb142-282" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> parent_education</span>
<span id="cb142-283"><a href="http://localhost:3527/#cb142-283" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> amount_of_observations <span class="kw">DESC</span>;</span>
<span id="cb142-284"><a href="http://localhost:3527/#cb142-284" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-285"><a href="http://localhost:3527/#cb142-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-286"><a href="http://localhost:3527/#cb142-286" aria-hidden="true" tabindex="-1"></a>How many students have a math score above 80?</span>
<span id="cb142-287"><a href="http://localhost:3527/#cb142-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-288"><a href="http://localhost:3527/#cb142-288" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-289"><a href="http://localhost:3527/#cb142-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-290"><a href="http://localhost:3527/#cb142-290" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb142-291"><a href="http://localhost:3527/#cb142-291" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">as</span> students_above_math_80</span>
<span id="cb142-292"><a href="http://localhost:3527/#cb142-292" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb142-293"><a href="http://localhost:3527/#cb142-293" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> math_score <span class="op">&gt;</span> <span class="dv">80</span>;</span>
<span id="cb142-294"><a href="http://localhost:3527/#cb142-294" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-295"><a href="http://localhost:3527/#cb142-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-296"><a href="http://localhost:3527/#cb142-296" aria-hidden="true" tabindex="-1"></a>Have a look at the obervations of students with more than 90 in reading score</span>
<span id="cb142-297"><a href="http://localhost:3527/#cb142-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-298"><a href="http://localhost:3527/#cb142-298" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-299"><a href="http://localhost:3527/#cb142-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-300"><a href="http://localhost:3527/#cb142-300" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb142-301"><a href="http://localhost:3527/#cb142-301" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb142-302"><a href="http://localhost:3527/#cb142-302" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> reading_score <span class="op">&gt;</span><span class="dv">90</span>;</span>
<span id="cb142-303"><a href="http://localhost:3527/#cb142-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-304"><a href="http://localhost:3527/#cb142-304" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-305"><a href="http://localhost:3527/#cb142-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-306"><a href="http://localhost:3527/#cb142-306" aria-hidden="true" tabindex="-1"></a>Check the observations of all females with more than 90 in writing score. The result shall be ordered by writing score (decreasing)</span>
<span id="cb142-307"><a href="http://localhost:3527/#cb142-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-308"><a href="http://localhost:3527/#cb142-308" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-309"><a href="http://localhost:3527/#cb142-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-310"><a href="http://localhost:3527/#cb142-310" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span><span class="op">*</span></span>
<span id="cb142-311"><a href="http://localhost:3527/#cb142-311" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb142-312"><a href="http://localhost:3527/#cb142-312" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> gender <span class="op">=</span><span class="st">"female"</span> <span class="kw">AND</span> writing_score<span class="op">&gt;</span><span class="dv">90</span></span>
<span id="cb142-313"><a href="http://localhost:3527/#cb142-313" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> writing_score <span class="kw">DESC</span>;</span>
<span id="cb142-314"><a href="http://localhost:3527/#cb142-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-315"><a href="http://localhost:3527/#cb142-315" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-316"><a href="http://localhost:3527/#cb142-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-317"><a href="http://localhost:3527/#cb142-317" aria-hidden="true" tabindex="-1"></a>Check all observations of students with more than 90% in one of the exams and made NO prep_course</span>
<span id="cb142-318"><a href="http://localhost:3527/#cb142-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-319"><a href="http://localhost:3527/#cb142-319" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-320"><a href="http://localhost:3527/#cb142-320" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb142-321"><a href="http://localhost:3527/#cb142-321" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb142-322"><a href="http://localhost:3527/#cb142-322" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> prep_course <span class="op">=</span> <span class="st">"none"</span> <span class="kw">AND</span> (math_score<span class="op">&gt;</span><span class="dv">90</span> <span class="kw">OR</span> writing_score<span class="op">&gt;</span><span class="dv">90</span> <span class="kw">OR</span> reading_score<span class="op">&gt;</span><span class="dv">90</span>);</span>
<span id="cb142-323"><a href="http://localhost:3527/#cb142-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-324"><a href="http://localhost:3527/#cb142-324" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-325"><a href="http://localhost:3527/#cb142-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-326"><a href="http://localhost:3527/#cb142-326" aria-hidden="true" tabindex="-1"></a>What are the average exam scores of the different ethnicies?</span>
<span id="cb142-327"><a href="http://localhost:3527/#cb142-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-328"><a href="http://localhost:3527/#cb142-328" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-329"><a href="http://localhost:3527/#cb142-329" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ethnicity,</span>
<span id="cb142-330"><a href="http://localhost:3527/#cb142-330" aria-hidden="true" tabindex="-1"></a>  <span class="fu">AVG</span>(math_score) <span class="kw">as</span> avg_math,</span>
<span id="cb142-331"><a href="http://localhost:3527/#cb142-331" aria-hidden="true" tabindex="-1"></a>  <span class="fu">AVG</span>(reading_score) <span class="kw">as</span> avg_read,</span>
<span id="cb142-332"><a href="http://localhost:3527/#cb142-332" aria-hidden="true" tabindex="-1"></a>  <span class="fu">AVG</span>(writing_score) <span class="kw">as</span> avg_write</span>
<span id="cb142-333"><a href="http://localhost:3527/#cb142-333" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb142-334"><a href="http://localhost:3527/#cb142-334" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> ethnicity;</span>
<span id="cb142-335"><a href="http://localhost:3527/#cb142-335" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-336"><a href="http://localhost:3527/#cb142-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-337"><a href="http://localhost:3527/#cb142-337" aria-hidden="true" tabindex="-1"></a>What are the best exam scores?</span>
<span id="cb142-338"><a href="http://localhost:3527/#cb142-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-339"><a href="http://localhost:3527/#cb142-339" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-340"><a href="http://localhost:3527/#cb142-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-341"><a href="http://localhost:3527/#cb142-341" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb142-342"><a href="http://localhost:3527/#cb142-342" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MAX</span>(math_score) <span class="kw">as</span> max_math,</span>
<span id="cb142-343"><a href="http://localhost:3527/#cb142-343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MAX</span>(reading_score) <span class="kw">as</span> max_read,</span>
<span id="cb142-344"><a href="http://localhost:3527/#cb142-344" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MAX</span>(writing_score) <span class="kw">as</span> max_write</span>
<span id="cb142-345"><a href="http://localhost:3527/#cb142-345" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span>
<span id="cb142-346"><a href="http://localhost:3527/#cb142-346" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-347"><a href="http://localhost:3527/#cb142-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-348"><a href="http://localhost:3527/#cb142-348" aria-hidden="true" tabindex="-1"></a>What are the worst exam scores?</span>
<span id="cb142-349"><a href="http://localhost:3527/#cb142-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-350"><a href="http://localhost:3527/#cb142-350" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-351"><a href="http://localhost:3527/#cb142-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-352"><a href="http://localhost:3527/#cb142-352" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb142-353"><a href="http://localhost:3527/#cb142-353" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MIN</span>(math_score) <span class="kw">as</span> min_math,</span>
<span id="cb142-354"><a href="http://localhost:3527/#cb142-354" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MIN</span>(reading_score) <span class="kw">as</span> min_read,</span>
<span id="cb142-355"><a href="http://localhost:3527/#cb142-355" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MIN</span>(writing_score) <span class="kw">as</span> min_write</span>
<span id="cb142-356"><a href="http://localhost:3527/#cb142-356" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql;</span>
<span id="cb142-357"><a href="http://localhost:3527/#cb142-357" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-358"><a href="http://localhost:3527/#cb142-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-359"><a href="http://localhost:3527/#cb142-359" aria-hidden="true" tabindex="-1"></a>What are the average exam scores for the genders?</span>
<span id="cb142-360"><a href="http://localhost:3527/#cb142-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-361"><a href="http://localhost:3527/#cb142-361" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-362"><a href="http://localhost:3527/#cb142-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-363"><a href="http://localhost:3527/#cb142-363" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> gender,</span>
<span id="cb142-364"><a href="http://localhost:3527/#cb142-364" aria-hidden="true" tabindex="-1"></a>  (<span class="fu">AVG</span>(math_score) <span class="op">+</span> <span class="fu">AVG</span>(reading_score) <span class="op">+</span> <span class="fu">AVG</span>(writing_score)) <span class="op">/</span><span class="dv">3</span> <span class="kw">as</span> avg_exams_score</span>
<span id="cb142-365"><a href="http://localhost:3527/#cb142-365" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb142-366"><a href="http://localhost:3527/#cb142-366" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> gender;</span>
<span id="cb142-367"><a href="http://localhost:3527/#cb142-367" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-368"><a href="http://localhost:3527/#cb142-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-369"><a href="http://localhost:3527/#cb142-369" aria-hidden="true" tabindex="-1"></a>Show all obervations which are parents_education "high_school" and have an average score in exams between 80 and 90. Result shall be ordered descending by avg_exam_score</span>
<span id="cb142-370"><a href="http://localhost:3527/#cb142-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-371"><a href="http://localhost:3527/#cb142-371" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-372"><a href="http://localhost:3527/#cb142-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-373"><a href="http://localhost:3527/#cb142-373" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> gender, ethnicity, parent_education, lunch, prep_course,</span>
<span id="cb142-374"><a href="http://localhost:3527/#cb142-374" aria-hidden="true" tabindex="-1"></a>  (math_score <span class="op">+</span> reading_score <span class="op">+</span> writing_score) <span class="op">/</span><span class="dv">3</span> <span class="kw">as</span> avg_exams_score</span>
<span id="cb142-375"><a href="http://localhost:3527/#cb142-375" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb142-376"><a href="http://localhost:3527/#cb142-376" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> parent_education <span class="op">=</span> <span class="st">"high school"</span> <span class="kw">AND</span> avg_exams_score <span class="kw">BETWEEN</span> <span class="dv">80</span> <span class="kw">AND</span> <span class="dv">90</span>;</span>
<span id="cb142-377"><a href="http://localhost:3527/#cb142-377" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-378"><a href="http://localhost:3527/#cb142-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-379"><a href="http://localhost:3527/#cb142-379" aria-hidden="true" tabindex="-1"></a>Show all male ethnicities which have an average_exam score less than 70. Order the avg_exams_score ascending.</span>
<span id="cb142-380"><a href="http://localhost:3527/#cb142-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-381"><a href="http://localhost:3527/#cb142-381" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql connection=con}</span></span>
<span id="cb142-382"><a href="http://localhost:3527/#cb142-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-383"><a href="http://localhost:3527/#cb142-383" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ethnicity,</span>
<span id="cb142-384"><a href="http://localhost:3527/#cb142-384" aria-hidden="true" tabindex="-1"></a>  (<span class="fu">AVG</span>(math_score) <span class="op">+</span> <span class="fu">AVG</span>(reading_score) <span class="op">+</span> <span class="fu">AVG</span>(writing_score)) <span class="op">/</span><span class="dv">3</span> <span class="kw">as</span> avg_exams_score</span>
<span id="cb142-385"><a href="http://localhost:3527/#cb142-385" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> exams_sql</span>
<span id="cb142-386"><a href="http://localhost:3527/#cb142-386" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> gender<span class="op">=</span><span class="st">"male"</span></span>
<span id="cb142-387"><a href="http://localhost:3527/#cb142-387" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> ethnicity</span>
<span id="cb142-388"><a href="http://localhost:3527/#cb142-388" aria-hidden="true" tabindex="-1"></a><span class="kw">HAVING</span> avg_exams_score <span class="op">&lt;</span> <span class="dv">70</span></span>
<span id="cb142-389"><a href="http://localhost:3527/#cb142-389" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> avg_exams_score;</span>
<span id="cb142-390"><a href="http://localhost:3527/#cb142-390" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb142-391"><a href="http://localhost:3527/#cb142-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-392"><a href="http://localhost:3527/#cb142-392" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-393"><a href="http://localhost:3527/#cb142-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-394"><a href="http://localhost:3527/#cb142-394" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data ingestion</span></span>
<span id="cb142-395"><a href="http://localhost:3527/#cb142-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-396"><a href="http://localhost:3527/#cb142-396" aria-hidden="true" tabindex="-1"></a>After the SQL queries were successfully made the next step is to continue with the steps in R. All following steps will be made within R.</span>
<span id="cb142-397"><a href="http://localhost:3527/#cb142-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-398"><a href="http://localhost:3527/#cb142-398" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data Import</span></span>
<span id="cb142-399"><a href="http://localhost:3527/#cb142-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-400"><a href="http://localhost:3527/#cb142-400" aria-hidden="true" tabindex="-1"></a>First of all the data will be imported from a github repo. The initial data set can be found on Kaggle: <span class="co">[</span><span class="ot">Kaggle: Student performance prediction</span><span class="co">](https://www.kaggle.com/datasets/rkiattisak/student-performance-in-mathematics?resource=download)</span></span>
<span id="cb142-401"><a href="http://localhost:3527/#cb142-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-402"><a href="http://localhost:3527/#cb142-402" aria-hidden="true" tabindex="-1"></a>In order to have the same data the whole time this dataset was downloaded and added to my github repo. in case that the kaggle dataset might be updated.</span>
<span id="cb142-403"><a href="http://localhost:3527/#cb142-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-404"><a href="http://localhost:3527/#cb142-404" aria-hidden="true" tabindex="-1"></a><span class="in">```{r read_csv}</span></span>
<span id="cb142-405"><a href="http://localhost:3527/#cb142-405" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>, <span class="at">collapse =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-406"><a href="http://localhost:3527/#cb142-406" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb142-407"><a href="http://localhost:3527/#cb142-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-408"><a href="http://localhost:3527/#cb142-408" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/DanielSteck/Project-Students-grades/main/exams.csv"</span></span>
<span id="cb142-409"><a href="http://localhost:3527/#cb142-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-410"><a href="http://localhost:3527/#cb142-410" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(path, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb142-411"><a href="http://localhost:3527/#cb142-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-412"><a href="http://localhost:3527/#cb142-412" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-413"><a href="http://localhost:3527/#cb142-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-414"><a href="http://localhost:3527/#cb142-414" aria-hidden="true" tabindex="-1"></a><span class="fu">### Clean Data</span></span>
<span id="cb142-415"><a href="http://localhost:3527/#cb142-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-416"><a href="http://localhost:3527/#cb142-416" aria-hidden="true" tabindex="-1"></a>Lets have a look on the first rows to get an expression of the data.</span>
<span id="cb142-417"><a href="http://localhost:3527/#cb142-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-418"><a href="http://localhost:3527/#cb142-418" aria-hidden="true" tabindex="-1"></a><span class="in">```{r first_rows}</span></span>
<span id="cb142-419"><a href="http://localhost:3527/#cb142-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-420"><a href="http://localhost:3527/#cb142-420" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb142-421"><a href="http://localhost:3527/#cb142-421" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb142-422"><a href="http://localhost:3527/#cb142-422" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb142-423"><a href="http://localhost:3527/#cb142-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-424"><a href="http://localhost:3527/#cb142-424" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-425"><a href="http://localhost:3527/#cb142-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-426"><a href="http://localhost:3527/#cb142-426" aria-hidden="true" tabindex="-1"></a>Before further steps can be made, the columns names need to be corrected, as they are including spaces and special characters. To remove those, the janitor package will be used.</span>
<span id="cb142-427"><a href="http://localhost:3527/#cb142-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-428"><a href="http://localhost:3527/#cb142-428" aria-hidden="true" tabindex="-1"></a><span class="in">```{r janitor}</span></span>
<span id="cb142-429"><a href="http://localhost:3527/#cb142-429" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb142-430"><a href="http://localhost:3527/#cb142-430" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> exams <span class="sc">%&gt;%</span></span>
<span id="cb142-431"><a href="http://localhost:3527/#cb142-431" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb142-432"><a href="http://localhost:3527/#cb142-432" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-433"><a href="http://localhost:3527/#cb142-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-434"><a href="http://localhost:3527/#cb142-434" aria-hidden="true" tabindex="-1"></a>Beside the cleaning of the names, some variables shall be renamed in order to shorten the length.</span>
<span id="cb142-435"><a href="http://localhost:3527/#cb142-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-436"><a href="http://localhost:3527/#cb142-436" aria-hidden="true" tabindex="-1"></a><span class="in">```{r rename_columns}</span></span>
<span id="cb142-437"><a href="http://localhost:3527/#cb142-437" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> <span class="fu">rename</span>(exams, <span class="at">ethnic_group =</span> race_ethnicity)</span>
<span id="cb142-438"><a href="http://localhost:3527/#cb142-438" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> <span class="fu">rename</span>(exams, <span class="at">parent_education =</span> parental_level_of_education)</span>
<span id="cb142-439"><a href="http://localhost:3527/#cb142-439" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> <span class="fu">rename</span>(exams, <span class="at">test_prep =</span> test_preparation_course)</span>
<span id="cb142-440"><a href="http://localhost:3527/#cb142-440" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-441"><a href="http://localhost:3527/#cb142-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-442"><a href="http://localhost:3527/#cb142-442" aria-hidden="true" tabindex="-1"></a>The available data consist of <span class="in">`r nrow(exams)`</span> rows. The available features are <span class="in">`r names(exams)`</span>.</span>
<span id="cb142-443"><a href="http://localhost:3527/#cb142-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-444"><a href="http://localhost:3527/#cb142-444" aria-hidden="true" tabindex="-1"></a><span class="fu">### Missing data</span></span>
<span id="cb142-445"><a href="http://localhost:3527/#cb142-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-446"><a href="http://localhost:3527/#cb142-446" aria-hidden="true" tabindex="-1"></a>Lets have a look on the description of the data to check the formats.</span>
<span id="cb142-447"><a href="http://localhost:3527/#cb142-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-448"><a href="http://localhost:3527/#cb142-448" aria-hidden="true" tabindex="-1"></a><span class="in">```{r glimpse}</span></span>
<span id="cb142-449"><a href="http://localhost:3527/#cb142-449" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span> (exams)</span>
<span id="cb142-450"><a href="http://localhost:3527/#cb142-450" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-451"><a href="http://localhost:3527/#cb142-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-452"><a href="http://localhost:3527/#cb142-452" aria-hidden="true" tabindex="-1"></a>Is there any missing data? lets check it:</span>
<span id="cb142-453"><a href="http://localhost:3527/#cb142-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-454"><a href="http://localhost:3527/#cb142-454" aria-hidden="true" tabindex="-1"></a><span class="in">```{r missing_values_graphic}</span></span>
<span id="cb142-455"><a href="http://localhost:3527/#cb142-455" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(visdat)</span>
<span id="cb142-456"><a href="http://localhost:3527/#cb142-456" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_dat</span>(exams)</span>
<span id="cb142-457"><a href="http://localhost:3527/#cb142-457" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-458"><a href="http://localhost:3527/#cb142-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-459"><a href="http://localhost:3527/#cb142-459" aria-hidden="true" tabindex="-1"></a>Alternative method for missing data:</span>
<span id="cb142-460"><a href="http://localhost:3527/#cb142-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-461"><a href="http://localhost:3527/#cb142-461" aria-hidden="true" tabindex="-1"></a><span class="in">```{r missing_values_num}</span></span>
<span id="cb142-462"><a href="http://localhost:3527/#cb142-462" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(exams) <span class="sc">%&gt;%</span> <span class="fu">colSums</span>()</span>
<span id="cb142-463"><a href="http://localhost:3527/#cb142-463" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-464"><a href="http://localhost:3527/#cb142-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-465"><a href="http://localhost:3527/#cb142-465" aria-hidden="true" tabindex="-1"></a>There are no missing numbers in the dataset. Three variables (scores in the exam) are numeric, the other variables are characters.</span>
<span id="cb142-466"><a href="http://localhost:3527/#cb142-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-467"><a href="http://localhost:3527/#cb142-467" aria-hidden="true" tabindex="-1"></a><span class="fu">### Format data</span></span>
<span id="cb142-468"><a href="http://localhost:3527/#cb142-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-469"><a href="http://localhost:3527/#cb142-469" aria-hidden="true" tabindex="-1"></a>Lets have a look on the character columns and check if they should be formatted as factor.</span>
<span id="cb142-470"><a href="http://localhost:3527/#cb142-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-471"><a href="http://localhost:3527/#cb142-471" aria-hidden="true" tabindex="-1"></a><span class="in">```{r levels_gender}</span></span>
<span id="cb142-472"><a href="http://localhost:3527/#cb142-472" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb142-473"><a href="http://localhost:3527/#cb142-473" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(gender,</span>
<span id="cb142-474"><a href="http://localhost:3527/#cb142-474" aria-hidden="true" tabindex="-1"></a>        <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-475"><a href="http://localhost:3527/#cb142-475" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-476"><a href="http://localhost:3527/#cb142-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-477"><a href="http://localhost:3527/#cb142-477" aria-hidden="true" tabindex="-1"></a><span class="in">```{r levels_ethnic_group}</span></span>
<span id="cb142-478"><a href="http://localhost:3527/#cb142-478" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb142-479"><a href="http://localhost:3527/#cb142-479" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ethnic_group,</span>
<span id="cb142-480"><a href="http://localhost:3527/#cb142-480" aria-hidden="true" tabindex="-1"></a>        <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-481"><a href="http://localhost:3527/#cb142-481" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-482"><a href="http://localhost:3527/#cb142-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-483"><a href="http://localhost:3527/#cb142-483" aria-hidden="true" tabindex="-1"></a><span class="in">```{r levels_parent_education}</span></span>
<span id="cb142-484"><a href="http://localhost:3527/#cb142-484" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb142-485"><a href="http://localhost:3527/#cb142-485" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(parent_education,</span>
<span id="cb142-486"><a href="http://localhost:3527/#cb142-486" aria-hidden="true" tabindex="-1"></a>        <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-487"><a href="http://localhost:3527/#cb142-487" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-488"><a href="http://localhost:3527/#cb142-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-489"><a href="http://localhost:3527/#cb142-489" aria-hidden="true" tabindex="-1"></a><span class="in">```{r levels_lunch}</span></span>
<span id="cb142-490"><a href="http://localhost:3527/#cb142-490" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb142-491"><a href="http://localhost:3527/#cb142-491" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(lunch,</span>
<span id="cb142-492"><a href="http://localhost:3527/#cb142-492" aria-hidden="true" tabindex="-1"></a>        <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-493"><a href="http://localhost:3527/#cb142-493" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-494"><a href="http://localhost:3527/#cb142-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-495"><a href="http://localhost:3527/#cb142-495" aria-hidden="true" tabindex="-1"></a><span class="in">```{r levels_test_prep}</span></span>
<span id="cb142-496"><a href="http://localhost:3527/#cb142-496" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb142-497"><a href="http://localhost:3527/#cb142-497" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(test_prep,</span>
<span id="cb142-498"><a href="http://localhost:3527/#cb142-498" aria-hidden="true" tabindex="-1"></a>        <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-499"><a href="http://localhost:3527/#cb142-499" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-500"><a href="http://localhost:3527/#cb142-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-501"><a href="http://localhost:3527/#cb142-501" aria-hidden="true" tabindex="-1"></a>All character variables are having only a small amount of different levels. Therefore all character variables shall be transferred as factor.</span>
<span id="cb142-502"><a href="http://localhost:3527/#cb142-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-503"><a href="http://localhost:3527/#cb142-503" aria-hidden="true" tabindex="-1"></a><span class="in">```{r char_to_factor}</span></span>
<span id="cb142-504"><a href="http://localhost:3527/#cb142-504" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> </span>
<span id="cb142-505"><a href="http://localhost:3527/#cb142-505" aria-hidden="true" tabindex="-1"></a>  exams <span class="sc">%&gt;%</span> </span>
<span id="cb142-506"><a href="http://localhost:3527/#cb142-506" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), as.factor))</span>
<span id="cb142-507"><a href="http://localhost:3527/#cb142-507" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-508"><a href="http://localhost:3527/#cb142-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-509"><a href="http://localhost:3527/#cb142-509" aria-hidden="true" tabindex="-1"></a><span class="fu">### Create new variables</span></span>
<span id="cb142-510"><a href="http://localhost:3527/#cb142-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-511"><a href="http://localhost:3527/#cb142-511" aria-hidden="true" tabindex="-1"></a>Target of this project is to predict the students performance on exams. Therefore an additional column shall be added. This column shall include the average exam score of the students.</span>
<span id="cb142-512"><a href="http://localhost:3527/#cb142-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-513"><a href="http://localhost:3527/#cb142-513" aria-hidden="true" tabindex="-1"></a><span class="in">```{r new_column_avg_score}</span></span>
<span id="cb142-514"><a href="http://localhost:3527/#cb142-514" aria-hidden="true" tabindex="-1"></a>exams <span class="ot">&lt;-</span> exams<span class="sc">%&gt;%</span></span>
<span id="cb142-515"><a href="http://localhost:3527/#cb142-515" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">avg_score =</span> (math_score <span class="sc">+</span> reading_score <span class="sc">+</span> writing_score)<span class="sc">/</span><span class="dv">3</span>)</span>
<span id="cb142-516"><a href="http://localhost:3527/#cb142-516" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-517"><a href="http://localhost:3527/#cb142-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-518"><a href="http://localhost:3527/#cb142-518" aria-hidden="true" tabindex="-1"></a>As all other variables are not numeric, no further new variables can be created.</span>
<span id="cb142-519"><a href="http://localhost:3527/#cb142-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-520"><a href="http://localhost:3527/#cb142-520" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data overview</span></span>
<span id="cb142-521"><a href="http://localhost:3527/#cb142-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-522"><a href="http://localhost:3527/#cb142-522" aria-hidden="true" tabindex="-1"></a>After successfully cleaning, formatting and checking the data, lets have an overview of the data with the package *skimr*:</span>
<span id="cb142-523"><a href="http://localhost:3527/#cb142-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-524"><a href="http://localhost:3527/#cb142-524" aria-hidden="true" tabindex="-1"></a><span class="in">```{r skimr}</span></span>
<span id="cb142-525"><a href="http://localhost:3527/#cb142-525" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb142-526"><a href="http://localhost:3527/#cb142-526" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(exams)</span>
<span id="cb142-527"><a href="http://localhost:3527/#cb142-527" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-528"><a href="http://localhost:3527/#cb142-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-529"><a href="http://localhost:3527/#cb142-529" aria-hidden="true" tabindex="-1"></a>The available data set consists of 1000 rows with in total 9 columns. Four columns are numeric while five are a factor.</span>
<span id="cb142-530"><a href="http://localhost:3527/#cb142-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-531"><a href="http://localhost:3527/#cb142-531" aria-hidden="true" tabindex="-1"></a>Three factor variables have only two levels, while the other two have five and six levels. The distribution of the gender column in the two genders is quite balanced. The columns lunch and test_prep are split in 2:1 in their variables.</span>
<span id="cb142-532"><a href="http://localhost:3527/#cb142-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-533"><a href="http://localhost:3527/#cb142-533" aria-hidden="true" tabindex="-1"></a>The distribution of the numeric variables is very similar. in general the math_score has the lowest values compared to the other three scores, but the difference is not that big. The statistics for p25, p50, p75, p100 as well as the histograms are looking very similar and the differences are only minor. The reading score has the best results in the exam.</span>
<span id="cb142-534"><a href="http://localhost:3527/#cb142-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-535"><a href="http://localhost:3527/#cb142-535" aria-hidden="true" tabindex="-1"></a><span class="fu">### Define features and outcome variable</span></span>
<span id="cb142-536"><a href="http://localhost:3527/#cb142-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-537"><a href="http://localhost:3527/#cb142-537" aria-hidden="true" tabindex="-1"></a>In advance of the data splitting the definition of the target variable and the feature variables shall be made.</span>
<span id="cb142-538"><a href="http://localhost:3527/#cb142-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-539"><a href="http://localhost:3527/#cb142-539" aria-hidden="true" tabindex="-1"></a>The performance in the exams shall be predicted, for this the average performance is sufficient. As the target is to predict the performance, the variables for math, reading and writing score must not be included into the feature list.</span>
<span id="cb142-540"><a href="http://localhost:3527/#cb142-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-541"><a href="http://localhost:3527/#cb142-541" aria-hidden="true" tabindex="-1"></a>It would be also possible to make a use case for students which predicts e.g. the performance in math and also includes the students performance in the other exams. In this case only the general performance shall be predicted to see which generic attributes have a influence on students performance. Also exams are most time in a thigh schedule, which means that there wont be a lot of time between exams. Therefore it does not make sense to include also the performance in other exams to predict the performance in e.g. math. Moreover it takes some time until the results are available. So probably the students already had their exam before they receive the first results. Therefore the target in this project is the prediction of an average exam performance without including the performance in the other exams.</span>
<span id="cb142-542"><a href="http://localhost:3527/#cb142-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-543"><a href="http://localhost:3527/#cb142-543" aria-hidden="true" tabindex="-1"></a>Nevertheless in the data exploration these other exam scores will be also included, but they wont go into the model.</span>
<span id="cb142-544"><a href="http://localhost:3527/#cb142-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-545"><a href="http://localhost:3527/#cb142-545" aria-hidden="true" tabindex="-1"></a><span class="in">```{r outcome_and_features}</span></span>
<span id="cb142-546"><a href="http://localhost:3527/#cb142-546" aria-hidden="true" tabindex="-1"></a>y_label <span class="ot">&lt;-</span> <span class="st">'avg_score'</span> <span class="co">#define target</span></span>
<span id="cb142-547"><a href="http://localhost:3527/#cb142-547" aria-hidden="true" tabindex="-1"></a>features <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'gender'</span>, <span class="st">'ethnic_group'</span>, <span class="st">'parent_education'</span>, <span class="st">'lunch'</span>, <span class="st">'test_prep'</span>) <span class="co">#define features</span></span>
<span id="cb142-548"><a href="http://localhost:3527/#cb142-548" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> exams <span class="sc">%&gt;%</span></span>
<span id="cb142-549"><a href="http://localhost:3527/#cb142-549" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(features))</span>
<span id="cb142-550"><a href="http://localhost:3527/#cb142-550" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> exams <span class="sc">%&gt;%</span></span>
<span id="cb142-551"><a href="http://localhost:3527/#cb142-551" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(y_label))</span>
<span id="cb142-552"><a href="http://localhost:3527/#cb142-552" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-553"><a href="http://localhost:3527/#cb142-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-554"><a href="http://localhost:3527/#cb142-554" aria-hidden="true" tabindex="-1"></a>Our data is now prepared for the data splitting and for building the pipelines.</span>
<span id="cb142-555"><a href="http://localhost:3527/#cb142-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-556"><a href="http://localhost:3527/#cb142-556" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data splitting</span></span>
<span id="cb142-557"><a href="http://localhost:3527/#cb142-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-558"><a href="http://localhost:3527/#cb142-558" aria-hidden="true" tabindex="-1"></a>Before the data exploration can be started, the data shall be split into a training and test set. No insights from the test data shall be used as data insights. Test data was not seen before therefore no information given by test data can be used.</span>
<span id="cb142-559"><a href="http://localhost:3527/#cb142-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-560"><a href="http://localhost:3527/#cb142-560" aria-hidden="true" tabindex="-1"></a>To ensure that the training and test set is representative of the various categories of <span class="in">`avg_score`</span> in the whole dataset, lets have a look on the histogram</span>
<span id="cb142-561"><a href="http://localhost:3527/#cb142-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-562"><a href="http://localhost:3527/#cb142-562" aria-hidden="true" tabindex="-1"></a><span class="in">```{r bins_target_variable}</span></span>
<span id="cb142-563"><a href="http://localhost:3527/#cb142-563" aria-hidden="true" tabindex="-1"></a>exams <span class="sc">%&gt;%</span></span>
<span id="cb142-564"><a href="http://localhost:3527/#cb142-564" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(avg_score)) <span class="sc">+</span> </span>
<span id="cb142-565"><a href="http://localhost:3527/#cb142-565" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span> (<span class="at">bins=</span><span class="dv">6</span>) <span class="co">#tested several, 6 makes most sense </span></span>
<span id="cb142-566"><a href="http://localhost:3527/#cb142-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-567"><a href="http://localhost:3527/#cb142-567" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-568"><a href="http://localhost:3527/#cb142-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-569"><a href="http://localhost:3527/#cb142-569" aria-hidden="true" tabindex="-1"></a>The split data shall included equally data from each of the bins. In order the have the same results for each run, a fix seed is set.</span>
<span id="cb142-570"><a href="http://localhost:3527/#cb142-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-571"><a href="http://localhost:3527/#cb142-571" aria-hidden="true" tabindex="-1"></a>Target is to have 80% of the data for training and 20% for testing.</span>
<span id="cb142-572"><a href="http://localhost:3527/#cb142-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-573"><a href="http://localhost:3527/#cb142-573" aria-hidden="true" tabindex="-1"></a><span class="in">```{r train_test_split}</span></span>
<span id="cb142-574"><a href="http://localhost:3527/#cb142-574" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rsample)</span>
<span id="cb142-575"><a href="http://localhost:3527/#cb142-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-576"><a href="http://localhost:3527/#cb142-576" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>) <span class="co">#for reproducability</span></span>
<span id="cb142-577"><a href="http://localhost:3527/#cb142-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-578"><a href="http://localhost:3527/#cb142-578" aria-hidden="true" tabindex="-1"></a><span class="co"># split in train and test data</span></span>
<span id="cb142-579"><a href="http://localhost:3527/#cb142-579" aria-hidden="true" tabindex="-1"></a>data_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span> (exams,</span>
<span id="cb142-580"><a href="http://localhost:3527/#cb142-580" aria-hidden="true" tabindex="-1"></a>                             <span class="at">prop =</span><span class="dv">4</span><span class="sc">/</span><span class="dv">5</span>,</span>
<span id="cb142-581"><a href="http://localhost:3527/#cb142-581" aria-hidden="true" tabindex="-1"></a>                             <span class="at">strat =</span> avg_score,</span>
<span id="cb142-582"><a href="http://localhost:3527/#cb142-582" aria-hidden="true" tabindex="-1"></a>                             <span class="at">breaks =</span> <span class="dv">6</span>)</span>
<span id="cb142-583"><a href="http://localhost:3527/#cb142-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-584"><a href="http://localhost:3527/#cb142-584" aria-hidden="true" tabindex="-1"></a><span class="co"># Create train dataframe</span></span>
<span id="cb142-585"><a href="http://localhost:3527/#cb142-585" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> <span class="fu">training</span>(data_split)</span>
<span id="cb142-586"><a href="http://localhost:3527/#cb142-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-587"><a href="http://localhost:3527/#cb142-587" aria-hidden="true" tabindex="-1"></a><span class="co">#create test data set</span></span>
<span id="cb142-588"><a href="http://localhost:3527/#cb142-588" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> <span class="fu">testing</span>(data_split)</span>
<span id="cb142-589"><a href="http://localhost:3527/#cb142-589" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-590"><a href="http://localhost:3527/#cb142-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-591"><a href="http://localhost:3527/#cb142-591" aria-hidden="true" tabindex="-1"></a><span class="fu">## Analyze data</span></span>
<span id="cb142-592"><a href="http://localhost:3527/#cb142-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-593"><a href="http://localhost:3527/#cb142-593" aria-hidden="true" tabindex="-1"></a>This chapter had the target to understand the training data and to see which variables have an influence on the outcome variable **avg_score**.</span>
<span id="cb142-594"><a href="http://localhost:3527/#cb142-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-595"><a href="http://localhost:3527/#cb142-595" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data exploration set</span></span>
<span id="cb142-596"><a href="http://localhost:3527/#cb142-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-597"><a href="http://localhost:3527/#cb142-597" aria-hidden="true" tabindex="-1"></a>First step is to create a copy of the training data which will be used for the exploratory data analysis.</span>
<span id="cb142-598"><a href="http://localhost:3527/#cb142-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-599"><a href="http://localhost:3527/#cb142-599" aria-hidden="true" tabindex="-1"></a><span class="in">```{r exploration_dataframe}</span></span>
<span id="cb142-600"><a href="http://localhost:3527/#cb142-600" aria-hidden="true" tabindex="-1"></a>df_explo <span class="ot">&lt;-</span> train_data</span>
<span id="cb142-601"><a href="http://localhost:3527/#cb142-601" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-602"><a href="http://localhost:3527/#cb142-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-603"><a href="http://localhost:3527/#cb142-603" aria-hidden="true" tabindex="-1"></a><span class="fu">### R queries</span></span>
<span id="cb142-604"><a href="http://localhost:3527/#cb142-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-605"><a href="http://localhost:3527/#cb142-605" aria-hidden="true" tabindex="-1"></a>First of all the data is explored with R queries and afterwards the visualization part is made.</span>
<span id="cb142-606"><a href="http://localhost:3527/#cb142-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-607"><a href="http://localhost:3527/#cb142-607" aria-hidden="true" tabindex="-1"></a>Lets have a look on the statistics of the target variable *avg_score*<span class="sc">\*</span>:</span>
<span id="cb142-608"><a href="http://localhost:3527/#cb142-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-609"><a href="http://localhost:3527/#cb142-609" aria-hidden="true" tabindex="-1"></a><span class="in">```{r avg_score_statistics}</span></span>
<span id="cb142-610"><a href="http://localhost:3527/#cb142-610" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span></span>
<span id="cb142-611"><a href="http://localhost:3527/#cb142-611" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb142-612"><a href="http://localhost:3527/#cb142-612" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_score =</span> <span class="fu">min</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>) <span class="co"># na dependency not needed as no missing values, but it might be that data changes with an updated dataset</span></span>
<span id="cb142-613"><a href="http://localhost:3527/#cb142-613" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb142-614"><a href="http://localhost:3527/#cb142-614" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-615"><a href="http://localhost:3527/#cb142-615" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_score =</span> <span class="fu">median</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-616"><a href="http://localhost:3527/#cb142-616" aria-hidden="true" tabindex="-1"></a>    <span class="at">std_score =</span> <span class="fu">sd</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-617"><a href="http://localhost:3527/#cb142-617" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_score =</span> <span class="fu">IQR</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-618"><a href="http://localhost:3527/#cb142-618" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1 =</span><span class="fu">quantile</span>(avg_score, <span class="at">probs =</span><span class="fl">0.25</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-619"><a href="http://localhost:3527/#cb142-619" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">quantile</span>(avg_score, <span class="at">probs =</span> <span class="fl">0.75</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-620"><a href="http://localhost:3527/#cb142-620" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_score =</span> <span class="fu">max</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>)</span>
<span id="cb142-621"><a href="http://localhost:3527/#cb142-621" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb142-622"><a href="http://localhost:3527/#cb142-622" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb142-623"><a href="http://localhost:3527/#cb142-623" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-624"><a href="http://localhost:3527/#cb142-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-625"><a href="http://localhost:3527/#cb142-625" aria-hidden="true" tabindex="-1"></a>The worst exam result is <span class="in">`20`</span> while <span class="in">`100`</span> is the best one. Moreover the mean and median values are almost similar and there is only a slight difference. This means that there are no big outliers included here (which is also easy to explain as 100 is the best possible performance in an exam). The IQR score of 20 tells us, that the difference between the 75th and 25th percentile is only having a difference of 20. So 50% of the data is within a difference of 20.</span>
<span id="cb142-626"><a href="http://localhost:3527/#cb142-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-627"><a href="http://localhost:3527/#cb142-627" aria-hidden="true" tabindex="-1"></a>25% of the students have an exam score of less than 59,3 and 25% of the students are above 79,3. 50% of the students are between 59,3 and 79,3 (the IQR value can be seen here).</span>
<span id="cb142-628"><a href="http://localhost:3527/#cb142-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-629"><a href="http://localhost:3527/#cb142-629" aria-hidden="true" tabindex="-1"></a>Moreover it is interesting how the median, mean and iqr, q1, q3 values are distributed within the categorical variables.</span>
<span id="cb142-630"><a href="http://localhost:3527/#cb142-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-631"><a href="http://localhost:3527/#cb142-631" aria-hidden="true" tabindex="-1"></a>Lets have a look on the gender variable and sort the results descending.</span>
<span id="cb142-632"><a href="http://localhost:3527/#cb142-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-633"><a href="http://localhost:3527/#cb142-633" aria-hidden="true" tabindex="-1"></a><span class="in">```{r avg_score_gender}</span></span>
<span id="cb142-634"><a href="http://localhost:3527/#cb142-634" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span></span>
<span id="cb142-635"><a href="http://localhost:3527/#cb142-635" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span></span>
<span id="cb142-636"><a href="http://localhost:3527/#cb142-636" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb142-637"><a href="http://localhost:3527/#cb142-637" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-638"><a href="http://localhost:3527/#cb142-638" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_score =</span> <span class="fu">median</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-639"><a href="http://localhost:3527/#cb142-639" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_score =</span> <span class="fu">IQR</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-640"><a href="http://localhost:3527/#cb142-640" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1 =</span><span class="fu">quantile</span>(avg_score, <span class="at">probs =</span><span class="fl">0.25</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-641"><a href="http://localhost:3527/#cb142-641" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">quantile</span>(avg_score, <span class="at">probs =</span> <span class="fl">0.75</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb142-642"><a href="http://localhost:3527/#cb142-642" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb142-643"><a href="http://localhost:3527/#cb142-643" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="fu">desc</span>(med_score))</span>
<span id="cb142-644"><a href="http://localhost:3527/#cb142-644" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-645"><a href="http://localhost:3527/#cb142-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-646"><a href="http://localhost:3527/#cb142-646" aria-hidden="true" tabindex="-1"></a>The performance of female students is better than the performance of male students. The mean score for females is 3.3 higher and the median score is 4.0 higher.</span>
<span id="cb142-647"><a href="http://localhost:3527/#cb142-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-648"><a href="http://localhost:3527/#cb142-648" aria-hidden="true" tabindex="-1"></a>Lets have a look on the ethic_group variable and sort the results descending.</span>
<span id="cb142-649"><a href="http://localhost:3527/#cb142-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-650"><a href="http://localhost:3527/#cb142-650" aria-hidden="true" tabindex="-1"></a><span class="in">```{r avg_score_ethic_group}</span></span>
<span id="cb142-651"><a href="http://localhost:3527/#cb142-651" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span></span>
<span id="cb142-652"><a href="http://localhost:3527/#cb142-652" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ethnic_group) <span class="sc">%&gt;%</span></span>
<span id="cb142-653"><a href="http://localhost:3527/#cb142-653" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb142-654"><a href="http://localhost:3527/#cb142-654" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-655"><a href="http://localhost:3527/#cb142-655" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_score =</span> <span class="fu">median</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-656"><a href="http://localhost:3527/#cb142-656" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_score =</span> <span class="fu">IQR</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-657"><a href="http://localhost:3527/#cb142-657" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1 =</span><span class="fu">quantile</span>(avg_score, <span class="at">probs =</span><span class="fl">0.25</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-658"><a href="http://localhost:3527/#cb142-658" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">quantile</span>(avg_score, <span class="at">probs =</span> <span class="fl">0.75</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-659"><a href="http://localhost:3527/#cb142-659" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb142-660"><a href="http://localhost:3527/#cb142-660" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="fu">desc</span>(med_score))</span>
<span id="cb142-661"><a href="http://localhost:3527/#cb142-661" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-662"><a href="http://localhost:3527/#cb142-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-663"><a href="http://localhost:3527/#cb142-663" aria-hidden="true" tabindex="-1"></a>The <span class="in">`group E`</span> has the best performance in the exams. There is a huge gap compared to <span class="in">`group D`</span>. Moreover there is almost no difference in mean and median between the other three groups. It might make sense to combine there groups into one group. But lets analyse this first in a visualization, because the IQR score is spreading a lot between these groups. For example the difference in the q1 is much higher than in the mean and median.</span>
<span id="cb142-664"><a href="http://localhost:3527/#cb142-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-665"><a href="http://localhost:3527/#cb142-665" aria-hidden="true" tabindex="-1"></a>Lets have a look on the variable of parents education and sort the results descending.</span>
<span id="cb142-666"><a href="http://localhost:3527/#cb142-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-667"><a href="http://localhost:3527/#cb142-667" aria-hidden="true" tabindex="-1"></a><span class="in">```{r avg_score_parent_education}</span></span>
<span id="cb142-668"><a href="http://localhost:3527/#cb142-668" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span></span>
<span id="cb142-669"><a href="http://localhost:3527/#cb142-669" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(parent_education) <span class="sc">%&gt;%</span></span>
<span id="cb142-670"><a href="http://localhost:3527/#cb142-670" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb142-671"><a href="http://localhost:3527/#cb142-671" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-672"><a href="http://localhost:3527/#cb142-672" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_score =</span> <span class="fu">median</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-673"><a href="http://localhost:3527/#cb142-673" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_score =</span> <span class="fu">IQR</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-674"><a href="http://localhost:3527/#cb142-674" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1 =</span><span class="fu">quantile</span>(avg_score, <span class="at">probs =</span><span class="fl">0.25</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-675"><a href="http://localhost:3527/#cb142-675" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">quantile</span>(avg_score, <span class="at">probs =</span> <span class="fl">0.75</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-676"><a href="http://localhost:3527/#cb142-676" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb142-677"><a href="http://localhost:3527/#cb142-677" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="fu">desc</span>(med_score))</span>
<span id="cb142-678"><a href="http://localhost:3527/#cb142-678" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-679"><a href="http://localhost:3527/#cb142-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-680"><a href="http://localhost:3527/#cb142-680" aria-hidden="true" tabindex="-1"></a>It can be seen that a higher parent education is not directly leading to a better exam score. The best students are within the <span class="in">`associate's degree`</span> which is a lower education than the <span class="in">`master's degree`</span> and <span class="in">`bachelor's degree`</span>.</span>
<span id="cb142-681"><a href="http://localhost:3527/#cb142-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-682"><a href="http://localhost:3527/#cb142-682" aria-hidden="true" tabindex="-1"></a>Based on the given levels, this would be the ascending order of parent_education (based on these links):</span>
<span id="cb142-683"><a href="http://localhost:3527/#cb142-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-684"><a href="http://localhost:3527/#cb142-684" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Associates, Bachelors and Masters</span><span class="co">](https://thebestschools.org/degrees/college-degree-levels/#:~:text=A%20doctorate%20is%20the%20highest,research%20requirements%2C%20and%20a%20dissertation.)</span></span>
<span id="cb142-685"><a href="http://localhost:3527/#cb142-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-686"><a href="http://localhost:3527/#cb142-686" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">High School and College</span><span class="co">](https://usahello.org/education/children/grade-levels/#gref)</span></span>
<span id="cb142-687"><a href="http://localhost:3527/#cb142-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-688"><a href="http://localhost:3527/#cb142-688" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">College vs Associates degree</span><span class="co">](http://www.differencebetween.net/miscellaneous/difference-between-diploma-and-associate-degree/#:~:text=A%20student%20may%20take%20one,stone%20to%20a%20higher%20education.)</span></span>
<span id="cb142-689"><a href="http://localhost:3527/#cb142-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-690"><a href="http://localhost:3527/#cb142-690" aria-hidden="true" tabindex="-1"></a>List of education level in a ascending order:</span>
<span id="cb142-691"><a href="http://localhost:3527/#cb142-691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-692"><a href="http://localhost:3527/#cb142-692" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Some High School/High School --<span class="sc">\&gt;</span> I did not find any results for this in a research. Probably High School might be a bit better than some High school</span>
<span id="cb142-693"><a href="http://localhost:3527/#cb142-693" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Some College</span>
<span id="cb142-694"><a href="http://localhost:3527/#cb142-694" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Associates degree</span>
<span id="cb142-695"><a href="http://localhost:3527/#cb142-695" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>Bachelor degree</span>
<span id="cb142-696"><a href="http://localhost:3527/#cb142-696" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>Masters degree</span>
<span id="cb142-697"><a href="http://localhost:3527/#cb142-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-698"><a href="http://localhost:3527/#cb142-698" aria-hidden="true" tabindex="-1"></a>This order of parental education is not represented in the performance of students performance.</span>
<span id="cb142-699"><a href="http://localhost:3527/#cb142-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-700"><a href="http://localhost:3527/#cb142-700" aria-hidden="true" tabindex="-1"></a>The worst exam results are for the parental education of some High School and High School.</span>
<span id="cb142-701"><a href="http://localhost:3527/#cb142-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-702"><a href="http://localhost:3527/#cb142-702" aria-hidden="true" tabindex="-1"></a>Lets have a look on the lunch variable and sort the results descending.</span>
<span id="cb142-703"><a href="http://localhost:3527/#cb142-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-704"><a href="http://localhost:3527/#cb142-704" aria-hidden="true" tabindex="-1"></a><span class="in">```{r avg_score_lunch}</span></span>
<span id="cb142-705"><a href="http://localhost:3527/#cb142-705" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span></span>
<span id="cb142-706"><a href="http://localhost:3527/#cb142-706" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(lunch) <span class="sc">%&gt;%</span></span>
<span id="cb142-707"><a href="http://localhost:3527/#cb142-707" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb142-708"><a href="http://localhost:3527/#cb142-708" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-709"><a href="http://localhost:3527/#cb142-709" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_score =</span> <span class="fu">median</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-710"><a href="http://localhost:3527/#cb142-710" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_score =</span> <span class="fu">IQR</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-711"><a href="http://localhost:3527/#cb142-711" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1 =</span><span class="fu">quantile</span>(avg_score, <span class="at">probs =</span><span class="fl">0.25</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-712"><a href="http://localhost:3527/#cb142-712" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">quantile</span>(avg_score, <span class="at">probs =</span> <span class="fl">0.75</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-713"><a href="http://localhost:3527/#cb142-713" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb142-714"><a href="http://localhost:3527/#cb142-714" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="fu">desc</span>(med_score))</span>
<span id="cb142-715"><a href="http://localhost:3527/#cb142-715" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-716"><a href="http://localhost:3527/#cb142-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-717"><a href="http://localhost:3527/#cb142-717" aria-hidden="true" tabindex="-1"></a>There is a huge difference between the students performance which have a standard meal and the ones which have a free/reduced meal. Probably the students who are getting a free/reduced meal are from a porerer family which might have less time to spend with their kids or maybe the kids education is not the highest priority. As the family might have financial issues it could be also possible that the students need to work in order to have enough money for the family. Therefore it might be possible that their study time is needed for working and this might lead to worse results.</span>
<span id="cb142-718"><a href="http://localhost:3527/#cb142-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-719"><a href="http://localhost:3527/#cb142-719" aria-hidden="true" tabindex="-1"></a>Lets have a look on the test preparation variable and sort the results descending.</span>
<span id="cb142-720"><a href="http://localhost:3527/#cb142-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-721"><a href="http://localhost:3527/#cb142-721" aria-hidden="true" tabindex="-1"></a><span class="in">```{r avg_score_test_prep}</span></span>
<span id="cb142-722"><a href="http://localhost:3527/#cb142-722" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span></span>
<span id="cb142-723"><a href="http://localhost:3527/#cb142-723" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(test_prep) <span class="sc">%&gt;%</span></span>
<span id="cb142-724"><a href="http://localhost:3527/#cb142-724" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb142-725"><a href="http://localhost:3527/#cb142-725" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-726"><a href="http://localhost:3527/#cb142-726" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_score =</span> <span class="fu">median</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-727"><a href="http://localhost:3527/#cb142-727" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_score =</span> <span class="fu">IQR</span>(avg_score,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-728"><a href="http://localhost:3527/#cb142-728" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1 =</span><span class="fu">quantile</span>(avg_score, <span class="at">probs =</span><span class="fl">0.25</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-729"><a href="http://localhost:3527/#cb142-729" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">quantile</span>(avg_score, <span class="at">probs =</span> <span class="fl">0.75</span>,<span class="at">na.rm =</span><span class="cn">TRUE</span>),</span>
<span id="cb142-730"><a href="http://localhost:3527/#cb142-730" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb142-731"><a href="http://localhost:3527/#cb142-731" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="fu">desc</span>(med_score))</span>
<span id="cb142-732"><a href="http://localhost:3527/#cb142-732" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-733"><a href="http://localhost:3527/#cb142-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-734"><a href="http://localhost:3527/#cb142-734" aria-hidden="true" tabindex="-1"></a>Students who made a test preparation course have much better results than students who didn't. But the difference is much smaller than in the lunch variable.</span>
<span id="cb142-735"><a href="http://localhost:3527/#cb142-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-736"><a href="http://localhost:3527/#cb142-736" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualizations</span></span>
<span id="cb142-737"><a href="http://localhost:3527/#cb142-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-738"><a href="http://localhost:3527/#cb142-738" aria-hidden="true" tabindex="-1"></a>In this chapter plots are created in order to learn from the data and find correlations between the variables.</span>
<span id="cb142-739"><a href="http://localhost:3527/#cb142-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-740"><a href="http://localhost:3527/#cb142-740" aria-hidden="true" tabindex="-1"></a>In order to select the correct visualizations the visualizations are based on <span class="co">[</span><span class="ot">From Data to Viz</span><span class="co">](https://www.data-to-viz.com)</span></span>
<span id="cb142-741"><a href="http://localhost:3527/#cb142-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-742"><a href="http://localhost:3527/#cb142-742" aria-hidden="true" tabindex="-1"></a>First of all lets start with the plot of the target variable. How is it distributed in the value range?</span>
<span id="cb142-743"><a href="http://localhost:3527/#cb142-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-744"><a href="http://localhost:3527/#cb142-744" aria-hidden="true" tabindex="-1"></a><span class="in">```{r dense_plot_avg_score}</span></span>
<span id="cb142-745"><a href="http://localhost:3527/#cb142-745" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (ggplot2)</span>
<span id="cb142-746"><a href="http://localhost:3527/#cb142-746" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df_explo, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> avg_score)) <span class="sc">+</span></span>
<span id="cb142-747"><a href="http://localhost:3527/#cb142-747" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill=</span><span class="st">"lightblue"</span>) <span class="sc">+</span></span>
<span id="cb142-748"><a href="http://localhost:3527/#cb142-748" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students performance in exams"</span>, </span>
<span id="cb142-749"><a href="http://localhost:3527/#cb142-749" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Average performance of math, writing and reading exam"</span>,</span>
<span id="cb142-750"><a href="http://localhost:3527/#cb142-750" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average score"</span>,</span>
<span id="cb142-751"><a href="http://localhost:3527/#cb142-751" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Density"</span>) <span class="sc">+</span></span>
<span id="cb142-752"><a href="http://localhost:3527/#cb142-752" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb142-753"><a href="http://localhost:3527/#cb142-753" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb142-754"><a href="http://localhost:3527/#cb142-754" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span>
<span id="cb142-755"><a href="http://localhost:3527/#cb142-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-756"><a href="http://localhost:3527/#cb142-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-757"><a href="http://localhost:3527/#cb142-757" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-758"><a href="http://localhost:3527/#cb142-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-759"><a href="http://localhost:3527/#cb142-759" aria-hidden="true" tabindex="-1"></a>The results are quite similar compared to what was learned in the R queries. Highest density of the average_score is at the median score. There are only a small amount of scores which are below 40.</span>
<span id="cb142-760"><a href="http://localhost:3527/#cb142-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-761"><a href="http://localhost:3527/#cb142-761" aria-hidden="true" tabindex="-1"></a>Now lets have a look on our features. For this use case we only got categorical features in our data set. Therefore lets have a look on their levels and the uniqueness.</span>
<span id="cb142-762"><a href="http://localhost:3527/#cb142-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-763"><a href="http://localhost:3527/#cb142-763" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cat_features_bar_plot}</span></span>
<span id="cb142-764"><a href="http://localhost:3527/#cb142-764" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> features){</span>
<span id="cb142-765"><a href="http://localhost:3527/#cb142-765" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb142-766"><a href="http://localhost:3527/#cb142-766" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_explo, <span class="fu">aes_string</span>(<span class="at">x=</span>i)) <span class="sc">+</span></span>
<span id="cb142-767"><a href="http://localhost:3527/#cb142-767" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill=</span><span class="st">"lightblue"</span>)<span class="sc">+</span></span>
<span id="cb142-768"><a href="http://localhost:3527/#cb142-768" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distibution of levels in the varaibles"</span>, </span>
<span id="cb142-769"><a href="http://localhost:3527/#cb142-769" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb142-770"><a href="http://localhost:3527/#cb142-770" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb142-771"><a href="http://localhost:3527/#cb142-771" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb142-772"><a href="http://localhost:3527/#cb142-772" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span>
<span id="cb142-773"><a href="http://localhost:3527/#cb142-773" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb142-774"><a href="http://localhost:3527/#cb142-774" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(p)</span>
<span id="cb142-775"><a href="http://localhost:3527/#cb142-775" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb142-776"><a href="http://localhost:3527/#cb142-776" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-777"><a href="http://localhost:3527/#cb142-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-778"><a href="http://localhost:3527/#cb142-778" aria-hidden="true" tabindex="-1"></a>It can be seen that there the variable **gender** is equally distributed on male and female.</span>
<span id="cb142-779"><a href="http://localhost:3527/#cb142-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-780"><a href="http://localhost:3527/#cb142-780" aria-hidden="true" tabindex="-1"></a>The **ethnic group** has the most occurrences within group C, while group A and group E have a smaller occurency. Especially group A has only about 50 occurrences.</span>
<span id="cb142-781"><a href="http://localhost:3527/#cb142-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-782"><a href="http://localhost:3527/#cb142-782" aria-hidden="true" tabindex="-1"></a>Regarding the **parents education**- this feature has six levels which are not equally distributed. Four levels has a almost similar occurrence, while the level Bachelors and Masters degree have the lowest occurrences.</span>
<span id="cb142-783"><a href="http://localhost:3527/#cb142-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-784"><a href="http://localhost:3527/#cb142-784" aria-hidden="true" tabindex="-1"></a>The **lunch** type has two levels which are not equally distributed, about 66% occurrences are the standard lunch types, while 33% are the free/reduced type of lunch. This is actually quite a high number of reduced/free lunch meals.</span>
<span id="cb142-785"><a href="http://localhost:3527/#cb142-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-786"><a href="http://localhost:3527/#cb142-786" aria-hidden="true" tabindex="-1"></a>The amount of students who performed a **test preparation** course is about 35% while 65% of students did not make any test preparation.</span>
<span id="cb142-787"><a href="http://localhost:3527/#cb142-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-788"><a href="http://localhost:3527/#cb142-788" aria-hidden="true" tabindex="-1"></a>Lets have a look on the impact of these features and their levels on the target variable **average score**</span>
<span id="cb142-789"><a href="http://localhost:3527/#cb142-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-790"><a href="http://localhost:3527/#cb142-790" aria-hidden="true" tabindex="-1"></a>For this project the visualizations of categorical and the target variable will be made with box plots, density plots, violin plots and histograms in order to show the different possibilities in R. Therefore the variables will be displayed in different graphical visualizations. In general box plots would be a very good way to visualize these results, but for demonstration purposes different visualizations are made.</span>
<span id="cb142-791"><a href="http://localhost:3527/#cb142-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-792"><a href="http://localhost:3527/#cb142-792" aria-hidden="true" tabindex="-1"></a>**Impact Gender on Avg_score**</span>
<span id="cb142-793"><a href="http://localhost:3527/#cb142-793" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-794"><a href="http://localhost:3527/#cb142-794" aria-hidden="true" tabindex="-1"></a><span class="in">```{r avg_score_gender_histogram}</span></span>
<span id="cb142-795"><a href="http://localhost:3527/#cb142-795" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-796"><a href="http://localhost:3527/#cb142-796" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df_explo, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> avg_score, <span class="at">fill=</span>gender)) <span class="sc">+</span></span>
<span id="cb142-797"><a href="http://localhost:3527/#cb142-797" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb142-798"><a href="http://localhost:3527/#cb142-798" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb142-799"><a href="http://localhost:3527/#cb142-799" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"By gender"</span>,</span>
<span id="cb142-800"><a href="http://localhost:3527/#cb142-800" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average score in exams"</span>,</span>
<span id="cb142-801"><a href="http://localhost:3527/#cb142-801" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb142-802"><a href="http://localhost:3527/#cb142-802" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb142-803"><a href="http://localhost:3527/#cb142-803" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb142-804"><a href="http://localhost:3527/#cb142-804" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span>
<span id="cb142-805"><a href="http://localhost:3527/#cb142-805" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-806"><a href="http://localhost:3527/#cb142-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-807"><a href="http://localhost:3527/#cb142-807" aria-hidden="true" tabindex="-1"></a>Actually in this plot it is not that easy to see the differences between those two genders. So therefore lets try it with a facet wrap.</span>
<span id="cb142-808"><a href="http://localhost:3527/#cb142-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-809"><a href="http://localhost:3527/#cb142-809" aria-hidden="true" tabindex="-1"></a><span class="in">```{r avg_score_gender_histogram2}</span></span>
<span id="cb142-810"><a href="http://localhost:3527/#cb142-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-811"><a href="http://localhost:3527/#cb142-811" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df_explo, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> avg_score, <span class="at">fill=</span>gender)) <span class="sc">+</span></span>
<span id="cb142-812"><a href="http://localhost:3527/#cb142-812" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb142-813"><a href="http://localhost:3527/#cb142-813" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>gender, <span class="at">ncol=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb142-814"><a href="http://localhost:3527/#cb142-814" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb142-815"><a href="http://localhost:3527/#cb142-815" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"By gender"</span>,</span>
<span id="cb142-816"><a href="http://localhost:3527/#cb142-816" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average score in exams"</span>,</span>
<span id="cb142-817"><a href="http://localhost:3527/#cb142-817" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb142-818"><a href="http://localhost:3527/#cb142-818" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb142-819"><a href="http://localhost:3527/#cb142-819" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb142-820"><a href="http://localhost:3527/#cb142-820" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span>
<span id="cb142-821"><a href="http://localhost:3527/#cb142-821" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-822"><a href="http://localhost:3527/#cb142-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-823"><a href="http://localhost:3527/#cb142-823" aria-hidden="true" tabindex="-1"></a>Now it can be seen that female are performing better than the males. There are a lot of test results above 80, while the males have a peak at above 75. But it is interesting that the are much more males who achieve 100 points in the exam compared to the women.</span>
<span id="cb142-824"><a href="http://localhost:3527/#cb142-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-825"><a href="http://localhost:3527/#cb142-825" aria-hidden="true" tabindex="-1"></a>**Impact ethnic_group on Avg_score**</span>
<span id="cb142-826"><a href="http://localhost:3527/#cb142-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-827"><a href="http://localhost:3527/#cb142-827" aria-hidden="true" tabindex="-1"></a>The different ethnic groups and their impact on the avg_score shall be displayed within a boxplot.</span>
<span id="cb142-828"><a href="http://localhost:3527/#cb142-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-829"><a href="http://localhost:3527/#cb142-829" aria-hidden="true" tabindex="-1"></a><span class="in">```{r avg_score_ethnic_group_box_plot}</span></span>
<span id="cb142-830"><a href="http://localhost:3527/#cb142-830" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb142-831"><a href="http://localhost:3527/#cb142-831" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_explo, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(</span>
<span id="cb142-832"><a href="http://localhost:3527/#cb142-832" aria-hidden="true" tabindex="-1"></a>  ethnic_group, avg_score, <span class="at">.fun =</span> median, <span class="at">.desc=</span><span class="cn">TRUE</span>), <span class="at">y=</span>avg_score)) <span class="sc">+</span></span>
<span id="cb142-833"><a href="http://localhost:3527/#cb142-833" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill=</span><span class="st">"lightblue"</span>) <span class="sc">+</span></span>
<span id="cb142-834"><a href="http://localhost:3527/#cb142-834" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb142-835"><a href="http://localhost:3527/#cb142-835" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"By ethnic group"</span>,</span>
<span id="cb142-836"><a href="http://localhost:3527/#cb142-836" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Ethnic group"</span>,</span>
<span id="cb142-837"><a href="http://localhost:3527/#cb142-837" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average score in exams"</span>) <span class="sc">+</span></span>
<span id="cb142-838"><a href="http://localhost:3527/#cb142-838" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb142-839"><a href="http://localhost:3527/#cb142-839" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb142-840"><a href="http://localhost:3527/#cb142-840" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span>
<span id="cb142-841"><a href="http://localhost:3527/#cb142-841" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-842"><a href="http://localhost:3527/#cb142-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-843"><a href="http://localhost:3527/#cb142-843" aria-hidden="true" tabindex="-1"></a>Actually the results from the R queries can be confirmed. Best results are in <span class="in">`group E`</span> and the groups <span class="in">`A`</span>, <span class="in">`B`</span> and <span class="in">`C`</span> have almost the same values. Even though there are some outliers in <span class="in">`group C`</span>. The mean for these three groups is almost the same, but it can be seen that <span class="in">`group B`</span> has different whiskers, here the IQR range is spread the most.</span>
<span id="cb142-844"><a href="http://localhost:3527/#cb142-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-845"><a href="http://localhost:3527/#cb142-845" aria-hidden="true" tabindex="-1"></a>**Impact parent_education on Avg_score**</span>
<span id="cb142-846"><a href="http://localhost:3527/#cb142-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-847"><a href="http://localhost:3527/#cb142-847" aria-hidden="true" tabindex="-1"></a>This variable in their influence on the average score shall be visualized in a violin plot.</span>
<span id="cb142-848"><a href="http://localhost:3527/#cb142-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-849"><a href="http://localhost:3527/#cb142-849" aria-hidden="true" tabindex="-1"></a><span class="in">```{r avg_score_parent_edu_violin_plot}</span></span>
<span id="cb142-850"><a href="http://localhost:3527/#cb142-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-851"><a href="http://localhost:3527/#cb142-851" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_explo, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(</span>
<span id="cb142-852"><a href="http://localhost:3527/#cb142-852" aria-hidden="true" tabindex="-1"></a>  parent_education, avg_score, <span class="at">.fun =</span> median, <span class="at">.desc=</span><span class="cn">TRUE</span>), <span class="at">y=</span>avg_score)) <span class="sc">+</span></span>
<span id="cb142-853"><a href="http://localhost:3527/#cb142-853" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">fill=</span><span class="st">"lightblue"</span>) <span class="sc">+</span></span>
<span id="cb142-854"><a href="http://localhost:3527/#cb142-854" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb142-855"><a href="http://localhost:3527/#cb142-855" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"By parents education"</span>,</span>
<span id="cb142-856"><a href="http://localhost:3527/#cb142-856" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Parent Education"</span>,</span>
<span id="cb142-857"><a href="http://localhost:3527/#cb142-857" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average score in exams"</span>) <span class="sc">+</span></span>
<span id="cb142-858"><a href="http://localhost:3527/#cb142-858" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb142-859"><a href="http://localhost:3527/#cb142-859" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb142-860"><a href="http://localhost:3527/#cb142-860" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>),</span>
<span id="cb142-861"><a href="http://localhost:3527/#cb142-861" aria-hidden="true" tabindex="-1"></a>         <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span>
<span id="cb142-862"><a href="http://localhost:3527/#cb142-862" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-863"><a href="http://localhost:3527/#cb142-863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-864"><a href="http://localhost:3527/#cb142-864" aria-hidden="true" tabindex="-1"></a>Quite similar results as in the R queries. It can be seen that the <span class="in">`associates degree`</span> as parent education leads to the best median score. But it can be seen that there are also a lot of students in this group which have results of less than 40. Only in two other groups the results are worse. In five out of six parent degrees the most students are concentrated nearby the median score. But the <span class="in">`high_school`</span> degree has a peak of at the average score of 63 and as well another, smaller peak at the peak of 80. Moreover on this group there are the students with the worst results. Furthermore the group of <span class="in">`some college`</span> and <span class="in">`bachelors degree`</span> have a very similar violin plot and there are only minor differences between those two groups.</span>
<span id="cb142-865"><a href="http://localhost:3527/#cb142-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-866"><a href="http://localhost:3527/#cb142-866" aria-hidden="true" tabindex="-1"></a>**Impact lunch on Avg_score**</span>
<span id="cb142-867"><a href="http://localhost:3527/#cb142-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-868"><a href="http://localhost:3527/#cb142-868" aria-hidden="true" tabindex="-1"></a>The impact of the lunch type shall be displayed within a density plot. Moreover, this plot shall be extended by the **Impact of test preparation course on Avg_score**.</span>
<span id="cb142-869"><a href="http://localhost:3527/#cb142-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-870"><a href="http://localhost:3527/#cb142-870" aria-hidden="true" tabindex="-1"></a><span class="in">```{r lunch_test_prep_on_avg_score_dense}</span></span>
<span id="cb142-871"><a href="http://localhost:3527/#cb142-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-872"><a href="http://localhost:3527/#cb142-872" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_explo, <span class="at">mapping =</span> <span class="fu">aes</span> (<span class="at">x=</span>avg_score, <span class="at">fill=</span>lunch)) <span class="sc">+</span></span>
<span id="cb142-873"><a href="http://localhost:3527/#cb142-873" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb142-874"><a href="http://localhost:3527/#cb142-874" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="st">"Lunch"</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#339999"</span>, <span class="st">"#FFFF66"</span>))<span class="sc">+</span></span>
<span id="cb142-875"><a href="http://localhost:3527/#cb142-875" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>test_prep, <span class="at">ncol=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb142-876"><a href="http://localhost:3527/#cb142-876" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb142-877"><a href="http://localhost:3527/#cb142-877" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"By type of lunch and if a test preperation course was made"</span>,</span>
<span id="cb142-878"><a href="http://localhost:3527/#cb142-878" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average score in exams"</span>,</span>
<span id="cb142-879"><a href="http://localhost:3527/#cb142-879" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"density"</span>) <span class="sc">+</span></span>
<span id="cb142-880"><a href="http://localhost:3527/#cb142-880" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb142-881"><a href="http://localhost:3527/#cb142-881" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb142-882"><a href="http://localhost:3527/#cb142-882" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span>
<span id="cb142-883"><a href="http://localhost:3527/#cb142-883" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-884"><a href="http://localhost:3527/#cb142-884" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-885"><a href="http://localhost:3527/#cb142-885" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-886"><a href="http://localhost:3527/#cb142-886" aria-hidden="true" tabindex="-1"></a>It can be clearly seen that the students who completed the test preparation course have a much better performance than those who did not. Also the students who have a standard meal are performing better than those who are having only a free or reduced meal. If both features are combined it can be clearly seen that students who made the test preparation course AND have a standard meal are performing much better than those students who did not make a test preparation course and who only get a free/reduced meal. These two features have a big impact on the target variable.</span>
<span id="cb142-887"><a href="http://localhost:3527/#cb142-887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-888"><a href="http://localhost:3527/#cb142-888" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualizations (incl. perform results)</span></span>
<span id="cb142-889"><a href="http://localhost:3527/#cb142-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-890"><a href="http://localhost:3527/#cb142-890" aria-hidden="true" tabindex="-1"></a>This chapter is used to show the possibilities of data visualizations if we could use numeric variables. Therefore plots correlations will be made with those variables - even though they must not be included into the later models.</span>
<span id="cb142-891"><a href="http://localhost:3527/#cb142-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-892"><a href="http://localhost:3527/#cb142-892" aria-hidden="true" tabindex="-1"></a>In order to select the correct visualizations the visualizations are based on <span class="co">[</span><span class="ot">From Data to Viz</span><span class="co">](https://www.data-to-viz.com)</span></span>
<span id="cb142-893"><a href="http://localhost:3527/#cb142-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-894"><a href="http://localhost:3527/#cb142-894" aria-hidden="true" tabindex="-1"></a>Lets start with the students performance in math compared to their performance in the average exam score.</span>
<span id="cb142-895"><a href="http://localhost:3527/#cb142-895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-896"><a href="http://localhost:3527/#cb142-896" aria-hidden="true" tabindex="-1"></a><span class="in">```{r math_avg_score_scatter}</span></span>
<span id="cb142-897"><a href="http://localhost:3527/#cb142-897" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_explo, <span class="fu">aes</span>(math_score, avg_score))<span class="sc">+</span></span>
<span id="cb142-898"><a href="http://localhost:3527/#cb142-898" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">"lightblue"</span>)<span class="sc">+</span></span>
<span id="cb142-899"><a href="http://localhost:3527/#cb142-899" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb142-900"><a href="http://localhost:3527/#cb142-900" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Average performance and math performance"</span>,</span>
<span id="cb142-901"><a href="http://localhost:3527/#cb142-901" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average score in maths"</span>,</span>
<span id="cb142-902"><a href="http://localhost:3527/#cb142-902" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average score in exams"</span>) <span class="sc">+</span></span>
<span id="cb142-903"><a href="http://localhost:3527/#cb142-903" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb142-904"><a href="http://localhost:3527/#cb142-904" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb142-905"><a href="http://localhost:3527/#cb142-905" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span>
<span id="cb142-906"><a href="http://localhost:3527/#cb142-906" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-907"><a href="http://localhost:3527/#cb142-907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-908"><a href="http://localhost:3527/#cb142-908" aria-hidden="true" tabindex="-1"></a>It can be clearly seen that there is a linear relationship between the math performance and the average performance (which makes sense as the average performance is based on the math performance, but this is made for demonstration purposes). The correlation between those variables is very strong.</span>
<span id="cb142-909"><a href="http://localhost:3527/#cb142-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-910"><a href="http://localhost:3527/#cb142-910" aria-hidden="true" tabindex="-1"></a>Lets add two further variables to this plot. Lets add the type of lunch and the test preparation as well. Moreover it shall be wrapped by the ethnic group.</span>
<span id="cb142-911"><a href="http://localhost:3527/#cb142-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-912"><a href="http://localhost:3527/#cb142-912" aria-hidden="true" tabindex="-1"></a><span class="in">```{r impact_avg_score_scatter}</span></span>
<span id="cb142-913"><a href="http://localhost:3527/#cb142-913" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_explo, <span class="fu">aes</span>(math_score, avg_score, <span class="at">color=</span>lunch, <span class="at">shape=</span>test_prep))<span class="sc">+</span></span>
<span id="cb142-914"><a href="http://localhost:3527/#cb142-914" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb142-915"><a href="http://localhost:3527/#cb142-915" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>ethnic_group)<span class="sc">+</span></span>
<span id="cb142-916"><a href="http://localhost:3527/#cb142-916" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Students average performance in exams"</span>, </span>
<span id="cb142-917"><a href="http://localhost:3527/#cb142-917" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"By lunch type, ethnic_group and if test preparation was made"</span>,</span>
<span id="cb142-918"><a href="http://localhost:3527/#cb142-918" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average score in maths"</span>,</span>
<span id="cb142-919"><a href="http://localhost:3527/#cb142-919" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average score in exams"</span>) <span class="sc">+</span></span>
<span id="cb142-920"><a href="http://localhost:3527/#cb142-920" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb142-921"><a href="http://localhost:3527/#cb142-921" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span> (<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb142-922"><a href="http://localhost:3527/#cb142-922" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>))</span>
<span id="cb142-923"><a href="http://localhost:3527/#cb142-923" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-924"><a href="http://localhost:3527/#cb142-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-925"><a href="http://localhost:3527/#cb142-925" aria-hidden="true" tabindex="-1"></a>It can be seen that the performance in group E and D is the best, as well as that students with standard lunch and test preparation course are performing better.</span>
<span id="cb142-926"><a href="http://localhost:3527/#cb142-926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-927"><a href="http://localhost:3527/#cb142-927" aria-hidden="true" tabindex="-1"></a>Now lets have a look on the correlations between our three exam scores and the average exam score.</span>
<span id="cb142-928"><a href="http://localhost:3527/#cb142-928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-929"><a href="http://localhost:3527/#cb142-929" aria-hidden="true" tabindex="-1"></a><span class="in">```{r correlations}</span></span>
<span id="cb142-930"><a href="http://localhost:3527/#cb142-930" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span> </span>
<span id="cb142-931"><a href="http://localhost:3527/#cb142-931" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> <span class="co"># only select numerical data</span></span>
<span id="cb142-932"><a href="http://localhost:3527/#cb142-932" aria-hidden="true" tabindex="-1"></a>  <span class="fu">vis_cor</span>(<span class="at">cor_method =</span> <span class="st">"spearman"</span>, <span class="at">na_action =</span> <span class="st">"pairwise.complete.obs"</span>)</span>
<span id="cb142-933"><a href="http://localhost:3527/#cb142-933" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-934"><a href="http://localhost:3527/#cb142-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-935"><a href="http://localhost:3527/#cb142-935" aria-hidden="true" tabindex="-1"></a>It can be seen that all variables have a huge correlation with each other. Students which are performing good in one exam are likely to perform good in all exams. But it can be also seen that the correlation between writing and reading is much higher than the correlation to math and the other exams.</span>
<span id="cb142-936"><a href="http://localhost:3527/#cb142-936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-937"><a href="http://localhost:3527/#cb142-937" aria-hidden="true" tabindex="-1"></a>Lets have a look on the numbers:</span>
<span id="cb142-938"><a href="http://localhost:3527/#cb142-938" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-939"><a href="http://localhost:3527/#cb142-939" aria-hidden="true" tabindex="-1"></a><span class="in">```{r correlation_numbers}</span></span>
<span id="cb142-940"><a href="http://localhost:3527/#cb142-940" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrr)</span>
<span id="cb142-941"><a href="http://localhost:3527/#cb142-941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-942"><a href="http://localhost:3527/#cb142-942" aria-hidden="true" tabindex="-1"></a>cor_res <span class="ot">&lt;-</span> </span>
<span id="cb142-943"><a href="http://localhost:3527/#cb142-943" aria-hidden="true" tabindex="-1"></a>  df_explo <span class="sc">%&gt;%</span></span>
<span id="cb142-944"><a href="http://localhost:3527/#cb142-944" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb142-945"><a href="http://localhost:3527/#cb142-945" aria-hidden="true" tabindex="-1"></a>  <span class="fu">correlate</span>(<span class="at">method =</span> <span class="st">"spearman"</span>, <span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>) </span>
<span id="cb142-946"><a href="http://localhost:3527/#cb142-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-947"><a href="http://localhost:3527/#cb142-947" aria-hidden="true" tabindex="-1"></a>cor_res <span class="sc">%&gt;%</span> </span>
<span id="cb142-948"><a href="http://localhost:3527/#cb142-948" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(term, avg_score) <span class="sc">%&gt;%</span> </span>
<span id="cb142-949"><a href="http://localhost:3527/#cb142-949" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(avg_score)) <span class="sc">%&gt;%</span> <span class="co">#  dependent variable </span></span>
<span id="cb142-950"><a href="http://localhost:3527/#cb142-950" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(avg_score) <span class="sc">%&gt;%</span> <span class="co"># sorting</span></span>
<span id="cb142-951"><a href="http://localhost:3527/#cb142-951" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fashion</span>() <span class="co"># print </span></span>
<span id="cb142-952"><a href="http://localhost:3527/#cb142-952" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-953"><a href="http://localhost:3527/#cb142-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-954"><a href="http://localhost:3527/#cb142-954" aria-hidden="true" tabindex="-1"></a>Math score has the lowest impact on the average score, while writing and reading scores have the highest. As learned in the correlation matrix before: Writing and Reading are correlating with each other. Therefore this result was expectable.</span>
<span id="cb142-955"><a href="http://localhost:3527/#cb142-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-956"><a href="http://localhost:3527/#cb142-956" aria-hidden="true" tabindex="-1"></a>Now lets analyze the numeric variables in more detail. Moreover the categorical variable "lunch" shall be added as well.</span>
<span id="cb142-957"><a href="http://localhost:3527/#cb142-957" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-958"><a href="http://localhost:3527/#cb142-958" aria-hidden="true" tabindex="-1"></a><span class="in">```{r visual_inspection}</span></span>
<span id="cb142-959"><a href="http://localhost:3527/#cb142-959" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb142-960"><a href="http://localhost:3527/#cb142-960" aria-hidden="true" tabindex="-1"></a>df_explo <span class="sc">%&gt;%</span> </span>
<span id="cb142-961"><a href="http://localhost:3527/#cb142-961" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(avg_score, lunch, </span>
<span id="cb142-962"><a href="http://localhost:3527/#cb142-962" aria-hidden="true" tabindex="-1"></a>         math_score, reading_score, writing_score) <span class="sc">%&gt;%</span> </span>
<span id="cb142-963"><a href="http://localhost:3527/#cb142-963" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggscatmat</span>(<span class="at">color=</span><span class="st">"lunch"</span>, <span class="at">corMethod =</span> <span class="st">"spearman"</span>,</span>
<span id="cb142-964"><a href="http://localhost:3527/#cb142-964" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha=</span><span class="fl">0.4</span>)</span>
<span id="cb142-965"><a href="http://localhost:3527/#cb142-965" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-966"><a href="http://localhost:3527/#cb142-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-967"><a href="http://localhost:3527/#cb142-967" aria-hidden="true" tabindex="-1"></a>As the numeric variables are already so good in predicting the avg_score, the impact of the lunch type is no longer seen. In the analysis before it was clearly seen that this variable has a big impact on the avg_score.</span>
<span id="cb142-968"><a href="http://localhost:3527/#cb142-968" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-969"><a href="http://localhost:3527/#cb142-969" aria-hidden="true" tabindex="-1"></a><span class="fu">## Anomaly detection</span></span>
<span id="cb142-970"><a href="http://localhost:3527/#cb142-970" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-971"><a href="http://localhost:3527/#cb142-971" aria-hidden="true" tabindex="-1"></a>Within this chapter the data is checked for outliers and missing data. This is done in the original dataframe. This is done so that it can be learned which steps need to be made in the pipeline definitions. No changes are made with the data, it is only checked how to deal with detected issues.</span>
<span id="cb142-972"><a href="http://localhost:3527/#cb142-972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-973"><a href="http://localhost:3527/#cb142-973" aria-hidden="true" tabindex="-1"></a><span class="fu">### Missing values</span></span>
<span id="cb142-974"><a href="http://localhost:3527/#cb142-974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-975"><a href="http://localhost:3527/#cb142-975" aria-hidden="true" tabindex="-1"></a>This was already performed in the Data Ingestion chapter, nevertheless it is performed again in this chapter.</span>
<span id="cb142-976"><a href="http://localhost:3527/#cb142-976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-977"><a href="http://localhost:3527/#cb142-977" aria-hidden="true" tabindex="-1"></a><span class="in">```{r missing_values_data}</span></span>
<span id="cb142-978"><a href="http://localhost:3527/#cb142-978" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(exams) <span class="sc">%&gt;%</span></span>
<span id="cb142-979"><a href="http://localhost:3527/#cb142-979" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colSums</span>()</span>
<span id="cb142-980"><a href="http://localhost:3527/#cb142-980" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-981"><a href="http://localhost:3527/#cb142-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-982"><a href="http://localhost:3527/#cb142-982" aria-hidden="true" tabindex="-1"></a>There are no missing data/rows in the available data.</span>
<span id="cb142-983"><a href="http://localhost:3527/#cb142-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-984"><a href="http://localhost:3527/#cb142-984" aria-hidden="true" tabindex="-1"></a><span class="fu">### Outlier and novelty detection</span></span>
<span id="cb142-985"><a href="http://localhost:3527/#cb142-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-986"><a href="http://localhost:3527/#cb142-986" aria-hidden="true" tabindex="-1"></a>Lets check our data for outliers - as it was already made during the Data analysis. For the categorical data there are no outliers included, as they are only spread through a limited set of levels. Moreover there is no level included which is underrepresented. Therefore the check for outliers is only made in the target variable.</span>
<span id="cb142-987"><a href="http://localhost:3527/#cb142-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-988"><a href="http://localhost:3527/#cb142-988" aria-hidden="true" tabindex="-1"></a>Lets create a plot of the target variable in box plots with all categorical data.</span>
<span id="cb142-989"><a href="http://localhost:3527/#cb142-989" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-990"><a href="http://localhost:3527/#cb142-990" aria-hidden="true" tabindex="-1"></a><span class="in">```{r outlier_detection}</span></span>
<span id="cb142-991"><a href="http://localhost:3527/#cb142-991" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> features){</span>
<span id="cb142-992"><a href="http://localhost:3527/#cb142-992" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb142-993"><a href="http://localhost:3527/#cb142-993" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_explo, <span class="fu">aes_string</span>(<span class="at">x=</span>i, <span class="at">y=</span>y_label)) <span class="sc">+</span></span>
<span id="cb142-994"><a href="http://localhost:3527/#cb142-994" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_boxplot</span>(<span class="at">fill=</span><span class="st">"steelblue"</span>)</span>
<span id="cb142-995"><a href="http://localhost:3527/#cb142-995" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb142-996"><a href="http://localhost:3527/#cb142-996" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>(p)</span>
<span id="cb142-997"><a href="http://localhost:3527/#cb142-997" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb142-998"><a href="http://localhost:3527/#cb142-998" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-999"><a href="http://localhost:3527/#cb142-999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1000"><a href="http://localhost:3527/#cb142-1000" aria-hidden="true" tabindex="-1"></a>It can be seen that there are certain outliers included in the available data. These outliers are certain students who performed very bad in the exams. The training data contains outliers, these are defined as observations which are far from the others. Outlier detection estimators thus try to fit the regions where the training data is the most concentrated, ignoring the deviant observations.</span>
<span id="cb142-1001"><a href="http://localhost:3527/#cb142-1001" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1002"><a href="http://localhost:3527/#cb142-1002" aria-hidden="true" tabindex="-1"></a>These outliers make it hard for the later model to predict the result correctly. The learning from this chapter shall be included in the later model creation.</span>
<span id="cb142-1003"><a href="http://localhost:3527/#cb142-1003" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1004"><a href="http://localhost:3527/#cb142-1004" aria-hidden="true" tabindex="-1"></a><span class="fu">## Feature engineering</span></span>
<span id="cb142-1005"><a href="http://localhost:3527/#cb142-1005" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1006"><a href="http://localhost:3527/#cb142-1006" aria-hidden="true" tabindex="-1"></a>All topics which were learned/discovered within the earlier steps shall be used now for the data preprocessing and feature engineering. This will be made with data pipelines. Those are generated with the tidymodels package *recipes* and *workflows*. The feature selection part wont be included here, as the features are selected within the modeling part. So the recipe will include all available features for a base model. In the model chapter the Feature Selection will be made with the available packages and tools in R.</span>
<span id="cb142-1007"><a href="http://localhost:3527/#cb142-1007" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1008"><a href="http://localhost:3527/#cb142-1008" aria-hidden="true" tabindex="-1"></a><span class="fu">### Feature transformation</span></span>
<span id="cb142-1009"><a href="http://localhost:3527/#cb142-1009" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1010"><a href="http://localhost:3527/#cb142-1010" aria-hidden="true" tabindex="-1"></a>Target of feature transformations - for this project and maybe new data in the future is to get red of:</span>
<span id="cb142-1011"><a href="http://localhost:3527/#cb142-1011" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1012"><a href="http://localhost:3527/#cb142-1012" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>missing values</span>
<span id="cb142-1013"><a href="http://localhost:3527/#cb142-1013" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>outliers</span>
<span id="cb142-1014"><a href="http://localhost:3527/#cb142-1014" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>categorical variables --<span class="sc">\&gt;</span> one hot encoding</span>
<span id="cb142-1015"><a href="http://localhost:3527/#cb142-1015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1016"><a href="http://localhost:3527/#cb142-1016" aria-hidden="true" tabindex="-1"></a>Other datasets would need further steps which do not apply in this project due to the data structure. Those other steps could be:</span>
<span id="cb142-1017"><a href="http://localhost:3527/#cb142-1017" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1018"><a href="http://localhost:3527/#cb142-1018" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>get data on the same scale</span>
<span id="cb142-1019"><a href="http://localhost:3527/#cb142-1019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1020"><a href="http://localhost:3527/#cb142-1020" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>standardize the data</span>
<span id="cb142-1021"><a href="http://localhost:3527/#cb142-1021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1022"><a href="http://localhost:3527/#cb142-1022" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>handle skewed distribution of data</span>
<span id="cb142-1023"><a href="http://localhost:3527/#cb142-1023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1024"><a href="http://localhost:3527/#cb142-1024" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>take care if the data might be censored at certain limits (e.g. at the low and or high of the data)</span>
<span id="cb142-1025"><a href="http://localhost:3527/#cb142-1025" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1026"><a href="http://localhost:3527/#cb142-1026" aria-hidden="true" tabindex="-1"></a>**Missing values:** As we do not have any missing data in the data set, this step could be skipped. But in case that there might be newer data in the future which could have missing data, this should be added to the pipeline. There are three ways to handle missing data: Delete the observation with missing data, remove the whole attribute or impute it with some other values, e.g. the mean, median, etc. For this project missing data shall be dropped within the pipeline.</span>
<span id="cb142-1027"><a href="http://localhost:3527/#cb142-1027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1028"><a href="http://localhost:3527/#cb142-1028" aria-hidden="true" tabindex="-1"></a>**Outliers:** Some outliers are included in the data set. For handling those the target is to test the experimental 3-rd party package from <span class="co">[</span><span class="ot">*tidy_outlier*</span><span class="co">](https://github.com/brunocarlin/tidy.outliers)</span></span>
<span id="cb142-1029"><a href="http://localhost:3527/#cb142-1029" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1030"><a href="http://localhost:3527/#cb142-1030" aria-hidden="true" tabindex="-1"></a>**One-Hot_encoding:** Our available categorical data needs to be converted to numbers as algorithms prefer to work with numbers. For this the tidy models <span class="co">[</span><span class="ot">step_dummy</span><span class="co">](https://recipes.tidymodels.org/articles/Dummies.html)</span> function will be used.</span>
<span id="cb142-1031"><a href="http://localhost:3527/#cb142-1031" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1032"><a href="http://localhost:3527/#cb142-1032" aria-hidden="true" tabindex="-1"></a><span class="fu">### Feature extraction</span></span>
<span id="cb142-1033"><a href="http://localhost:3527/#cb142-1033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1034"><a href="http://localhost:3527/#cb142-1034" aria-hidden="true" tabindex="-1"></a>Some features might include relevant information which could be redundant. That would be there wont be any benefit in adding both features in the model, if the target variable can be determined with one of those.</span>
<span id="cb142-1035"><a href="http://localhost:3527/#cb142-1035" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1036"><a href="http://localhost:3527/#cb142-1036" aria-hidden="true" tabindex="-1"></a>Therefore it makes sense to remove features which have large correlations with each other. But this is more likely at numeric features. In the feature extraction this can be made by using the ratio of two predictors or with more complex methods like principal component analysis.</span>
<span id="cb142-1037"><a href="http://localhost:3527/#cb142-1037" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1038"><a href="http://localhost:3527/#cb142-1038" aria-hidden="true" tabindex="-1"></a>This also makes sense to use in case that the number of features is high.</span>
<span id="cb142-1039"><a href="http://localhost:3527/#cb142-1039" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1040"><a href="http://localhost:3527/#cb142-1040" aria-hidden="true" tabindex="-1"></a>For this usecase this is only partly applicable, as there are only categorical features available.</span>
<span id="cb142-1041"><a href="http://localhost:3527/#cb142-1041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1042"><a href="http://localhost:3527/#cb142-1042" aria-hidden="true" tabindex="-1"></a><span class="fu">### Final data pipeline</span></span>
<span id="cb142-1043"><a href="http://localhost:3527/#cb142-1043" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1044"><a href="http://localhost:3527/#cb142-1044" aria-hidden="true" tabindex="-1"></a>In the following pipeline all steps for the feature engineering are included:</span>
<span id="cb142-1045"><a href="http://localhost:3527/#cb142-1045" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1046"><a href="http://localhost:3527/#cb142-1046" aria-hidden="true" tabindex="-1"></a><span class="in">```{r get_tidy_outliers}</span></span>
<span id="cb142-1047"><a href="http://localhost:3527/#cb142-1047" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("brunocarlin/tidy.outliers") </span></span>
<span id="cb142-1048"><a href="http://localhost:3527/#cb142-1048" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidy.outliers)</span>
<span id="cb142-1049"><a href="http://localhost:3527/#cb142-1049" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1050"><a href="http://localhost:3527/#cb142-1050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1051"><a href="http://localhost:3527/#cb142-1051" aria-hidden="true" tabindex="-1"></a><span class="in">```{r pipeline}</span></span>
<span id="cb142-1052"><a href="http://localhost:3527/#cb142-1052" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1053"><a href="http://localhost:3527/#cb142-1053" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(recipes)</span>
<span id="cb142-1054"><a href="http://localhost:3527/#cb142-1054" aria-hidden="true" tabindex="-1"></a>exam_rec <span class="ot">&lt;-</span></span>
<span id="cb142-1055"><a href="http://localhost:3527/#cb142-1055" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(avg_score <span class="sc">~</span> <span class="sc">+</span>gender  <span class="sc">+</span> ethnic_group <span class="sc">+</span> parent_education <span class="sc">+</span> lunch <span class="sc">+</span> test_prep, <span class="at">data =</span> train_data) <span class="sc">%&gt;%</span> <span class="co">#definition of features and target variable</span></span>
<span id="cb142-1056"><a href="http://localhost:3527/#cb142-1056" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_naomit</span>(<span class="fu">everything</span>(), <span class="at">skip =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="co">#remove missing observations</span></span>
<span id="cb142-1057"><a href="http://localhost:3527/#cb142-1057" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal</span>()) <span class="sc">%&gt;%</span> <span class="co">#converts factors into numeric binary (0 and 1) variables</span></span>
<span id="cb142-1058"><a href="http://localhost:3527/#cb142-1058" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_outliers_maha</span>(<span class="fu">all_numeric</span>(), <span class="sc">-</span><span class="fu">all_outcomes</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb142-1059"><a href="http://localhost:3527/#cb142-1059" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_outliers_lookout</span>(<span class="fu">all_numeric</span>(),<span class="sc">-</span><span class="fu">contains</span>(r<span class="st">"(.outliers)"</span>),<span class="sc">-</span><span class="fu">all_outcomes</span>()) <span class="sc">%&gt;%</span> <span class="co">#identify outliers</span></span>
<span id="cb142-1060"><a href="http://localhost:3527/#cb142-1060" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_outliers_remove</span>(<span class="fu">contains</span>(r<span class="st">"(.outliers)"</span>)) <span class="sc">%&gt;%</span> <span class="co">#remove outliers</span></span>
<span id="cb142-1061"><a href="http://localhost:3527/#cb142-1061" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_corr</span>(<span class="fu">all_predictors</span>(), <span class="at">threshold =</span> <span class="fl">0.7</span>, <span class="at">method =</span> <span class="st">"spearman"</span>) <span class="co"># remove correlated features (maybe not necessary as only character features as input)</span></span>
<span id="cb142-1062"><a href="http://localhost:3527/#cb142-1062" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1063"><a href="http://localhost:3527/#cb142-1063" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1064"><a href="http://localhost:3527/#cb142-1064" aria-hidden="true" tabindex="-1"></a>Lets have a look on the current set of variables and roles:</span>
<span id="cb142-1065"><a href="http://localhost:3527/#cb142-1065" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1066"><a href="http://localhost:3527/#cb142-1066" aria-hidden="true" tabindex="-1"></a><span class="in">```{r summary_recipe}</span></span>
<span id="cb142-1067"><a href="http://localhost:3527/#cb142-1067" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1068"><a href="http://localhost:3527/#cb142-1068" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(exam_rec)</span>
<span id="cb142-1069"><a href="http://localhost:3527/#cb142-1069" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1070"><a href="http://localhost:3527/#cb142-1070" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1071"><a href="http://localhost:3527/#cb142-1071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1072"><a href="http://localhost:3527/#cb142-1072" aria-hidden="true" tabindex="-1"></a>Lets check if all preprocessing steps worked as intended:</span>
<span id="cb142-1073"><a href="http://localhost:3527/#cb142-1073" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1074"><a href="http://localhost:3527/#cb142-1074" aria-hidden="true" tabindex="-1"></a><span class="in">```{r juice}</span></span>
<span id="cb142-1075"><a href="http://localhost:3527/#cb142-1075" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1076"><a href="http://localhost:3527/#cb142-1076" aria-hidden="true" tabindex="-1"></a>prepped_data <span class="ot">&lt;-</span> </span>
<span id="cb142-1077"><a href="http://localhost:3527/#cb142-1077" aria-hidden="true" tabindex="-1"></a>  exam_rec <span class="sc">%&gt;%</span> <span class="co"># use the recipe object</span></span>
<span id="cb142-1078"><a href="http://localhost:3527/#cb142-1078" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prep</span>() <span class="sc">%&gt;%</span> <span class="co"># perform the recipe on training data</span></span>
<span id="cb142-1079"><a href="http://localhost:3527/#cb142-1079" aria-hidden="true" tabindex="-1"></a>  <span class="fu">juice</span>() <span class="co"># extract only the preprocessed dataframe </span></span>
<span id="cb142-1080"><a href="http://localhost:3527/#cb142-1080" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1081"><a href="http://localhost:3527/#cb142-1081" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(prepped_data)</span>
<span id="cb142-1082"><a href="http://localhost:3527/#cb142-1082" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1083"><a href="http://localhost:3527/#cb142-1083" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1084"><a href="http://localhost:3527/#cb142-1084" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1085"><a href="http://localhost:3527/#cb142-1085" aria-hidden="true" tabindex="-1"></a>The recipe was successful! The character columns were successfully changed to dummy variables, so that the models can work with them. Moreover three observations were removed as they were identified as outliers.</span>
<span id="cb142-1086"><a href="http://localhost:3527/#cb142-1086" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1087"><a href="http://localhost:3527/#cb142-1087" aria-hidden="true" tabindex="-1"></a>Moreover a validation set shall be created. This shall be used to validate the later models. After the best model is used (based on the validation set) the model can be tested with the test data. The amount of breaks is the value which was learned in the Data Visualization chapter.</span>
<span id="cb142-1088"><a href="http://localhost:3527/#cb142-1088" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1089"><a href="http://localhost:3527/#cb142-1089" aria-hidden="true" tabindex="-1"></a><span class="in">```{r validation_set}</span></span>
<span id="cb142-1090"><a href="http://localhost:3527/#cb142-1090" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12</span>)</span>
<span id="cb142-1091"><a href="http://localhost:3527/#cb142-1091" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1092"><a href="http://localhost:3527/#cb142-1092" aria-hidden="true" tabindex="-1"></a>cv_folds <span class="ot">&lt;-</span> </span>
<span id="cb142-1093"><a href="http://localhost:3527/#cb142-1093" aria-hidden="true" tabindex="-1"></a>  <span class="fu">vfold_cv</span>(train_data,</span>
<span id="cb142-1094"><a href="http://localhost:3527/#cb142-1094" aria-hidden="true" tabindex="-1"></a>           <span class="at">v=</span><span class="dv">5</span>,</span>
<span id="cb142-1095"><a href="http://localhost:3527/#cb142-1095" aria-hidden="true" tabindex="-1"></a>           <span class="at">strata =</span> y_label,</span>
<span id="cb142-1096"><a href="http://localhost:3527/#cb142-1096" aria-hidden="true" tabindex="-1"></a>           <span class="at">breaks =</span> <span class="dv">6</span>)</span>
<span id="cb142-1097"><a href="http://localhost:3527/#cb142-1097" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1098"><a href="http://localhost:3527/#cb142-1098" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1099"><a href="http://localhost:3527/#cb142-1099" aria-hidden="true" tabindex="-1"></a><span class="fu"># Model</span></span>
<span id="cb142-1100"><a href="http://localhost:3527/#cb142-1100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1101"><a href="http://localhost:3527/#cb142-1101" aria-hidden="true" tabindex="-1"></a>After the data and features have been preprocessed in a format which is ready for the modeling algorithms, they can be used in the model selection process.</span>
<span id="cb142-1102"><a href="http://localhost:3527/#cb142-1102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1103"><a href="http://localhost:3527/#cb142-1103" aria-hidden="true" tabindex="-1"></a>Target for the Model and Deployment phase is to perform all steps in the usual way with tidymodels and afterwards one time by using MLFfow.</span>
<span id="cb142-1104"><a href="http://localhost:3527/#cb142-1104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1105"><a href="http://localhost:3527/#cb142-1105" aria-hidden="true" tabindex="-1"></a><span class="fu">## Select algorithm</span></span>
<span id="cb142-1106"><a href="http://localhost:3527/#cb142-1106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1107"><a href="http://localhost:3527/#cb142-1107" aria-hidden="true" tabindex="-1"></a>The target is to predict the *avg_score* of students in exams. This outcome variable is numeric. Therefore a **Regression** model needs to be selected for this usecase. As labeled data is available a supervised learning is performed. The following page is used to select three different model types and their engines: <span class="co">[</span><span class="ot">Tidymodels: Search parsnip models</span><span class="co">](https://www.tidymodels.org/find/parsnip/)</span></span>
<span id="cb142-1108"><a href="http://localhost:3527/#cb142-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1109"><a href="http://localhost:3527/#cb142-1109" aria-hidden="true" tabindex="-1"></a>Three different kind of models shall be selected in order to see how the performance of them differentiates and which is handling the available data the best.</span>
<span id="cb142-1110"><a href="http://localhost:3527/#cb142-1110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1111"><a href="http://localhost:3527/#cb142-1111" aria-hidden="true" tabindex="-1"></a>The following three models were selected:</span>
<span id="cb142-1112"><a href="http://localhost:3527/#cb142-1112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1113"><a href="http://localhost:3527/#cb142-1113" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Boosted Tree (XGBoost)</span>
<span id="cb142-1114"><a href="http://localhost:3527/#cb142-1114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1115"><a href="http://localhost:3527/#cb142-1115" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Decision trees would be good for modelling non linear relationships, as we only have categorical variables this might be useful.</span>
<span id="cb142-1116"><a href="http://localhost:3527/#cb142-1116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1117"><a href="http://localhost:3527/#cb142-1117" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Risk of overfitting on the training data --<span class="sc">\&gt;</span> Implement cross-validation in order to prevent this.</span>
<span id="cb142-1118"><a href="http://localhost:3527/#cb142-1118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1119"><a href="http://localhost:3527/#cb142-1119" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Boosted tree is an ensembeld learner which starts with simple base models and tries to "boost" their aggregate complexity --<span class="sc">\&gt;</span> In practice often with a high performance for the results.</span>
<span id="cb142-1120"><a href="http://localhost:3527/#cb142-1120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1121"><a href="http://localhost:3527/#cb142-1121" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Linear Regression (~~Keras~~ - changed to glmnet as I had issues to get keras and tensorflow running. For this a python installation and connection is needed)</span>
<span id="cb142-1122"><a href="http://localhost:3527/#cb142-1122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1123"><a href="http://localhost:3527/#cb142-1123" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Faster to train and are simpler. Linear algorithms might get issues if the data has many intersecting correlations, but this is not the case in this dataset.</span>
<span id="cb142-1124"><a href="http://localhost:3527/#cb142-1124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1125"><a href="http://localhost:3527/#cb142-1125" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Fits normally a "straight line" on the data --<span class="sc">\&gt;</span> perfectly for our target variable.</span>
<span id="cb142-1126"><a href="http://localhost:3527/#cb142-1126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1127"><a href="http://localhost:3527/#cb142-1127" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Disadvantage: Prone to overfit with many input features and are not that good in expressing non-linear relationships --<span class="sc">\&gt;</span> Both does not apply for this dataset, but only categorical input data is available.</span>
<span id="cb142-1128"><a href="http://localhost:3527/#cb142-1128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1129"><a href="http://localhost:3527/#cb142-1129" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Single layer neural network (~~Keras~~ - changed to nnet, see above)</span>
<span id="cb142-1130"><a href="http://localhost:3527/#cb142-1130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1131"><a href="http://localhost:3527/#cb142-1131" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Can recognize patterns by itself.</span>
<span id="cb142-1132"><a href="http://localhost:3527/#cb142-1132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1133"><a href="http://localhost:3527/#cb142-1133" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Good for complex datasets --<span class="sc">\&gt;</span> our dataset is quite simple</span>
<span id="cb142-1134"><a href="http://localhost:3527/#cb142-1134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1135"><a href="http://localhost:3527/#cb142-1135" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Sadly it is not really possible to find out why the model has decided for the output. Also hyperparameter tuning is not that easy.</span>
<span id="cb142-1136"><a href="http://localhost:3527/#cb142-1136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1137"><a href="http://localhost:3527/#cb142-1137" aria-hidden="true" tabindex="-1"></a>Sources: <span class="co">[</span><span class="ot">Elite Datascience: Model Selection</span><span class="co">](https://elitedatascience.com/algorithm-selection)</span>, <span class="co">[</span><span class="ot">Towards Datascience: Algorithm selection</span><span class="co">](https://towardsdatascience.com/do-you-know-how-to-choose-the-right-machine-learning-algorithm-among-7-different-types-295d0b0c7f60)</span></span>
<span id="cb142-1138"><a href="http://localhost:3527/#cb142-1138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1139"><a href="http://localhost:3527/#cb142-1139" aria-hidden="true" tabindex="-1"></a><span class="fu">## Model Specification</span></span>
<span id="cb142-1140"><a href="http://localhost:3527/#cb142-1140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1141"><a href="http://localhost:3527/#cb142-1141" aria-hidden="true" tabindex="-1"></a>Regarding the model specification three steps need to be made:</span>
<span id="cb142-1142"><a href="http://localhost:3527/#cb142-1142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1143"><a href="http://localhost:3527/#cb142-1143" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Pick a model type (see above)</span>
<span id="cb142-1144"><a href="http://localhost:3527/#cb142-1144" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Set the engine (see above)</span>
<span id="cb142-1145"><a href="http://localhost:3527/#cb142-1145" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Set the mode regression (as the target is to perform a regression)</span>
<span id="cb142-1146"><a href="http://localhost:3527/#cb142-1146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1147"><a href="http://localhost:3527/#cb142-1147" aria-hidden="true" tabindex="-1"></a>The further chapters are based on the documentation of the following pages:</span>
<span id="cb142-1148"><a href="http://localhost:3527/#cb142-1148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1149"><a href="http://localhost:3527/#cb142-1149" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Tidymodels: Bossted Tree</span><span class="co">](https://parsnip.tidymodels.org/reference/boost_tree.html)</span></span>
<span id="cb142-1150"><a href="http://localhost:3527/#cb142-1150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1151"><a href="http://localhost:3527/#cb142-1151" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Tidymodels: Linear Regression</span><span class="co">](https://parsnip.tidymodels.org/reference/linear_reg.html)</span></span>
<span id="cb142-1152"><a href="http://localhost:3527/#cb142-1152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1153"><a href="http://localhost:3527/#cb142-1153" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Tidymodels: Single layer neural network</span><span class="co">](https://parsnip.tidymodels.org/reference/mlp.html)</span></span>
<span id="cb142-1154"><a href="http://localhost:3527/#cb142-1154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1155"><a href="http://localhost:3527/#cb142-1155" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Tidymodels: Tune</span><span class="co">](https://tune.tidymodels.org)</span></span>
<span id="cb142-1156"><a href="http://localhost:3527/#cb142-1156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1157"><a href="http://localhost:3527/#cb142-1157" aria-hidden="true" tabindex="-1"></a><span class="fu">### Boosted Tree</span></span>
<span id="cb142-1158"><a href="http://localhost:3527/#cb142-1158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1159"><a href="http://localhost:3527/#cb142-1159" aria-hidden="true" tabindex="-1"></a>At first the target is to keep the model simple, that's why the model will be created with standard settings:</span>
<span id="cb142-1160"><a href="http://localhost:3527/#cb142-1160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1161"><a href="http://localhost:3527/#cb142-1161" aria-hidden="true" tabindex="-1"></a><span class="in">```{r spec_xgboost_1}</span></span>
<span id="cb142-1162"><a href="http://localhost:3527/#cb142-1162" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb142-1163"><a href="http://localhost:3527/#cb142-1163" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xgboost)</span>
<span id="cb142-1164"><a href="http://localhost:3527/#cb142-1164" aria-hidden="true" tabindex="-1"></a>xgb_spec_1 <span class="ot">&lt;-</span> </span>
<span id="cb142-1165"><a href="http://localhost:3527/#cb142-1165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">boost_tree</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb142-1166"><a href="http://localhost:3527/#cb142-1166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"xgboost"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1167"><a href="http://localhost:3527/#cb142-1167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span>
<span id="cb142-1168"><a href="http://localhost:3527/#cb142-1168" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1169"><a href="http://localhost:3527/#cb142-1169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1170"><a href="http://localhost:3527/#cb142-1170" aria-hidden="true" tabindex="-1"></a>Add the created model into a workflow:</span>
<span id="cb142-1171"><a href="http://localhost:3527/#cb142-1171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1172"><a href="http://localhost:3527/#cb142-1172" aria-hidden="true" tabindex="-1"></a><span class="in">```{r workflow_xboost_1}</span></span>
<span id="cb142-1173"><a href="http://localhost:3527/#cb142-1173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1174"><a href="http://localhost:3527/#cb142-1174" aria-hidden="true" tabindex="-1"></a>xgb_workflow_1 <span class="ot">&lt;-</span></span>
<span id="cb142-1175"><a href="http://localhost:3527/#cb142-1175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb142-1176"><a href="http://localhost:3527/#cb142-1176" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb142-1177"><a href="http://localhost:3527/#cb142-1177" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(xgb_spec_1)</span>
<span id="cb142-1178"><a href="http://localhost:3527/#cb142-1178" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1179"><a href="http://localhost:3527/#cb142-1179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1180"><a href="http://localhost:3527/#cb142-1180" aria-hidden="true" tabindex="-1"></a><span class="fu">### Linear Regression</span></span>
<span id="cb142-1181"><a href="http://localhost:3527/#cb142-1181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1182"><a href="http://localhost:3527/#cb142-1182" aria-hidden="true" tabindex="-1"></a>At first the target is to keep the model simple, that's why the model will be created with standard settings:</span>
<span id="cb142-1183"><a href="http://localhost:3527/#cb142-1183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1184"><a href="http://localhost:3527/#cb142-1184" aria-hidden="true" tabindex="-1"></a><span class="in">```{r spec_lin_reg_1}</span></span>
<span id="cb142-1185"><a href="http://localhost:3527/#cb142-1185" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(keras)</span>
<span id="cb142-1186"><a href="http://localhost:3527/#cb142-1186" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tensorflow)</span>
<span id="cb142-1187"><a href="http://localhost:3527/#cb142-1187" aria-hidden="true" tabindex="-1"></a>lin_spec_1 <span class="ot">&lt;-</span> </span>
<span id="cb142-1188"><a href="http://localhost:3527/#cb142-1188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linear_reg</span>(<span class="at">penalty =</span> <span class="fl">0.1</span>, <span class="at">mixture =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1189"><a href="http://localhost:3527/#cb142-1189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1190"><a href="http://localhost:3527/#cb142-1190" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span>
<span id="cb142-1191"><a href="http://localhost:3527/#cb142-1191" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1192"><a href="http://localhost:3527/#cb142-1192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1193"><a href="http://localhost:3527/#cb142-1193" aria-hidden="true" tabindex="-1"></a>Add the created model into a workflow:</span>
<span id="cb142-1194"><a href="http://localhost:3527/#cb142-1194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1195"><a href="http://localhost:3527/#cb142-1195" aria-hidden="true" tabindex="-1"></a><span class="in">```{r workflow_lin_reg_1}</span></span>
<span id="cb142-1196"><a href="http://localhost:3527/#cb142-1196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1197"><a href="http://localhost:3527/#cb142-1197" aria-hidden="true" tabindex="-1"></a>lin_reg_workflow_1 <span class="ot">&lt;-</span></span>
<span id="cb142-1198"><a href="http://localhost:3527/#cb142-1198" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb142-1199"><a href="http://localhost:3527/#cb142-1199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb142-1200"><a href="http://localhost:3527/#cb142-1200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(lin_spec_1)</span>
<span id="cb142-1201"><a href="http://localhost:3527/#cb142-1201" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1202"><a href="http://localhost:3527/#cb142-1202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1203"><a href="http://localhost:3527/#cb142-1203" aria-hidden="true" tabindex="-1"></a><span class="fu">### Single Layer Neural Network</span></span>
<span id="cb142-1204"><a href="http://localhost:3527/#cb142-1204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1205"><a href="http://localhost:3527/#cb142-1205" aria-hidden="true" tabindex="-1"></a>At first the target is to keep the model simple, that's why the model will be created with standard settings:</span>
<span id="cb142-1206"><a href="http://localhost:3527/#cb142-1206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1207"><a href="http://localhost:3527/#cb142-1207" aria-hidden="true" tabindex="-1"></a><span class="in">```{r spec_neural_1}</span></span>
<span id="cb142-1208"><a href="http://localhost:3527/#cb142-1208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1209"><a href="http://localhost:3527/#cb142-1209" aria-hidden="true" tabindex="-1"></a>neural_spec_1 <span class="ot">&lt;-</span> </span>
<span id="cb142-1210"><a href="http://localhost:3527/#cb142-1210" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mlp</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb142-1211"><a href="http://localhost:3527/#cb142-1211" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"nnet"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1212"><a href="http://localhost:3527/#cb142-1212" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span>
<span id="cb142-1213"><a href="http://localhost:3527/#cb142-1213" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1214"><a href="http://localhost:3527/#cb142-1214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1215"><a href="http://localhost:3527/#cb142-1215" aria-hidden="true" tabindex="-1"></a>Add the created model into a workflow:</span>
<span id="cb142-1216"><a href="http://localhost:3527/#cb142-1216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1217"><a href="http://localhost:3527/#cb142-1217" aria-hidden="true" tabindex="-1"></a><span class="in">```{r workflow_neural_1}</span></span>
<span id="cb142-1218"><a href="http://localhost:3527/#cb142-1218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1219"><a href="http://localhost:3527/#cb142-1219" aria-hidden="true" tabindex="-1"></a>neural_workflow_1 <span class="ot">&lt;-</span></span>
<span id="cb142-1220"><a href="http://localhost:3527/#cb142-1220" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb142-1221"><a href="http://localhost:3527/#cb142-1221" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb142-1222"><a href="http://localhost:3527/#cb142-1222" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(neural_spec_1)</span>
<span id="cb142-1223"><a href="http://localhost:3527/#cb142-1223" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1224"><a href="http://localhost:3527/#cb142-1224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1225"><a href="http://localhost:3527/#cb142-1225" aria-hidden="true" tabindex="-1"></a><span class="fu">## Model training &amp; evaluation</span></span>
<span id="cb142-1226"><a href="http://localhost:3527/#cb142-1226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1227"><a href="http://localhost:3527/#cb142-1227" aria-hidden="true" tabindex="-1"></a><span class="fu">### Boosted tree</span></span>
<span id="cb142-1228"><a href="http://localhost:3527/#cb142-1228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1229"><a href="http://localhost:3527/#cb142-1229" aria-hidden="true" tabindex="-1"></a><span class="in">```{r res_xgboost_1}</span></span>
<span id="cb142-1230"><a href="http://localhost:3527/#cb142-1230" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb142-1231"><a href="http://localhost:3527/#cb142-1231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1232"><a href="http://localhost:3527/#cb142-1232" aria-hidden="true" tabindex="-1"></a>xgb_res_1 <span class="ot">&lt;-</span></span>
<span id="cb142-1233"><a href="http://localhost:3527/#cb142-1233" aria-hidden="true" tabindex="-1"></a>  xgb_workflow_1 <span class="sc">%&gt;%</span></span>
<span id="cb142-1234"><a href="http://localhost:3527/#cb142-1234" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit_resamples</span>(</span>
<span id="cb142-1235"><a href="http://localhost:3527/#cb142-1235" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb142-1236"><a href="http://localhost:3527/#cb142-1236" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1237"><a href="http://localhost:3527/#cb142-1237" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb142-1238"><a href="http://localhost:3527/#cb142-1238" aria-hidden="true" tabindex="-1"></a>xgb_res_1 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1239"><a href="http://localhost:3527/#cb142-1239" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1240"><a href="http://localhost:3527/#cb142-1240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1241"><a href="http://localhost:3527/#cb142-1241" aria-hidden="true" tabindex="-1"></a>How are these metrics spreading through the cross_validation:</span>
<span id="cb142-1242"><a href="http://localhost:3527/#cb142-1242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1243"><a href="http://localhost:3527/#cb142-1243" aria-hidden="true" tabindex="-1"></a><span class="in">```{r res_xgboost_cv}</span></span>
<span id="cb142-1244"><a href="http://localhost:3527/#cb142-1244" aria-hidden="true" tabindex="-1"></a>xgb_res_1 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">FALSE</span>)</span>
<span id="cb142-1245"><a href="http://localhost:3527/#cb142-1245" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1246"><a href="http://localhost:3527/#cb142-1246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1247"><a href="http://localhost:3527/#cb142-1247" aria-hidden="true" tabindex="-1"></a>There are some smaller differences between these folds, but overall those differences are not to big.</span>
<span id="cb142-1248"><a href="http://localhost:3527/#cb142-1248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1249"><a href="http://localhost:3527/#cb142-1249" aria-hidden="true" tabindex="-1"></a>Lets visualize these metrics into a plot. For this the predictions are plotted on the y-axis and the actual values on the x-axis. If a perfect model would have been created, all points would be on the diagonal line</span>
<span id="cb142-1250"><a href="http://localhost:3527/#cb142-1250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1251"><a href="http://localhost:3527/#cb142-1251" aria-hidden="true" tabindex="-1"></a><span class="in">```{r plot_xgboost_res_1}</span></span>
<span id="cb142-1252"><a href="http://localhost:3527/#cb142-1252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1253"><a href="http://localhost:3527/#cb142-1253" aria-hidden="true" tabindex="-1"></a>assess_xgb_res_1 <span class="ot">&lt;-</span> <span class="fu">collect_predictions</span>(xgb_res_1)</span>
<span id="cb142-1254"><a href="http://localhost:3527/#cb142-1254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1255"><a href="http://localhost:3527/#cb142-1255" aria-hidden="true" tabindex="-1"></a>assess_xgb_res_1 <span class="sc">%&gt;%</span> </span>
<span id="cb142-1256"><a href="http://localhost:3527/#cb142-1256" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_score, <span class="at">y =</span> .pred)) <span class="sc">+</span>   <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb142-1257"><a href="http://localhost:3527/#cb142-1257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">col =</span> <span class="st">"blue"</span>) <span class="sc">+</span> </span>
<span id="cb142-1258"><a href="http://localhost:3527/#cb142-1258" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_obs_pred</span>() <span class="sc">+</span> </span>
<span id="cb142-1259"><a href="http://localhost:3527/#cb142-1259" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted"</span>) <span class="sc">+</span></span>
<span id="cb142-1260"><a href="http://localhost:3527/#cb142-1260" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Actual Average Exam Score"</span>)</span>
<span id="cb142-1261"><a href="http://localhost:3527/#cb142-1261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1262"><a href="http://localhost:3527/#cb142-1262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1263"><a href="http://localhost:3527/#cb142-1263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1264"><a href="http://localhost:3527/#cb142-1264" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1265"><a href="http://localhost:3527/#cb142-1265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1266"><a href="http://localhost:3527/#cb142-1266" aria-hidden="true" tabindex="-1"></a>If we consider that this is the first created model and that there are only categorical features in the dataset, this result (RMSE) not that bad, but the R squared is low. Lets see in the next chapter how the Boosted Tree Performance can be increased. Further steps are to adapt the hyperparameters and the features which are added into the model.</span>
<span id="cb142-1267"><a href="http://localhost:3527/#cb142-1267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1268"><a href="http://localhost:3527/#cb142-1268" aria-hidden="true" tabindex="-1"></a><span class="fu">### Linear Regression</span></span>
<span id="cb142-1269"><a href="http://localhost:3527/#cb142-1269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1270"><a href="http://localhost:3527/#cb142-1270" aria-hidden="true" tabindex="-1"></a><span class="in">```{r res_lin_reg_1}</span></span>
<span id="cb142-1271"><a href="http://localhost:3527/#cb142-1271" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb142-1272"><a href="http://localhost:3527/#cb142-1272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1273"><a href="http://localhost:3527/#cb142-1273" aria-hidden="true" tabindex="-1"></a>lin_reg_res_1 <span class="ot">&lt;-</span></span>
<span id="cb142-1274"><a href="http://localhost:3527/#cb142-1274" aria-hidden="true" tabindex="-1"></a>  lin_reg_workflow_1 <span class="sc">%&gt;%</span></span>
<span id="cb142-1275"><a href="http://localhost:3527/#cb142-1275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit_resamples</span>(</span>
<span id="cb142-1276"><a href="http://localhost:3527/#cb142-1276" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb142-1277"><a href="http://localhost:3527/#cb142-1277" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1278"><a href="http://localhost:3527/#cb142-1278" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb142-1279"><a href="http://localhost:3527/#cb142-1279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1280"><a href="http://localhost:3527/#cb142-1280" aria-hidden="true" tabindex="-1"></a>lin_reg_res_1 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1281"><a href="http://localhost:3527/#cb142-1281" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1282"><a href="http://localhost:3527/#cb142-1282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1283"><a href="http://localhost:3527/#cb142-1283" aria-hidden="true" tabindex="-1"></a>How are these metrics spreading through the cross_validation:</span>
<span id="cb142-1284"><a href="http://localhost:3527/#cb142-1284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1285"><a href="http://localhost:3527/#cb142-1285" aria-hidden="true" tabindex="-1"></a><span class="in">```{r res_lin_reg_cv}</span></span>
<span id="cb142-1286"><a href="http://localhost:3527/#cb142-1286" aria-hidden="true" tabindex="-1"></a>lin_reg_res_1 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">FALSE</span>)</span>
<span id="cb142-1287"><a href="http://localhost:3527/#cb142-1287" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1288"><a href="http://localhost:3527/#cb142-1288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1289"><a href="http://localhost:3527/#cb142-1289" aria-hidden="true" tabindex="-1"></a>There are some smaller differences between these folds, but overall those differences are not to big. Overall these metrics changed compared to the simple XGBoost model. The First model had a higher RMSE and a lower RSQ value.</span>
<span id="cb142-1290"><a href="http://localhost:3527/#cb142-1290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1291"><a href="http://localhost:3527/#cb142-1291" aria-hidden="true" tabindex="-1"></a>Lets visualize these metrics into a plot. For this the predictions are plotted on the y-axis and the actual values on the x-axis. If a perfect model would have been created, all points would be on the diagonal line</span>
<span id="cb142-1292"><a href="http://localhost:3527/#cb142-1292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1293"><a href="http://localhost:3527/#cb142-1293" aria-hidden="true" tabindex="-1"></a><span class="in">```{r plot_lin_reg_res_1}</span></span>
<span id="cb142-1294"><a href="http://localhost:3527/#cb142-1294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1295"><a href="http://localhost:3527/#cb142-1295" aria-hidden="true" tabindex="-1"></a>assess_lin_reg_res_1 <span class="ot">&lt;-</span> <span class="fu">collect_predictions</span>(lin_reg_res_1)</span>
<span id="cb142-1296"><a href="http://localhost:3527/#cb142-1296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1297"><a href="http://localhost:3527/#cb142-1297" aria-hidden="true" tabindex="-1"></a>assess_lin_reg_res_1 <span class="sc">%&gt;%</span> </span>
<span id="cb142-1298"><a href="http://localhost:3527/#cb142-1298" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_score, <span class="at">y =</span> .pred)) <span class="sc">+</span>   <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb142-1299"><a href="http://localhost:3527/#cb142-1299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">col =</span> <span class="st">"blue"</span>) <span class="sc">+</span> </span>
<span id="cb142-1300"><a href="http://localhost:3527/#cb142-1300" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_obs_pred</span>() <span class="sc">+</span> </span>
<span id="cb142-1301"><a href="http://localhost:3527/#cb142-1301" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted"</span>) <span class="sc">+</span></span>
<span id="cb142-1302"><a href="http://localhost:3527/#cb142-1302" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Actual Average Exam Score"</span>)</span>
<span id="cb142-1303"><a href="http://localhost:3527/#cb142-1303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1304"><a href="http://localhost:3527/#cb142-1304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1305"><a href="http://localhost:3527/#cb142-1305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1306"><a href="http://localhost:3527/#cb142-1306" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1307"><a href="http://localhost:3527/#cb142-1307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1308"><a href="http://localhost:3527/#cb142-1308" aria-hidden="true" tabindex="-1"></a><span class="fu">### Single Layer Perceptron</span></span>
<span id="cb142-1309"><a href="http://localhost:3527/#cb142-1309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1310"><a href="http://localhost:3527/#cb142-1310" aria-hidden="true" tabindex="-1"></a><span class="in">```{r res_neural_1}</span></span>
<span id="cb142-1311"><a href="http://localhost:3527/#cb142-1311" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb142-1312"><a href="http://localhost:3527/#cb142-1312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1313"><a href="http://localhost:3527/#cb142-1313" aria-hidden="true" tabindex="-1"></a>neural_res_1 <span class="ot">&lt;-</span></span>
<span id="cb142-1314"><a href="http://localhost:3527/#cb142-1314" aria-hidden="true" tabindex="-1"></a>  neural_workflow_1 <span class="sc">%&gt;%</span></span>
<span id="cb142-1315"><a href="http://localhost:3527/#cb142-1315" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit_resamples</span>(</span>
<span id="cb142-1316"><a href="http://localhost:3527/#cb142-1316" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb142-1317"><a href="http://localhost:3527/#cb142-1317" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1318"><a href="http://localhost:3527/#cb142-1318" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb142-1319"><a href="http://localhost:3527/#cb142-1319" aria-hidden="true" tabindex="-1"></a>neural_res_1 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1320"><a href="http://localhost:3527/#cb142-1320" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1321"><a href="http://localhost:3527/#cb142-1321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1322"><a href="http://localhost:3527/#cb142-1322" aria-hidden="true" tabindex="-1"></a>How are these metrics spreading through the cross_validation:</span>
<span id="cb142-1323"><a href="http://localhost:3527/#cb142-1323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1324"><a href="http://localhost:3527/#cb142-1324" aria-hidden="true" tabindex="-1"></a><span class="in">```{r res_neural_cv}</span></span>
<span id="cb142-1325"><a href="http://localhost:3527/#cb142-1325" aria-hidden="true" tabindex="-1"></a>neural_res_1 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">FALSE</span>)</span>
<span id="cb142-1326"><a href="http://localhost:3527/#cb142-1326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1327"><a href="http://localhost:3527/#cb142-1327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1328"><a href="http://localhost:3527/#cb142-1328" aria-hidden="true" tabindex="-1"></a>There are some smaller differences between these folds, but overall those differences are not to big.</span>
<span id="cb142-1329"><a href="http://localhost:3527/#cb142-1329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1330"><a href="http://localhost:3527/#cb142-1330" aria-hidden="true" tabindex="-1"></a>This model has the highest RSME score. The RSQ score is similar to the result of the XGBoost.</span>
<span id="cb142-1331"><a href="http://localhost:3527/#cb142-1331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1332"><a href="http://localhost:3527/#cb142-1332" aria-hidden="true" tabindex="-1"></a>Lets visualize these metrics into a plot. For this the predictions are plotted on the y-axis and the actual values on the x-axis. If a perfect model would have been created, all points would be on the diagonal line</span>
<span id="cb142-1333"><a href="http://localhost:3527/#cb142-1333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1334"><a href="http://localhost:3527/#cb142-1334" aria-hidden="true" tabindex="-1"></a><span class="in">```{r plot_neural_res_1}</span></span>
<span id="cb142-1335"><a href="http://localhost:3527/#cb142-1335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1336"><a href="http://localhost:3527/#cb142-1336" aria-hidden="true" tabindex="-1"></a>assess_neural_res_1 <span class="ot">&lt;-</span> <span class="fu">collect_predictions</span>(neural_res_1)</span>
<span id="cb142-1337"><a href="http://localhost:3527/#cb142-1337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1338"><a href="http://localhost:3527/#cb142-1338" aria-hidden="true" tabindex="-1"></a>assess_xgb_res_1 <span class="sc">%&gt;%</span> </span>
<span id="cb142-1339"><a href="http://localhost:3527/#cb142-1339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_score, <span class="at">y =</span> .pred)) <span class="sc">+</span>   <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb142-1340"><a href="http://localhost:3527/#cb142-1340" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">col =</span> <span class="st">"blue"</span>) <span class="sc">+</span> </span>
<span id="cb142-1341"><a href="http://localhost:3527/#cb142-1341" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_obs_pred</span>() <span class="sc">+</span> </span>
<span id="cb142-1342"><a href="http://localhost:3527/#cb142-1342" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted"</span>) <span class="sc">+</span></span>
<span id="cb142-1343"><a href="http://localhost:3527/#cb142-1343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Actual Average Exam Score"</span>)</span>
<span id="cb142-1344"><a href="http://localhost:3527/#cb142-1344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1345"><a href="http://localhost:3527/#cb142-1345" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1346"><a href="http://localhost:3527/#cb142-1346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1347"><a href="http://localhost:3527/#cb142-1347" aria-hidden="true" tabindex="-1"></a><span class="fu">## Feature Selection</span></span>
<span id="cb142-1348"><a href="http://localhost:3527/#cb142-1348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1349"><a href="http://localhost:3527/#cb142-1349" aria-hidden="true" tabindex="-1"></a>After the initial models were created and their results were visualized, lets have a look on the feature importance's. Currently all available features were used for the model creation. Therefore lets analyze the Feature Importance and maybe it might be better to remove some features.</span>
<span id="cb142-1350"><a href="http://localhost:3527/#cb142-1350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1351"><a href="http://localhost:3527/#cb142-1351" aria-hidden="true" tabindex="-1"></a><span class="in">```{r feature_importance_caret}</span></span>
<span id="cb142-1352"><a href="http://localhost:3527/#cb142-1352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1353"><a href="http://localhost:3527/#cb142-1353" aria-hidden="true" tabindex="-1"></a><span class="co"># ensure results are repeatable</span></span>
<span id="cb142-1354"><a href="http://localhost:3527/#cb142-1354" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb142-1355"><a href="http://localhost:3527/#cb142-1355" aria-hidden="true" tabindex="-1"></a><span class="co"># load the library</span></span>
<span id="cb142-1356"><a href="http://localhost:3527/#cb142-1356" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mlbench)</span>
<span id="cb142-1357"><a href="http://localhost:3527/#cb142-1357" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb142-1358"><a href="http://localhost:3527/#cb142-1358" aria-hidden="true" tabindex="-1"></a><span class="co"># load the dataset</span></span>
<span id="cb142-1359"><a href="http://localhost:3527/#cb142-1359" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(train_data)</span>
<span id="cb142-1360"><a href="http://localhost:3527/#cb142-1360" aria-hidden="true" tabindex="-1"></a><span class="co"># prepare training scheme</span></span>
<span id="cb142-1361"><a href="http://localhost:3527/#cb142-1361" aria-hidden="true" tabindex="-1"></a>control <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(<span class="at">method=</span><span class="st">"repeatedcv"</span>, <span class="at">number=</span><span class="dv">10</span>, <span class="at">repeats=</span><span class="dv">3</span>)</span>
<span id="cb142-1362"><a href="http://localhost:3527/#cb142-1362" aria-hidden="true" tabindex="-1"></a><span class="co"># train the model</span></span>
<span id="cb142-1363"><a href="http://localhost:3527/#cb142-1363" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">train</span>(avg_score<span class="sc">~</span> ., <span class="at">data=</span>train_data, <span class="at">method=</span><span class="st">"pls"</span>, <span class="at">preProcess=</span><span class="st">"scale"</span>, <span class="at">trControl=</span>control)</span>
<span id="cb142-1364"><a href="http://localhost:3527/#cb142-1364" aria-hidden="true" tabindex="-1"></a><span class="co"># estimate variable importance</span></span>
<span id="cb142-1365"><a href="http://localhost:3527/#cb142-1365" aria-hidden="true" tabindex="-1"></a>importance <span class="ot">&lt;-</span> <span class="fu">varImp</span>(model, <span class="at">scale=</span><span class="cn">FALSE</span>)</span>
<span id="cb142-1366"><a href="http://localhost:3527/#cb142-1366" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize importance</span></span>
<span id="cb142-1367"><a href="http://localhost:3527/#cb142-1367" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(importance)</span>
<span id="cb142-1368"><a href="http://localhost:3527/#cb142-1368" aria-hidden="true" tabindex="-1"></a><span class="co"># plot importance</span></span>
<span id="cb142-1369"><a href="http://localhost:3527/#cb142-1369" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(importance)</span>
<span id="cb142-1370"><a href="http://localhost:3527/#cb142-1370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1371"><a href="http://localhost:3527/#cb142-1371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1372"><a href="http://localhost:3527/#cb142-1372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1373"><a href="http://localhost:3527/#cb142-1373" aria-hidden="true" tabindex="-1"></a>It can be seen that the other exam scores are having the biggest influence on the average score - which totally makes sense as these variables are the basis for this variable. This is exactly why they need to be removed from the modelling, even though they have a huge feature importance.</span>
<span id="cb142-1374"><a href="http://localhost:3527/#cb142-1374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1375"><a href="http://localhost:3527/#cb142-1375" aria-hidden="true" tabindex="-1"></a>Beside these variables the most important features are the <span class="in">`lunch`</span> and <span class="in">`test_preparation`</span>variables. Also an important features seems to be the <span class="in">`ethnic_group`</span> but only for one level (Group E). The other levels have only a very small influence on the result. Also the <span class="in">`gender`</span> variable seems to be a bit important. The lowest feature importance is brought in by the <span class="in">`parent_education`</span> as most of the levels have only a very small Importance. This result is matching the learning from the data visualization. In that chapter it was learned the most of the other levels have only a small impact on the average exam score.</span>
<span id="cb142-1376"><a href="http://localhost:3527/#cb142-1376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1377"><a href="http://localhost:3527/#cb142-1377" aria-hidden="true" tabindex="-1"></a>**Forward Selection**</span>
<span id="cb142-1378"><a href="http://localhost:3527/#cb142-1378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1379"><a href="http://localhost:3527/#cb142-1379" aria-hidden="true" tabindex="-1"></a>Lets make a simple model in which a Forward selection if performed. The result of this shall determine the variables which shall be used in all models.</span>
<span id="cb142-1380"><a href="http://localhost:3527/#cb142-1380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1381"><a href="http://localhost:3527/#cb142-1381" aria-hidden="true" tabindex="-1"></a><span class="in">```{r forward_selection}</span></span>
<span id="cb142-1382"><a href="http://localhost:3527/#cb142-1382" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb142-1383"><a href="http://localhost:3527/#cb142-1383" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb142-1384"><a href="http://localhost:3527/#cb142-1384" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up repeated k-fold cross-validation</span></span>
<span id="cb142-1385"><a href="http://localhost:3527/#cb142-1385" aria-hidden="true" tabindex="-1"></a>train.control <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"cv"</span>, <span class="at">number =</span> <span class="dv">50</span>)</span>
<span id="cb142-1386"><a href="http://localhost:3527/#cb142-1386" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model</span></span>
<span id="cb142-1387"><a href="http://localhost:3527/#cb142-1387" aria-hidden="true" tabindex="-1"></a>step.model <span class="ot">&lt;-</span> <span class="fu">train</span>(avg_score <span class="sc">~</span> gender <span class="sc">+</span> ethnic_group <span class="sc">+</span> parent_education <span class="sc">+</span> lunch <span class="sc">+</span> test_prep, <span class="at">data =</span> train_data,</span>
<span id="cb142-1388"><a href="http://localhost:3527/#cb142-1388" aria-hidden="true" tabindex="-1"></a>                    <span class="at">method =</span> <span class="st">"leapForward"</span>, </span>
<span id="cb142-1389"><a href="http://localhost:3527/#cb142-1389" aria-hidden="true" tabindex="-1"></a>                    <span class="at">tuneGrid =</span> <span class="fu">data.frame</span>(<span class="at">nvmax =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>), <span class="co"># only add 5 variables - we only have 5 in the data</span></span>
<span id="cb142-1390"><a href="http://localhost:3527/#cb142-1390" aria-hidden="true" tabindex="-1"></a>                    <span class="at">trControl =</span> train.control</span>
<span id="cb142-1391"><a href="http://localhost:3527/#cb142-1391" aria-hidden="true" tabindex="-1"></a>                    )</span>
<span id="cb142-1392"><a href="http://localhost:3527/#cb142-1392" aria-hidden="true" tabindex="-1"></a>step.model<span class="sc">$</span>results</span>
<span id="cb142-1393"><a href="http://localhost:3527/#cb142-1393" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1394"><a href="http://localhost:3527/#cb142-1394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1395"><a href="http://localhost:3527/#cb142-1395" aria-hidden="true" tabindex="-1"></a>It can be seen that we get the best scores for RMSE and R squared are achieved if all variables are added into the model. But the difference between 3, 4 and 5 variables is very small. Moreover there is no consideration of the adjusted R squared. R squared is increasing most times if additional variables are added into the model while the adjusted R squared is adding a penalty for this.</span>
<span id="cb142-1396"><a href="http://localhost:3527/#cb142-1396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1397"><a href="http://localhost:3527/#cb142-1397" aria-hidden="true" tabindex="-1"></a>Nevertheless we will continue with the model which has the highest R squared and RMSE score. It needs to be added that both of these values are not that good.</span>
<span id="cb142-1398"><a href="http://localhost:3527/#cb142-1398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1399"><a href="http://localhost:3527/#cb142-1399" aria-hidden="true" tabindex="-1"></a>Lets display the best tuning values (nvmax) selected by the train() function.</span>
<span id="cb142-1400"><a href="http://localhost:3527/#cb142-1400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1401"><a href="http://localhost:3527/#cb142-1401" aria-hidden="true" tabindex="-1"></a><span class="in">```{r best_tune}</span></span>
<span id="cb142-1402"><a href="http://localhost:3527/#cb142-1402" aria-hidden="true" tabindex="-1"></a>step.model<span class="sc">$</span>bestTune</span>
<span id="cb142-1403"><a href="http://localhost:3527/#cb142-1403" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1404"><a href="http://localhost:3527/#cb142-1404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1405"><a href="http://localhost:3527/#cb142-1405" aria-hidden="true" tabindex="-1"></a>Result from Forward selection is to use all 5 variables for modelling.</span>
<span id="cb142-1406"><a href="http://localhost:3527/#cb142-1406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1407"><a href="http://localhost:3527/#cb142-1407" aria-hidden="true" tabindex="-1"></a>Lets check in which order these variables are selected. This can be seen by the <span class="sc">\*</span> in the corresponding selection step.</span>
<span id="cb142-1408"><a href="http://localhost:3527/#cb142-1408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1409"><a href="http://localhost:3527/#cb142-1409" aria-hidden="true" tabindex="-1"></a><span class="in">```{r summary_feature_selection}</span></span>
<span id="cb142-1410"><a href="http://localhost:3527/#cb142-1410" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(step.model<span class="sc">$</span>finalModel)</span>
<span id="cb142-1411"><a href="http://localhost:3527/#cb142-1411" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1412"><a href="http://localhost:3527/#cb142-1412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1413"><a href="http://localhost:3527/#cb142-1413" aria-hidden="true" tabindex="-1"></a>Below is the result summed up. The rank of the most important features is:</span>
<span id="cb142-1414"><a href="http://localhost:3527/#cb142-1414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1415"><a href="http://localhost:3527/#cb142-1415" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Lunch</span>
<span id="cb142-1416"><a href="http://localhost:3527/#cb142-1416" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Test preparation</span>
<span id="cb142-1417"><a href="http://localhost:3527/#cb142-1417" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>ethnic_group</span>
<span id="cb142-1418"><a href="http://localhost:3527/#cb142-1418" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>parent_education</span>
<span id="cb142-1419"><a href="http://localhost:3527/#cb142-1419" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>gender</span>
<span id="cb142-1420"><a href="http://localhost:3527/#cb142-1420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1421"><a href="http://localhost:3527/#cb142-1421" aria-hidden="true" tabindex="-1"></a>For better results of the model it would make sense to have a deeper analysis of the adjusted R squared score for the added variables. Moreover it would probably make sense to reduce the amount of levels in the variables. For example some ethnic groups have almost no difference between their performance on the average exam score.</span>
<span id="cb142-1422"><a href="http://localhost:3527/#cb142-1422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1423"><a href="http://localhost:3527/#cb142-1423" aria-hidden="true" tabindex="-1"></a><span class="fu">## Model Tuning</span></span>
<span id="cb142-1424"><a href="http://localhost:3527/#cb142-1424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1425"><a href="http://localhost:3527/#cb142-1425" aria-hidden="true" tabindex="-1"></a>This chapter will cover the possibilities of model tuning. For this the three created basis models will be tuned. In the first step the adaption of parameters is made manually. In the second step the tune package is used. For the model performance only the numeric results will be compared. No further analysis of the visualization of model results will be made. At the end the model with the best performance will be used to make a final fit on the training data.</span>
<span id="cb142-1426"><a href="http://localhost:3527/#cb142-1426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1427"><a href="http://localhost:3527/#cb142-1427" aria-hidden="true" tabindex="-1"></a>As a comparison a model which only contains the mean will be created. This will be used as a simple comparison if the created model performs better than a simple guess of the mean for all exam scores.</span>
<span id="cb142-1428"><a href="http://localhost:3527/#cb142-1428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1429"><a href="http://localhost:3527/#cb142-1429" aria-hidden="true" tabindex="-1"></a><span class="fu">### Boosted Tree</span></span>
<span id="cb142-1430"><a href="http://localhost:3527/#cb142-1430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1431"><a href="http://localhost:3527/#cb142-1431" aria-hidden="true" tabindex="-1"></a>For the Boosted Tree the following hyperparameters shall be adapted:</span>
<span id="cb142-1432"><a href="http://localhost:3527/#cb142-1432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1433"><a href="http://localhost:3527/#cb142-1433" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Trees: Amount of trees in the ensemble - default 15</span>
<span id="cb142-1434"><a href="http://localhost:3527/#cb142-1434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1435"><a href="http://localhost:3527/#cb142-1435" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Tree_depth: Maximal depth of the tree (e.g number of splits) - default 6</span>
<span id="cb142-1436"><a href="http://localhost:3527/#cb142-1436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1437"><a href="http://localhost:3527/#cb142-1437" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>min_n; minimum amount of data points for a further split - default 1</span>
<span id="cb142-1438"><a href="http://localhost:3527/#cb142-1438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1439"><a href="http://localhost:3527/#cb142-1439" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Learn_rate: Learn-rate at which the algorithm adapts from iteration to iteration - default 0.3</span>
<span id="cb142-1440"><a href="http://localhost:3527/#cb142-1440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1441"><a href="http://localhost:3527/#cb142-1441" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Loss_reduction: Minimum loss reduction - default 0.0</span>
<span id="cb142-1442"><a href="http://localhost:3527/#cb142-1442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1443"><a href="http://localhost:3527/#cb142-1443" aria-hidden="true" tabindex="-1"></a>Source: <span class="co">[</span><span class="ot">Boosted trees via xgboost</span><span class="co">](https://parsnip.tidymodels.org/reference/details_boost_tree_xgboost.html)</span></span>
<span id="cb142-1444"><a href="http://localhost:3527/#cb142-1444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1445"><a href="http://localhost:3527/#cb142-1445" aria-hidden="true" tabindex="-1"></a>At first manually the hyper parameters are adapted and the result will be checked.</span>
<span id="cb142-1446"><a href="http://localhost:3527/#cb142-1446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1447"><a href="http://localhost:3527/#cb142-1447" aria-hidden="true" tabindex="-1"></a>First of all the model will be specified:</span>
<span id="cb142-1448"><a href="http://localhost:3527/#cb142-1448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1449"><a href="http://localhost:3527/#cb142-1449" aria-hidden="true" tabindex="-1"></a><span class="in">```{r spec_xgboost_2}</span></span>
<span id="cb142-1450"><a href="http://localhost:3527/#cb142-1450" aria-hidden="true" tabindex="-1"></a>xgb_spec_2 <span class="ot">&lt;-</span> </span>
<span id="cb142-1451"><a href="http://localhost:3527/#cb142-1451" aria-hidden="true" tabindex="-1"></a>  <span class="fu">boost_tree</span>(</span>
<span id="cb142-1452"><a href="http://localhost:3527/#cb142-1452" aria-hidden="true" tabindex="-1"></a>    <span class="at">trees =</span> <span class="dv">30</span>,</span>
<span id="cb142-1453"><a href="http://localhost:3527/#cb142-1453" aria-hidden="true" tabindex="-1"></a>    <span class="at">tree_depth =</span> <span class="dv">4</span>,</span>
<span id="cb142-1454"><a href="http://localhost:3527/#cb142-1454" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_n =</span> <span class="dv">8</span>,</span>
<span id="cb142-1455"><a href="http://localhost:3527/#cb142-1455" aria-hidden="true" tabindex="-1"></a>    <span class="at">learn_rate =</span> <span class="fl">0.2</span>,</span>
<span id="cb142-1456"><a href="http://localhost:3527/#cb142-1456" aria-hidden="true" tabindex="-1"></a>    <span class="at">loss_reduction =</span> <span class="fl">0.05</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1457"><a href="http://localhost:3527/#cb142-1457" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"xgboost"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1458"><a href="http://localhost:3527/#cb142-1458" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span>
<span id="cb142-1459"><a href="http://localhost:3527/#cb142-1459" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1460"><a href="http://localhost:3527/#cb142-1460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1461"><a href="http://localhost:3527/#cb142-1461" aria-hidden="true" tabindex="-1"></a>Afterwards the new model will be added to the workflow with the created recipe</span>
<span id="cb142-1462"><a href="http://localhost:3527/#cb142-1462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1463"><a href="http://localhost:3527/#cb142-1463" aria-hidden="true" tabindex="-1"></a><span class="in">```{r workflow_xboost_2}</span></span>
<span id="cb142-1464"><a href="http://localhost:3527/#cb142-1464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1465"><a href="http://localhost:3527/#cb142-1465" aria-hidden="true" tabindex="-1"></a>xgb_workflow_2 <span class="ot">&lt;-</span></span>
<span id="cb142-1466"><a href="http://localhost:3527/#cb142-1466" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb142-1467"><a href="http://localhost:3527/#cb142-1467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb142-1468"><a href="http://localhost:3527/#cb142-1468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(xgb_spec_2)</span>
<span id="cb142-1469"><a href="http://localhost:3527/#cb142-1469" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1470"><a href="http://localhost:3527/#cb142-1470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1471"><a href="http://localhost:3527/#cb142-1471" aria-hidden="true" tabindex="-1"></a><span class="in">```{r res_xgboost_2}</span></span>
<span id="cb142-1472"><a href="http://localhost:3527/#cb142-1472" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb142-1473"><a href="http://localhost:3527/#cb142-1473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1474"><a href="http://localhost:3527/#cb142-1474" aria-hidden="true" tabindex="-1"></a>xgb_res_2 <span class="ot">&lt;-</span></span>
<span id="cb142-1475"><a href="http://localhost:3527/#cb142-1475" aria-hidden="true" tabindex="-1"></a>  xgb_workflow_2 <span class="sc">%&gt;%</span></span>
<span id="cb142-1476"><a href="http://localhost:3527/#cb142-1476" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit_resamples</span>(</span>
<span id="cb142-1477"><a href="http://localhost:3527/#cb142-1477" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb142-1478"><a href="http://localhost:3527/#cb142-1478" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1479"><a href="http://localhost:3527/#cb142-1479" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb142-1480"><a href="http://localhost:3527/#cb142-1480" aria-hidden="true" tabindex="-1"></a>xgb_res_2 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1481"><a href="http://localhost:3527/#cb142-1481" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1482"><a href="http://localhost:3527/#cb142-1482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1483"><a href="http://localhost:3527/#cb142-1483" aria-hidden="true" tabindex="-1"></a>The model performance improved by adapting the hyper parameters. The RMSE score could be reduced by 0.5. Now lets try it with the tune package.</span>
<span id="cb142-1484"><a href="http://localhost:3527/#cb142-1484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1485"><a href="http://localhost:3527/#cb142-1485" aria-hidden="true" tabindex="-1"></a>The hyperparameter tuning is based on the following documentations:</span>
<span id="cb142-1486"><a href="http://localhost:3527/#cb142-1486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1487"><a href="http://localhost:3527/#cb142-1487" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Tidymodels: Tuning</span><span class="co">](https://www.tidymodels.org/start/tuning/)</span></span>
<span id="cb142-1488"><a href="http://localhost:3527/#cb142-1488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1489"><a href="http://localhost:3527/#cb142-1489" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Tidymodels: Tune SVM</span><span class="co">](https://www.tidymodels.org/learn/work/tune-svm/)</span> --<span class="sc">\&gt;</span> includes also a generic approach</span>
<span id="cb142-1490"><a href="http://localhost:3527/#cb142-1490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1491"><a href="http://localhost:3527/#cb142-1491" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Tidymodels: Tune</span><span class="co">](https://tune.tidymodels.org)</span></span>
<span id="cb142-1492"><a href="http://localhost:3527/#cb142-1492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1493"><a href="http://localhost:3527/#cb142-1493" aria-hidden="true" tabindex="-1"></a>First of all a new model specification is created. In this the hyperparameters are specified which shall be tuned.</span>
<span id="cb142-1494"><a href="http://localhost:3527/#cb142-1494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1495"><a href="http://localhost:3527/#cb142-1495" aria-hidden="true" tabindex="-1"></a>Note: Due to to many different model variations, I have decided to reduce the grid to a maximum of three hyper parameters. Instead of additional hyper parameters, it makes more sense to test more levels in between.</span>
<span id="cb142-1496"><a href="http://localhost:3527/#cb142-1496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1497"><a href="http://localhost:3527/#cb142-1497" aria-hidden="true" tabindex="-1"></a><span class="in">```{r spec_xgboost_3}</span></span>
<span id="cb142-1498"><a href="http://localhost:3527/#cb142-1498" aria-hidden="true" tabindex="-1"></a>xgb_spec_3 <span class="ot">&lt;-</span> </span>
<span id="cb142-1499"><a href="http://localhost:3527/#cb142-1499" aria-hidden="true" tabindex="-1"></a>  <span class="fu">boost_tree</span>(</span>
<span id="cb142-1500"><a href="http://localhost:3527/#cb142-1500" aria-hidden="true" tabindex="-1"></a>    <span class="at">trees =</span> <span class="fu">tune</span>(),</span>
<span id="cb142-1501"><a href="http://localhost:3527/#cb142-1501" aria-hidden="true" tabindex="-1"></a>    <span class="at">tree_depth =</span> <span class="fu">tune</span>(),</span>
<span id="cb142-1502"><a href="http://localhost:3527/#cb142-1502" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_n =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1503"><a href="http://localhost:3527/#cb142-1503" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"xgboost"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1504"><a href="http://localhost:3527/#cb142-1504" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span>
<span id="cb142-1505"><a href="http://localhost:3527/#cb142-1505" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1506"><a href="http://localhost:3527/#cb142-1506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1507"><a href="http://localhost:3527/#cb142-1507" aria-hidden="true" tabindex="-1"></a>Have a look on the tune spec:</span>
<span id="cb142-1508"><a href="http://localhost:3527/#cb142-1508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1509"><a href="http://localhost:3527/#cb142-1509" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xgboost_tune_spec}</span></span>
<span id="cb142-1510"><a href="http://localhost:3527/#cb142-1510" aria-hidden="true" tabindex="-1"></a>xgb_spec_3</span>
<span id="cb142-1511"><a href="http://localhost:3527/#cb142-1511" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1512"><a href="http://localhost:3527/#cb142-1512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1513"><a href="http://localhost:3527/#cb142-1513" aria-hidden="true" tabindex="-1"></a>The <span class="in">`tune()`</span> is like a placeholder. After the tuning process single numeric values are selected for each of the hyperparameter.</span>
<span id="cb142-1514"><a href="http://localhost:3527/#cb142-1514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1515"><a href="http://localhost:3527/#cb142-1515" aria-hidden="true" tabindex="-1"></a>In the next steps several models are trained using resampled data. Afterwards it is checked which model performs best. For this a grid of values is created:</span>
<span id="cb142-1516"><a href="http://localhost:3527/#cb142-1516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1517"><a href="http://localhost:3527/#cb142-1517" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xgboost_grid}</span></span>
<span id="cb142-1518"><a href="http://localhost:3527/#cb142-1518" aria-hidden="true" tabindex="-1"></a>xgboost_grid <span class="ot">&lt;-</span> <span class="fu">grid_regular</span>(</span>
<span id="cb142-1519"><a href="http://localhost:3527/#cb142-1519" aria-hidden="true" tabindex="-1"></a>  <span class="fu">trees</span>(),</span>
<span id="cb142-1520"><a href="http://localhost:3527/#cb142-1520" aria-hidden="true" tabindex="-1"></a>  <span class="fu">min_n</span>(),</span>
<span id="cb142-1521"><a href="http://localhost:3527/#cb142-1521" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tree_depth</span>(),</span>
<span id="cb142-1522"><a href="http://localhost:3527/#cb142-1522" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">5</span></span>
<span id="cb142-1523"><a href="http://localhost:3527/#cb142-1523" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb142-1524"><a href="http://localhost:3527/#cb142-1524" aria-hidden="true" tabindex="-1"></a>xgboost_grid</span>
<span id="cb142-1525"><a href="http://localhost:3527/#cb142-1525" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1526"><a href="http://localhost:3527/#cb142-1526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1527"><a href="http://localhost:3527/#cb142-1527" aria-hidden="true" tabindex="-1"></a>In total 125 different models with different hyperparameters were specified.</span>
<span id="cb142-1528"><a href="http://localhost:3527/#cb142-1528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1529"><a href="http://localhost:3527/#cb142-1529" aria-hidden="true" tabindex="-1"></a>Everything is ready to tune. <span class="in">`tune_grid`</span> can be used to fit models for all different hyperparameters.</span>
<span id="cb142-1530"><a href="http://localhost:3527/#cb142-1530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1531"><a href="http://localhost:3527/#cb142-1531" aria-hidden="true" tabindex="-1"></a>Define the workflow with the model and recipe.</span>
<span id="cb142-1532"><a href="http://localhost:3527/#cb142-1532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1533"><a href="http://localhost:3527/#cb142-1533" aria-hidden="true" tabindex="-1"></a><span class="in">```{r workflow_xboost_3}</span></span>
<span id="cb142-1534"><a href="http://localhost:3527/#cb142-1534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1535"><a href="http://localhost:3527/#cb142-1535" aria-hidden="true" tabindex="-1"></a>xgb_workflow_3 <span class="ot">&lt;-</span></span>
<span id="cb142-1536"><a href="http://localhost:3527/#cb142-1536" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb142-1537"><a href="http://localhost:3527/#cb142-1537" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb142-1538"><a href="http://localhost:3527/#cb142-1538" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(xgb_spec_3)</span>
<span id="cb142-1539"><a href="http://localhost:3527/#cb142-1539" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1540"><a href="http://localhost:3527/#cb142-1540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1541"><a href="http://localhost:3527/#cb142-1541" aria-hidden="true" tabindex="-1"></a>Calculate the results with tune_grid.</span>
<span id="cb142-1542"><a href="http://localhost:3527/#cb142-1542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1543"><a href="http://localhost:3527/#cb142-1543" aria-hidden="true" tabindex="-1"></a><span class="in">```{r res_xgboost_3}</span></span>
<span id="cb142-1544"><a href="http://localhost:3527/#cb142-1544" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb142-1545"><a href="http://localhost:3527/#cb142-1545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1546"><a href="http://localhost:3527/#cb142-1546" aria-hidden="true" tabindex="-1"></a>xgb_res_3 <span class="ot">&lt;-</span></span>
<span id="cb142-1547"><a href="http://localhost:3527/#cb142-1547" aria-hidden="true" tabindex="-1"></a>  xgb_workflow_3 <span class="sc">%&gt;%</span></span>
<span id="cb142-1548"><a href="http://localhost:3527/#cb142-1548" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(</span>
<span id="cb142-1549"><a href="http://localhost:3527/#cb142-1549" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb142-1550"><a href="http://localhost:3527/#cb142-1550" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid =</span> xgboost_grid,</span>
<span id="cb142-1551"><a href="http://localhost:3527/#cb142-1551" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1552"><a href="http://localhost:3527/#cb142-1552" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb142-1553"><a href="http://localhost:3527/#cb142-1553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1554"><a href="http://localhost:3527/#cb142-1554" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1555"><a href="http://localhost:3527/#cb142-1555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1556"><a href="http://localhost:3527/#cb142-1556" aria-hidden="true" tabindex="-1"></a>The results of this can be filtered so that only the best 5 shall be displayed:</span>
<span id="cb142-1557"><a href="http://localhost:3527/#cb142-1557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1558"><a href="http://localhost:3527/#cb142-1558" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xgboost_best_5_hyperpara}</span></span>
<span id="cb142-1559"><a href="http://localhost:3527/#cb142-1559" aria-hidden="true" tabindex="-1"></a>xgb_res_3 <span class="sc">%&gt;%</span></span>
<span id="cb142-1560"><a href="http://localhost:3527/#cb142-1560" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb142-1561"><a href="http://localhost:3527/#cb142-1561" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1562"><a href="http://localhost:3527/#cb142-1562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1563"><a href="http://localhost:3527/#cb142-1563" aria-hidden="true" tabindex="-1"></a>Moreover a selection for the best tree can be made. With that the single set with the best hyperparameters is selected:</span>
<span id="cb142-1564"><a href="http://localhost:3527/#cb142-1564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1565"><a href="http://localhost:3527/#cb142-1565" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xgboost_best}</span></span>
<span id="cb142-1566"><a href="http://localhost:3527/#cb142-1566" aria-hidden="true" tabindex="-1"></a>xgboost_best <span class="ot">&lt;-</span> xgb_res_3 <span class="sc">%&gt;%</span></span>
<span id="cb142-1567"><a href="http://localhost:3527/#cb142-1567" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb142-1568"><a href="http://localhost:3527/#cb142-1568" aria-hidden="true" tabindex="-1"></a>xgboost_best</span>
<span id="cb142-1569"><a href="http://localhost:3527/#cb142-1569" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1570"><a href="http://localhost:3527/#cb142-1570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1571"><a href="http://localhost:3527/#cb142-1571" aria-hidden="true" tabindex="-1"></a>The hyper parameter optimization with the tune package increased the RMSE a lot compared to the initial model. It has also increased to the manual selected hyper parameters.</span>
<span id="cb142-1572"><a href="http://localhost:3527/#cb142-1572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1573"><a href="http://localhost:3527/#cb142-1573" aria-hidden="true" tabindex="-1"></a>But it has to be said that I am skeptical regarding the selected best hyper parameters... Tree_depth of one and a min_n of two do not seem to be robust for new data... Probably the model is overfitting.</span>
<span id="cb142-1574"><a href="http://localhost:3527/#cb142-1574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1575"><a href="http://localhost:3527/#cb142-1575" aria-hidden="true" tabindex="-1"></a><span class="fu">### Linear regression</span></span>
<span id="cb142-1576"><a href="http://localhost:3527/#cb142-1576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1577"><a href="http://localhost:3527/#cb142-1577" aria-hidden="true" tabindex="-1"></a>For the Linear Regression model the following hyper parameters shall be adapted:</span>
<span id="cb142-1578"><a href="http://localhost:3527/#cb142-1578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1579"><a href="http://localhost:3527/#cb142-1579" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Penalty: Amount of regularization - has no default and requires a single numeric value</span>
<span id="cb142-1580"><a href="http://localhost:3527/#cb142-1580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1581"><a href="http://localhost:3527/#cb142-1581" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Mixture: Proportion of lasso penalty - default 1.0</span>
<span id="cb142-1582"><a href="http://localhost:3527/#cb142-1582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1583"><a href="http://localhost:3527/#cb142-1583" aria-hidden="true" tabindex="-1"></a>Source: <span class="co">[</span><span class="ot">Linear regression via glmnet</span><span class="co">](https://parsnip.tidymodels.org/reference/details_linear_reg_glmnet.html)</span></span>
<span id="cb142-1584"><a href="http://localhost:3527/#cb142-1584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1585"><a href="http://localhost:3527/#cb142-1585" aria-hidden="true" tabindex="-1"></a>At first manually the hyper parameters are adapted and the result will be checked.</span>
<span id="cb142-1586"><a href="http://localhost:3527/#cb142-1586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1587"><a href="http://localhost:3527/#cb142-1587" aria-hidden="true" tabindex="-1"></a>First of all the model will be specified:</span>
<span id="cb142-1588"><a href="http://localhost:3527/#cb142-1588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1589"><a href="http://localhost:3527/#cb142-1589" aria-hidden="true" tabindex="-1"></a><span class="in">```{r spec_lin_reg_2}</span></span>
<span id="cb142-1590"><a href="http://localhost:3527/#cb142-1590" aria-hidden="true" tabindex="-1"></a>lin_spec_2 <span class="ot">&lt;-</span> </span>
<span id="cb142-1591"><a href="http://localhost:3527/#cb142-1591" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linear_reg</span>(<span class="at">penalty =</span> <span class="fl">0.3</span>, <span class="at">mixture =</span> <span class="fl">0.7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1592"><a href="http://localhost:3527/#cb142-1592" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1593"><a href="http://localhost:3527/#cb142-1593" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span>
<span id="cb142-1594"><a href="http://localhost:3527/#cb142-1594" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1595"><a href="http://localhost:3527/#cb142-1595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1596"><a href="http://localhost:3527/#cb142-1596" aria-hidden="true" tabindex="-1"></a>Afterwards the new model will be added to the workflow with the created recipe</span>
<span id="cb142-1597"><a href="http://localhost:3527/#cb142-1597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1598"><a href="http://localhost:3527/#cb142-1598" aria-hidden="true" tabindex="-1"></a><span class="in">```{r workflow_lin_reg_2}</span></span>
<span id="cb142-1599"><a href="http://localhost:3527/#cb142-1599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1600"><a href="http://localhost:3527/#cb142-1600" aria-hidden="true" tabindex="-1"></a>lin_workflow_2 <span class="ot">&lt;-</span></span>
<span id="cb142-1601"><a href="http://localhost:3527/#cb142-1601" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb142-1602"><a href="http://localhost:3527/#cb142-1602" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb142-1603"><a href="http://localhost:3527/#cb142-1603" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(lin_spec_2)</span>
<span id="cb142-1604"><a href="http://localhost:3527/#cb142-1604" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1605"><a href="http://localhost:3527/#cb142-1605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1606"><a href="http://localhost:3527/#cb142-1606" aria-hidden="true" tabindex="-1"></a><span class="in">```{r res_lin_reg_2}</span></span>
<span id="cb142-1607"><a href="http://localhost:3527/#cb142-1607" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb142-1608"><a href="http://localhost:3527/#cb142-1608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1609"><a href="http://localhost:3527/#cb142-1609" aria-hidden="true" tabindex="-1"></a>lim_res_2 <span class="ot">&lt;-</span></span>
<span id="cb142-1610"><a href="http://localhost:3527/#cb142-1610" aria-hidden="true" tabindex="-1"></a>  lin_workflow_2 <span class="sc">%&gt;%</span></span>
<span id="cb142-1611"><a href="http://localhost:3527/#cb142-1611" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit_resamples</span>(</span>
<span id="cb142-1612"><a href="http://localhost:3527/#cb142-1612" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb142-1613"><a href="http://localhost:3527/#cb142-1613" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1614"><a href="http://localhost:3527/#cb142-1614" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb142-1615"><a href="http://localhost:3527/#cb142-1615" aria-hidden="true" tabindex="-1"></a>lim_res_2 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1616"><a href="http://localhost:3527/#cb142-1616" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1617"><a href="http://localhost:3527/#cb142-1617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1618"><a href="http://localhost:3527/#cb142-1618" aria-hidden="true" tabindex="-1"></a>The model performance was not improved... Now lets try it with the tune package.</span>
<span id="cb142-1619"><a href="http://localhost:3527/#cb142-1619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1620"><a href="http://localhost:3527/#cb142-1620" aria-hidden="true" tabindex="-1"></a>First of all a new model specification is created. In this the hyperparameters are specified which shall be tuned.</span>
<span id="cb142-1621"><a href="http://localhost:3527/#cb142-1621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1622"><a href="http://localhost:3527/#cb142-1622" aria-hidden="true" tabindex="-1"></a><span class="in">```{r spec_lin_reg_3}</span></span>
<span id="cb142-1623"><a href="http://localhost:3527/#cb142-1623" aria-hidden="true" tabindex="-1"></a>lin_spec_3 <span class="ot">&lt;-</span> </span>
<span id="cb142-1624"><a href="http://localhost:3527/#cb142-1624" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linear_reg</span>(</span>
<span id="cb142-1625"><a href="http://localhost:3527/#cb142-1625" aria-hidden="true" tabindex="-1"></a>    <span class="at">penalty =</span> <span class="fu">tune</span>(),</span>
<span id="cb142-1626"><a href="http://localhost:3527/#cb142-1626" aria-hidden="true" tabindex="-1"></a>    <span class="at">mixture =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1627"><a href="http://localhost:3527/#cb142-1627" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1628"><a href="http://localhost:3527/#cb142-1628" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span>
<span id="cb142-1629"><a href="http://localhost:3527/#cb142-1629" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1630"><a href="http://localhost:3527/#cb142-1630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1631"><a href="http://localhost:3527/#cb142-1631" aria-hidden="true" tabindex="-1"></a>Have a look on the tune spec:</span>
<span id="cb142-1632"><a href="http://localhost:3527/#cb142-1632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1633"><a href="http://localhost:3527/#cb142-1633" aria-hidden="true" tabindex="-1"></a><span class="in">```{r line_reg_tune_spec}</span></span>
<span id="cb142-1634"><a href="http://localhost:3527/#cb142-1634" aria-hidden="true" tabindex="-1"></a>lin_spec_3</span>
<span id="cb142-1635"><a href="http://localhost:3527/#cb142-1635" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1636"><a href="http://localhost:3527/#cb142-1636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1637"><a href="http://localhost:3527/#cb142-1637" aria-hidden="true" tabindex="-1"></a>The <span class="in">`tune()`</span> is like a placeholder. After the tuning process single numeric values are selected for each of the hyper parameter.</span>
<span id="cb142-1638"><a href="http://localhost:3527/#cb142-1638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1639"><a href="http://localhost:3527/#cb142-1639" aria-hidden="true" tabindex="-1"></a>In the next steps several models are trained using resampeled data. Afterwards it is checked which model performs best. For this a grid of values is created:</span>
<span id="cb142-1640"><a href="http://localhost:3527/#cb142-1640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1641"><a href="http://localhost:3527/#cb142-1641" aria-hidden="true" tabindex="-1"></a><span class="in">```{r line_reg_grid}</span></span>
<span id="cb142-1642"><a href="http://localhost:3527/#cb142-1642" aria-hidden="true" tabindex="-1"></a>lin_grid <span class="ot">&lt;-</span> <span class="fu">grid_regular</span>(</span>
<span id="cb142-1643"><a href="http://localhost:3527/#cb142-1643" aria-hidden="true" tabindex="-1"></a>  <span class="fu">penalty</span>(),</span>
<span id="cb142-1644"><a href="http://localhost:3527/#cb142-1644" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mixture</span>(),</span>
<span id="cb142-1645"><a href="http://localhost:3527/#cb142-1645" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">5</span></span>
<span id="cb142-1646"><a href="http://localhost:3527/#cb142-1646" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb142-1647"><a href="http://localhost:3527/#cb142-1647" aria-hidden="true" tabindex="-1"></a>lin_grid</span>
<span id="cb142-1648"><a href="http://localhost:3527/#cb142-1648" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1649"><a href="http://localhost:3527/#cb142-1649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1650"><a href="http://localhost:3527/#cb142-1650" aria-hidden="true" tabindex="-1"></a>In total 25 different models with different hyperparameters were specified.</span>
<span id="cb142-1651"><a href="http://localhost:3527/#cb142-1651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1652"><a href="http://localhost:3527/#cb142-1652" aria-hidden="true" tabindex="-1"></a>Everything is ready to tune. <span class="in">`tune_grid`</span> can be used to fit models for all different hyperparameters.</span>
<span id="cb142-1653"><a href="http://localhost:3527/#cb142-1653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1654"><a href="http://localhost:3527/#cb142-1654" aria-hidden="true" tabindex="-1"></a>Define the workflow with the model and recipe.</span>
<span id="cb142-1655"><a href="http://localhost:3527/#cb142-1655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1656"><a href="http://localhost:3527/#cb142-1656" aria-hidden="true" tabindex="-1"></a><span class="in">```{r workflow_lin_reg_3}</span></span>
<span id="cb142-1657"><a href="http://localhost:3527/#cb142-1657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1658"><a href="http://localhost:3527/#cb142-1658" aria-hidden="true" tabindex="-1"></a>lin_workflow_3 <span class="ot">&lt;-</span></span>
<span id="cb142-1659"><a href="http://localhost:3527/#cb142-1659" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb142-1660"><a href="http://localhost:3527/#cb142-1660" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb142-1661"><a href="http://localhost:3527/#cb142-1661" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(lin_spec_3)</span>
<span id="cb142-1662"><a href="http://localhost:3527/#cb142-1662" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1663"><a href="http://localhost:3527/#cb142-1663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1664"><a href="http://localhost:3527/#cb142-1664" aria-hidden="true" tabindex="-1"></a>Calculate the results with tune_grid.</span>
<span id="cb142-1665"><a href="http://localhost:3527/#cb142-1665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1666"><a href="http://localhost:3527/#cb142-1666" aria-hidden="true" tabindex="-1"></a><span class="in">```{r res_lin_reg_3}</span></span>
<span id="cb142-1667"><a href="http://localhost:3527/#cb142-1667" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb142-1668"><a href="http://localhost:3527/#cb142-1668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1669"><a href="http://localhost:3527/#cb142-1669" aria-hidden="true" tabindex="-1"></a>lin_res_3 <span class="ot">&lt;-</span></span>
<span id="cb142-1670"><a href="http://localhost:3527/#cb142-1670" aria-hidden="true" tabindex="-1"></a>  lin_workflow_3 <span class="sc">%&gt;%</span></span>
<span id="cb142-1671"><a href="http://localhost:3527/#cb142-1671" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(</span>
<span id="cb142-1672"><a href="http://localhost:3527/#cb142-1672" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb142-1673"><a href="http://localhost:3527/#cb142-1673" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid =</span> lin_grid,</span>
<span id="cb142-1674"><a href="http://localhost:3527/#cb142-1674" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1675"><a href="http://localhost:3527/#cb142-1675" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb142-1676"><a href="http://localhost:3527/#cb142-1676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1677"><a href="http://localhost:3527/#cb142-1677" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1678"><a href="http://localhost:3527/#cb142-1678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1679"><a href="http://localhost:3527/#cb142-1679" aria-hidden="true" tabindex="-1"></a>The results of this can be filtered so that only the best 5 shall be displayed:</span>
<span id="cb142-1680"><a href="http://localhost:3527/#cb142-1680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1681"><a href="http://localhost:3527/#cb142-1681" aria-hidden="true" tabindex="-1"></a><span class="in">```{r lin_reg_best_5_hyperpara}</span></span>
<span id="cb142-1682"><a href="http://localhost:3527/#cb142-1682" aria-hidden="true" tabindex="-1"></a>lin_res_3 <span class="sc">%&gt;%</span></span>
<span id="cb142-1683"><a href="http://localhost:3527/#cb142-1683" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb142-1684"><a href="http://localhost:3527/#cb142-1684" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1685"><a href="http://localhost:3527/#cb142-1685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1686"><a href="http://localhost:3527/#cb142-1686" aria-hidden="true" tabindex="-1"></a>Moreover a selection for the best linear model can be made. With that the single set with the best hyper parameters is selected:</span>
<span id="cb142-1687"><a href="http://localhost:3527/#cb142-1687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1688"><a href="http://localhost:3527/#cb142-1688" aria-hidden="true" tabindex="-1"></a><span class="in">```{r lin_reg_best}</span></span>
<span id="cb142-1689"><a href="http://localhost:3527/#cb142-1689" aria-hidden="true" tabindex="-1"></a>lin_best <span class="ot">&lt;-</span> lin_res_3 <span class="sc">%&gt;%</span></span>
<span id="cb142-1690"><a href="http://localhost:3527/#cb142-1690" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb142-1691"><a href="http://localhost:3527/#cb142-1691" aria-hidden="true" tabindex="-1"></a>lin_best</span>
<span id="cb142-1692"><a href="http://localhost:3527/#cb142-1692" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1693"><a href="http://localhost:3527/#cb142-1693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1694"><a href="http://localhost:3527/#cb142-1694" aria-hidden="true" tabindex="-1"></a>The hyper parameter optimization with the tune package increased the RMSE only by a minimum compared to the initial model. For the linear regression almost no improvement was possible.</span>
<span id="cb142-1695"><a href="http://localhost:3527/#cb142-1695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1696"><a href="http://localhost:3527/#cb142-1696" aria-hidden="true" tabindex="-1"></a>The model performance is similar to the xgboost model which was tuned with the tune package.</span>
<span id="cb142-1697"><a href="http://localhost:3527/#cb142-1697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1698"><a href="http://localhost:3527/#cb142-1698" aria-hidden="true" tabindex="-1"></a><span class="fu">### Single Layer Neural Network</span></span>
<span id="cb142-1699"><a href="http://localhost:3527/#cb142-1699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1700"><a href="http://localhost:3527/#cb142-1700" aria-hidden="true" tabindex="-1"></a>For the Single Layer Neural Network the following hyperparameters shall be adapted:</span>
<span id="cb142-1701"><a href="http://localhost:3527/#cb142-1701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1702"><a href="http://localhost:3527/#cb142-1702" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>hidden_units: #Hidden units - default 0</span>
<span id="cb142-1703"><a href="http://localhost:3527/#cb142-1703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1704"><a href="http://localhost:3527/#cb142-1704" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Penalty: Amount of regularization - default 0.0</span>
<span id="cb142-1705"><a href="http://localhost:3527/#cb142-1705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1706"><a href="http://localhost:3527/#cb142-1706" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>epochs: Amount of epochs for training - default 100L</span>
<span id="cb142-1707"><a href="http://localhost:3527/#cb142-1707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1708"><a href="http://localhost:3527/#cb142-1708" aria-hidden="true" tabindex="-1"></a>Source: <span class="co">[</span><span class="ot">Multilayer perceptron via nnet</span><span class="co">](https://parsnip.tidymodels.org/reference/details_mlp_nnet.html)</span></span>
<span id="cb142-1709"><a href="http://localhost:3527/#cb142-1709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1710"><a href="http://localhost:3527/#cb142-1710" aria-hidden="true" tabindex="-1"></a>At first manually the hyper parameters are adapted and the result will be checked.</span>
<span id="cb142-1711"><a href="http://localhost:3527/#cb142-1711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1712"><a href="http://localhost:3527/#cb142-1712" aria-hidden="true" tabindex="-1"></a>First of all the model will be specified:</span>
<span id="cb142-1713"><a href="http://localhost:3527/#cb142-1713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1714"><a href="http://localhost:3527/#cb142-1714" aria-hidden="true" tabindex="-1"></a><span class="in">```{r spec_neural_2}</span></span>
<span id="cb142-1715"><a href="http://localhost:3527/#cb142-1715" aria-hidden="true" tabindex="-1"></a>neural_spec_2 <span class="ot">&lt;-</span> </span>
<span id="cb142-1716"><a href="http://localhost:3527/#cb142-1716" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mlp</span>(</span>
<span id="cb142-1717"><a href="http://localhost:3527/#cb142-1717" aria-hidden="true" tabindex="-1"></a>    <span class="at">hidden_units =</span> <span class="dv">5</span>,</span>
<span id="cb142-1718"><a href="http://localhost:3527/#cb142-1718" aria-hidden="true" tabindex="-1"></a>    <span class="at">penalty =</span> <span class="fl">0.1</span>,</span>
<span id="cb142-1719"><a href="http://localhost:3527/#cb142-1719" aria-hidden="true" tabindex="-1"></a>    <span class="at">epochs =</span> <span class="dv">200</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1720"><a href="http://localhost:3527/#cb142-1720" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"nnet"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1721"><a href="http://localhost:3527/#cb142-1721" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span>
<span id="cb142-1722"><a href="http://localhost:3527/#cb142-1722" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1723"><a href="http://localhost:3527/#cb142-1723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1724"><a href="http://localhost:3527/#cb142-1724" aria-hidden="true" tabindex="-1"></a>Afterwards the new model will be added to the workflow with the created recipe</span>
<span id="cb142-1725"><a href="http://localhost:3527/#cb142-1725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1726"><a href="http://localhost:3527/#cb142-1726" aria-hidden="true" tabindex="-1"></a><span class="in">```{r workflow_neural_2}</span></span>
<span id="cb142-1727"><a href="http://localhost:3527/#cb142-1727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1728"><a href="http://localhost:3527/#cb142-1728" aria-hidden="true" tabindex="-1"></a>neural_workflow_2 <span class="ot">&lt;-</span></span>
<span id="cb142-1729"><a href="http://localhost:3527/#cb142-1729" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb142-1730"><a href="http://localhost:3527/#cb142-1730" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb142-1731"><a href="http://localhost:3527/#cb142-1731" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(neural_spec_2)</span>
<span id="cb142-1732"><a href="http://localhost:3527/#cb142-1732" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1733"><a href="http://localhost:3527/#cb142-1733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1734"><a href="http://localhost:3527/#cb142-1734" aria-hidden="true" tabindex="-1"></a><span class="in">```{r res_neural_2}</span></span>
<span id="cb142-1735"><a href="http://localhost:3527/#cb142-1735" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb142-1736"><a href="http://localhost:3527/#cb142-1736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1737"><a href="http://localhost:3527/#cb142-1737" aria-hidden="true" tabindex="-1"></a>neural_res_2 <span class="ot">&lt;-</span></span>
<span id="cb142-1738"><a href="http://localhost:3527/#cb142-1738" aria-hidden="true" tabindex="-1"></a>  neural_workflow_2 <span class="sc">%&gt;%</span></span>
<span id="cb142-1739"><a href="http://localhost:3527/#cb142-1739" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit_resamples</span>(</span>
<span id="cb142-1740"><a href="http://localhost:3527/#cb142-1740" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb142-1741"><a href="http://localhost:3527/#cb142-1741" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1742"><a href="http://localhost:3527/#cb142-1742" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb142-1743"><a href="http://localhost:3527/#cb142-1743" aria-hidden="true" tabindex="-1"></a>neural_res_2 <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>(<span class="at">summarize =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1744"><a href="http://localhost:3527/#cb142-1744" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1745"><a href="http://localhost:3527/#cb142-1745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1746"><a href="http://localhost:3527/#cb142-1746" aria-hidden="true" tabindex="-1"></a>The model performance improved a bit the hyper parameters. The RMSE score could be reduced by 0.3. Now lets try it with the tune package.</span>
<span id="cb142-1747"><a href="http://localhost:3527/#cb142-1747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1748"><a href="http://localhost:3527/#cb142-1748" aria-hidden="true" tabindex="-1"></a>First of all a new model specification is created. In this the hyperparameters are specified which shall be tuned.</span>
<span id="cb142-1749"><a href="http://localhost:3527/#cb142-1749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1750"><a href="http://localhost:3527/#cb142-1750" aria-hidden="true" tabindex="-1"></a><span class="in">```{r spec_neural_3}</span></span>
<span id="cb142-1751"><a href="http://localhost:3527/#cb142-1751" aria-hidden="true" tabindex="-1"></a>neural_spec_3 <span class="ot">&lt;-</span> </span>
<span id="cb142-1752"><a href="http://localhost:3527/#cb142-1752" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mlp</span>(</span>
<span id="cb142-1753"><a href="http://localhost:3527/#cb142-1753" aria-hidden="true" tabindex="-1"></a>    <span class="at">hidden_units =</span> <span class="fu">tune</span>(),</span>
<span id="cb142-1754"><a href="http://localhost:3527/#cb142-1754" aria-hidden="true" tabindex="-1"></a>    <span class="at">penalty =</span> <span class="fu">tune</span>(),</span>
<span id="cb142-1755"><a href="http://localhost:3527/#cb142-1755" aria-hidden="true" tabindex="-1"></a>    <span class="at">epochs =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1756"><a href="http://localhost:3527/#cb142-1756" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"nnet"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-1757"><a href="http://localhost:3527/#cb142-1757" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) </span>
<span id="cb142-1758"><a href="http://localhost:3527/#cb142-1758" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1759"><a href="http://localhost:3527/#cb142-1759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1760"><a href="http://localhost:3527/#cb142-1760" aria-hidden="true" tabindex="-1"></a>Have a look on the tune spec:</span>
<span id="cb142-1761"><a href="http://localhost:3527/#cb142-1761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1762"><a href="http://localhost:3527/#cb142-1762" aria-hidden="true" tabindex="-1"></a><span class="in">```{r neural_tune_spec}</span></span>
<span id="cb142-1763"><a href="http://localhost:3527/#cb142-1763" aria-hidden="true" tabindex="-1"></a>neural_spec_3</span>
<span id="cb142-1764"><a href="http://localhost:3527/#cb142-1764" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1765"><a href="http://localhost:3527/#cb142-1765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1766"><a href="http://localhost:3527/#cb142-1766" aria-hidden="true" tabindex="-1"></a>The <span class="in">`tune()`</span> is like a placeholder. After the tuning process single numeric values are selected for each of the hyper parameter.</span>
<span id="cb142-1767"><a href="http://localhost:3527/#cb142-1767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1768"><a href="http://localhost:3527/#cb142-1768" aria-hidden="true" tabindex="-1"></a>In the next steps several models are trained using resampelled data. Afterwards it is checked which model performs best. For this a grid of values is created:</span>
<span id="cb142-1769"><a href="http://localhost:3527/#cb142-1769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1770"><a href="http://localhost:3527/#cb142-1770" aria-hidden="true" tabindex="-1"></a><span class="in">```{r neural_grid}</span></span>
<span id="cb142-1771"><a href="http://localhost:3527/#cb142-1771" aria-hidden="true" tabindex="-1"></a>neural_grid <span class="ot">&lt;-</span> <span class="fu">grid_regular</span>(</span>
<span id="cb142-1772"><a href="http://localhost:3527/#cb142-1772" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hidden_units</span>(),</span>
<span id="cb142-1773"><a href="http://localhost:3527/#cb142-1773" aria-hidden="true" tabindex="-1"></a>  <span class="fu">penalty</span>(),</span>
<span id="cb142-1774"><a href="http://localhost:3527/#cb142-1774" aria-hidden="true" tabindex="-1"></a>  <span class="fu">epochs</span>(),</span>
<span id="cb142-1775"><a href="http://localhost:3527/#cb142-1775" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">5</span></span>
<span id="cb142-1776"><a href="http://localhost:3527/#cb142-1776" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb142-1777"><a href="http://localhost:3527/#cb142-1777" aria-hidden="true" tabindex="-1"></a>neural_grid</span>
<span id="cb142-1778"><a href="http://localhost:3527/#cb142-1778" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1779"><a href="http://localhost:3527/#cb142-1779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1780"><a href="http://localhost:3527/#cb142-1780" aria-hidden="true" tabindex="-1"></a>In total 125 different models with different hyperparameters were specified.</span>
<span id="cb142-1781"><a href="http://localhost:3527/#cb142-1781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1782"><a href="http://localhost:3527/#cb142-1782" aria-hidden="true" tabindex="-1"></a>Everything is ready to tune. <span class="in">`tune_grid`</span> can be used to fit models for all different hyperparameters.</span>
<span id="cb142-1783"><a href="http://localhost:3527/#cb142-1783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1784"><a href="http://localhost:3527/#cb142-1784" aria-hidden="true" tabindex="-1"></a>Define the workflow with the model and recipe.</span>
<span id="cb142-1785"><a href="http://localhost:3527/#cb142-1785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1786"><a href="http://localhost:3527/#cb142-1786" aria-hidden="true" tabindex="-1"></a><span class="in">```{r workflow_neural_3}</span></span>
<span id="cb142-1787"><a href="http://localhost:3527/#cb142-1787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1788"><a href="http://localhost:3527/#cb142-1788" aria-hidden="true" tabindex="-1"></a>neural_workflow_3 <span class="ot">&lt;-</span></span>
<span id="cb142-1789"><a href="http://localhost:3527/#cb142-1789" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb142-1790"><a href="http://localhost:3527/#cb142-1790" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(exam_rec) <span class="sc">%&gt;%</span></span>
<span id="cb142-1791"><a href="http://localhost:3527/#cb142-1791" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(neural_spec_3)</span>
<span id="cb142-1792"><a href="http://localhost:3527/#cb142-1792" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1793"><a href="http://localhost:3527/#cb142-1793" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1794"><a href="http://localhost:3527/#cb142-1794" aria-hidden="true" tabindex="-1"></a>Calculate the results with tune_grid.</span>
<span id="cb142-1795"><a href="http://localhost:3527/#cb142-1795" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1796"><a href="http://localhost:3527/#cb142-1796" aria-hidden="true" tabindex="-1"></a><span class="in">```{r res_neural_3}</span></span>
<span id="cb142-1797"><a href="http://localhost:3527/#cb142-1797" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb142-1798"><a href="http://localhost:3527/#cb142-1798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1799"><a href="http://localhost:3527/#cb142-1799" aria-hidden="true" tabindex="-1"></a>neural_res_3 <span class="ot">&lt;-</span></span>
<span id="cb142-1800"><a href="http://localhost:3527/#cb142-1800" aria-hidden="true" tabindex="-1"></a>  neural_workflow_3 <span class="sc">%&gt;%</span></span>
<span id="cb142-1801"><a href="http://localhost:3527/#cb142-1801" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(</span>
<span id="cb142-1802"><a href="http://localhost:3527/#cb142-1802" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> cv_folds,</span>
<span id="cb142-1803"><a href="http://localhost:3527/#cb142-1803" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid =</span> neural_grid,</span>
<span id="cb142-1804"><a href="http://localhost:3527/#cb142-1804" aria-hidden="true" tabindex="-1"></a>                <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb142-1805"><a href="http://localhost:3527/#cb142-1805" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb142-1806"><a href="http://localhost:3527/#cb142-1806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1807"><a href="http://localhost:3527/#cb142-1807" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1808"><a href="http://localhost:3527/#cb142-1808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1809"><a href="http://localhost:3527/#cb142-1809" aria-hidden="true" tabindex="-1"></a>The results of this can be filtered so that only the best 5 shall be displayed:</span>
<span id="cb142-1810"><a href="http://localhost:3527/#cb142-1810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1811"><a href="http://localhost:3527/#cb142-1811" aria-hidden="true" tabindex="-1"></a><span class="in">```{r neural_best_5_hyperpara}</span></span>
<span id="cb142-1812"><a href="http://localhost:3527/#cb142-1812" aria-hidden="true" tabindex="-1"></a>neural_res_3 <span class="sc">%&gt;%</span></span>
<span id="cb142-1813"><a href="http://localhost:3527/#cb142-1813" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb142-1814"><a href="http://localhost:3527/#cb142-1814" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1815"><a href="http://localhost:3527/#cb142-1815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1816"><a href="http://localhost:3527/#cb142-1816" aria-hidden="true" tabindex="-1"></a>Moreover a selection for the best result can be made. With that the single set with the best hyperparameters is selected:</span>
<span id="cb142-1817"><a href="http://localhost:3527/#cb142-1817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1818"><a href="http://localhost:3527/#cb142-1818" aria-hidden="true" tabindex="-1"></a><span class="in">```{r neural_best}</span></span>
<span id="cb142-1819"><a href="http://localhost:3527/#cb142-1819" aria-hidden="true" tabindex="-1"></a>neural_best <span class="ot">&lt;-</span> neural_res_3 <span class="sc">%&gt;%</span></span>
<span id="cb142-1820"><a href="http://localhost:3527/#cb142-1820" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb142-1821"><a href="http://localhost:3527/#cb142-1821" aria-hidden="true" tabindex="-1"></a>neural_best</span>
<span id="cb142-1822"><a href="http://localhost:3527/#cb142-1822" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1823"><a href="http://localhost:3527/#cb142-1823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1824"><a href="http://localhost:3527/#cb142-1824" aria-hidden="true" tabindex="-1"></a>The hyper parameter optimization with the tune package increased the RMSE a lot compared to the initial model. It has also increased to the manual selected hyper parameters.</span>
<span id="cb142-1825"><a href="http://localhost:3527/#cb142-1825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1826"><a href="http://localhost:3527/#cb142-1826" aria-hidden="true" tabindex="-1"></a>The best models (based on lowest RMSE) are:</span>
<span id="cb142-1827"><a href="http://localhost:3527/#cb142-1827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1828"><a href="http://localhost:3527/#cb142-1828" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>RMSE: 12.10604 - Linear Regression</span>
<span id="cb142-1829"><a href="http://localhost:3527/#cb142-1829" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>RMSE: 12.10782 - XGBoost</span>
<span id="cb142-1830"><a href="http://localhost:3527/#cb142-1830" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>RMSE: 12.13196 - Neural Network</span>
<span id="cb142-1831"><a href="http://localhost:3527/#cb142-1831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1832"><a href="http://localhost:3527/#cb142-1832" aria-hidden="true" tabindex="-1"></a>All models have very similar performance metrics and the differences are minor. But the RMSE score is still quite high and the R squared quite low<span class="sc">\.</span>.. Probably the available (only categorical) variables are not that good for predicting the performance of the students in the exams. This was also seen in the previous chapters with the R squared score which was only slightly above 0.25.</span>
<span id="cb142-1833"><a href="http://localhost:3527/#cb142-1833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1834"><a href="http://localhost:3527/#cb142-1834" aria-hidden="true" tabindex="-1"></a>In the next step the best model will be fitted a last time on the training data before the deployment phase can be started.</span>
<span id="cb142-1835"><a href="http://localhost:3527/#cb142-1835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1836"><a href="http://localhost:3527/#cb142-1836" aria-hidden="true" tabindex="-1"></a>For the final model the Linear regression models is chosen as it has one the one hand the best results and on the other hand the model is quite simple and is well suited for predicting linear relationships.</span>
<span id="cb142-1837"><a href="http://localhost:3527/#cb142-1837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1838"><a href="http://localhost:3527/#cb142-1838" aria-hidden="true" tabindex="-1"></a><span class="fu"># Deployment</span></span>
<span id="cb142-1839"><a href="http://localhost:3527/#cb142-1839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1840"><a href="http://localhost:3527/#cb142-1840" aria-hidden="true" tabindex="-1"></a>Within this chapter three different topics shall be made. On the one hand the model deployment via ventiver shall be made. For this the model shall be validated, deployed, etc...</span>
<span id="cb142-1841"><a href="http://localhost:3527/#cb142-1841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1842"><a href="http://localhost:3527/#cb142-1842" aria-hidden="true" tabindex="-1"></a>Moreover, a dashbaord shall be created which displays the dataset and in which different visualizations can be made. It would be also possible to add there the model and make predictions within that Dashboard, but I do prefer to also have a look in the other tools instead of going very deep only in one tool. With that I am familiar with more tools and can decide in future which fits best for certain problems. The code for the dashboard is in a separate folder.</span>
<span id="cb142-1843"><a href="http://localhost:3527/#cb142-1843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1844"><a href="http://localhost:3527/#cb142-1844" aria-hidden="true" tabindex="-1"></a>As third target of this chapter MLFlow shall be used for modeling, model monitoring etc.</span>
<span id="cb142-1845"><a href="http://localhost:3527/#cb142-1845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1846"><a href="http://localhost:3527/#cb142-1846" aria-hidden="true" tabindex="-1"></a><span class="fu">## Validate model</span></span>
<span id="cb142-1847"><a href="http://localhost:3527/#cb142-1847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1848"><a href="http://localhost:3527/#cb142-1848" aria-hidden="true" tabindex="-1"></a>In this chapter the best model from the modeling will be fitted on all training data instead of only the split cross-validation data set. The final fitted model can be deployed and validated on the test data.</span>
<span id="cb142-1849"><a href="http://localhost:3527/#cb142-1849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1850"><a href="http://localhost:3527/#cb142-1850" aria-hidden="true" tabindex="-1"></a>Add the model with the best results to the defined workflow:</span>
<span id="cb142-1851"><a href="http://localhost:3527/#cb142-1851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1852"><a href="http://localhost:3527/#cb142-1852" aria-hidden="true" tabindex="-1"></a><span class="in">```{r workflow_best_model}</span></span>
<span id="cb142-1853"><a href="http://localhost:3527/#cb142-1853" aria-hidden="true" tabindex="-1"></a>workflow_best_model <span class="ot">&lt;-</span></span>
<span id="cb142-1854"><a href="http://localhost:3527/#cb142-1854" aria-hidden="true" tabindex="-1"></a>  lin_workflow_3 <span class="sc">%&gt;%</span></span>
<span id="cb142-1855"><a href="http://localhost:3527/#cb142-1855" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(lin_best)</span>
<span id="cb142-1856"><a href="http://localhost:3527/#cb142-1856" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1857"><a href="http://localhost:3527/#cb142-1857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1858"><a href="http://localhost:3527/#cb142-1858" aria-hidden="true" tabindex="-1"></a><span class="in">```{r model_last_fit}</span></span>
<span id="cb142-1859"><a href="http://localhost:3527/#cb142-1859" aria-hidden="true" tabindex="-1"></a>last_fit_model <span class="ot">&lt;-</span> workflow_best_model <span class="sc">%&gt;%</span> </span>
<span id="cb142-1860"><a href="http://localhost:3527/#cb142-1860" aria-hidden="true" tabindex="-1"></a>  <span class="fu">last_fit</span>(data_split)</span>
<span id="cb142-1861"><a href="http://localhost:3527/#cb142-1861" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1862"><a href="http://localhost:3527/#cb142-1862" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1865"><a href="http://localhost:3527/#cb142-1865" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb142-1866"><a href="http://localhost:3527/#cb142-1866" aria-hidden="true" tabindex="-1"></a>last_fit_model <span class="sc">%&gt;%</span></span>
<span id="cb142-1867"><a href="http://localhost:3527/#cb142-1867" aria-hidden="true" tabindex="-1"></a>    <span class="fu">collect_metrics</span>()</span>
<span id="cb142-1868"><a href="http://localhost:3527/#cb142-1868" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1869"><a href="http://localhost:3527/#cb142-1869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1870"><a href="http://localhost:3527/#cb142-1870" aria-hidden="true" tabindex="-1"></a>The performance of the model on test data is worse than it was on the training data. The RMSE metric increased from 12.1 to 12.77. Probably the model was overfitted a bit on the training data. But the RMSE score is still better than for certain created models in the Modelling phase (on training data).</span>
<span id="cb142-1871"><a href="http://localhost:3527/#cb142-1871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1872"><a href="http://localhost:3527/#cb142-1872" aria-hidden="true" tabindex="-1"></a>The R squared value is really low compared to the defined metrics at the project begin. It can be said that all created models are not fulfilling the defined metrics for a successful project. Nevertheless the model will be used for the deployment.</span>
<span id="cb142-1873"><a href="http://localhost:3527/#cb142-1873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1874"><a href="http://localhost:3527/#cb142-1874" aria-hidden="true" tabindex="-1"></a>**Compare the model with a simple model which only predicts the mean:**</span>
<span id="cb142-1875"><a href="http://localhost:3527/#cb142-1875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1876"><a href="http://localhost:3527/#cb142-1876" aria-hidden="true" tabindex="-1"></a><span class="in">```{r add_mean_column}</span></span>
<span id="cb142-1877"><a href="http://localhost:3527/#cb142-1877" aria-hidden="true" tabindex="-1"></a>mean_model_data <span class="ot">&lt;-</span> train_data <span class="sc">%&gt;%</span></span>
<span id="cb142-1878"><a href="http://localhost:3527/#cb142-1878" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">mean =</span> <span class="fu">mean</span>(avg_score))</span>
<span id="cb142-1879"><a href="http://localhost:3527/#cb142-1879" aria-hidden="true" tabindex="-1"></a>mean_model_data</span>
<span id="cb142-1880"><a href="http://localhost:3527/#cb142-1880" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1881"><a href="http://localhost:3527/#cb142-1881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1882"><a href="http://localhost:3527/#cb142-1882" aria-hidden="true" tabindex="-1"></a>Now lets see how this prediction is performing on the available data.</span>
<span id="cb142-1883"><a href="http://localhost:3527/#cb142-1883" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1884"><a href="http://localhost:3527/#cb142-1884" aria-hidden="true" tabindex="-1"></a><span class="in">```{r RMSE_mean_model}</span></span>
<span id="cb142-1885"><a href="http://localhost:3527/#cb142-1885" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Metrics)</span>
<span id="cb142-1886"><a href="http://localhost:3527/#cb142-1886" aria-hidden="true" tabindex="-1"></a><span class="fu">RMSE</span>(mean_model_data<span class="sc">$</span>avg_score, mean_model_data<span class="sc">$</span>mean)</span>
<span id="cb142-1887"><a href="http://localhost:3527/#cb142-1887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1888"><a href="http://localhost:3527/#cb142-1888" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1889"><a href="http://localhost:3527/#cb142-1889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1890"><a href="http://localhost:3527/#cb142-1890" aria-hidden="true" tabindex="-1"></a>The RMSE score of a model which is only predicting the mean is worse than the created model. Even thought the difference is not that big...</span>
<span id="cb142-1891"><a href="http://localhost:3527/#cb142-1891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1892"><a href="http://localhost:3527/#cb142-1892" aria-hidden="true" tabindex="-1"></a>As the created model is better than a simple model which only predicts the mean the project can continue and the deployment can be made.</span>
<span id="cb142-1893"><a href="http://localhost:3527/#cb142-1893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1894"><a href="http://localhost:3527/#cb142-1894" aria-hidden="true" tabindex="-1"></a>Atleast the model is better than this simple one for comparison. If the set target was not achieved, this still shows that the created model is atleast better then only a mean prediction.</span>
<span id="cb142-1895"><a href="http://localhost:3527/#cb142-1895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1896"><a href="http://localhost:3527/#cb142-1896" aria-hidden="true" tabindex="-1"></a><span class="fu">## Deploy model</span></span>
<span id="cb142-1897"><a href="http://localhost:3527/#cb142-1897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1898"><a href="http://localhost:3527/#cb142-1898" aria-hidden="true" tabindex="-1"></a>Sources for Model deployment:</span>
<span id="cb142-1899"><a href="http://localhost:3527/#cb142-1899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1900"><a href="http://localhost:3527/#cb142-1900" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Youtube Posit: MLOps with vetiver in Python and R</span><span class="co">](https://www.youtube.com/watch?v=oFQANK13-k4)</span></span>
<span id="cb142-1901"><a href="http://localhost:3527/#cb142-1901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1902"><a href="http://localhost:3527/#cb142-1902" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Posit Solutions: MLOps with vetiver and Posit</span><span class="co">](https://solutions.posit.co/gallery/model-management/vetiver/)</span></span>
<span id="cb142-1903"><a href="http://localhost:3527/#cb142-1903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1904"><a href="http://localhost:3527/#cb142-1904" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Github: End-to-End machine Learning Pipeline</span><span class="co">](https://github.com/sol-eng/bike_predict)</span></span>
<span id="cb142-1905"><a href="http://localhost:3527/#cb142-1905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1906"><a href="http://localhost:3527/#cb142-1906" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Posit: End-to_end Data Science with RStudio Connect</span><span class="co">](https://colorado.posit.co/rsc/bike-predict-r-dashboard/document.html)</span></span>
<span id="cb142-1907"><a href="http://localhost:3527/#cb142-1907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1908"><a href="http://localhost:3527/#cb142-1908" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Ventiver documentation</span><span class="co">](https://cran.r-project.org/web/packages/vetiver/vetiver.pdf)</span></span>
<span id="cb142-1909"><a href="http://localhost:3527/#cb142-1909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1910"><a href="http://localhost:3527/#cb142-1910" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Plumber Documentation</span><span class="co">](https://www.rplumber.io/articles/introduction.html)</span></span>
<span id="cb142-1911"><a href="http://localhost:3527/#cb142-1911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1912"><a href="http://localhost:3527/#cb142-1912" aria-hidden="true" tabindex="-1"></a>First of all a last fit of the created final model will be made. This is done as with the previous last fit the model is not compatible for deploying with vetiver. With this last fit on the training data the model fits to the requirements from vetiver</span>
<span id="cb142-1913"><a href="http://localhost:3527/#cb142-1913" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1914"><a href="http://localhost:3527/#cb142-1914" aria-hidden="true" tabindex="-1"></a><span class="in">```{r last_fit_for_deployment}</span></span>
<span id="cb142-1915"><a href="http://localhost:3527/#cb142-1915" aria-hidden="true" tabindex="-1"></a>last_fit_model_depl <span class="ot">&lt;-</span> <span class="fu">fit</span>(workflow_best_model, <span class="at">data=</span>train_data)</span>
<span id="cb142-1916"><a href="http://localhost:3527/#cb142-1916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1917"><a href="http://localhost:3527/#cb142-1917" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1918"><a href="http://localhost:3527/#cb142-1918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1919"><a href="http://localhost:3527/#cb142-1919" aria-hidden="true" tabindex="-1"></a>In the next step the model name and pin name gets specified.</span>
<span id="cb142-1920"><a href="http://localhost:3527/#cb142-1920" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1921"><a href="http://localhost:3527/#cb142-1921" aria-hidden="true" tabindex="-1"></a>Moreover the model is defined. For this the vetiver package is used.</span>
<span id="cb142-1922"><a href="http://localhost:3527/#cb142-1922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1923"><a href="http://localhost:3527/#cb142-1923" aria-hidden="true" tabindex="-1"></a><span class="in">```{r vetiver_model}</span></span>
<span id="cb142-1924"><a href="http://localhost:3527/#cb142-1924" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vetiver)</span>
<span id="cb142-1925"><a href="http://localhost:3527/#cb142-1925" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb142-1926"><a href="http://localhost:3527/#cb142-1926" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rsconnect)</span>
<span id="cb142-1927"><a href="http://localhost:3527/#cb142-1927" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pins)</span>
<span id="cb142-1928"><a href="http://localhost:3527/#cb142-1928" aria-hidden="true" tabindex="-1"></a><span class="co"># define names for model and pin</span></span>
<span id="cb142-1929"><a href="http://localhost:3527/#cb142-1929" aria-hidden="true" tabindex="-1"></a>model_name <span class="ot">&lt;-</span> <span class="st">"Prediction_of_exam_score_model_r"</span></span>
<span id="cb142-1930"><a href="http://localhost:3527/#cb142-1930" aria-hidden="true" tabindex="-1"></a>pin_name <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"daniel.steck/{model_name}"</span>)</span>
<span id="cb142-1931"><a href="http://localhost:3527/#cb142-1931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1932"><a href="http://localhost:3527/#cb142-1932" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">vetiver_model</span>( <span class="co">#create vetiver model</span></span>
<span id="cb142-1933"><a href="http://localhost:3527/#cb142-1933" aria-hidden="true" tabindex="-1"></a>  last_fit_model_depl, <span class="co">#model which performed the last fit</span></span>
<span id="cb142-1934"><a href="http://localhost:3527/#cb142-1934" aria-hidden="true" tabindex="-1"></a>  model_name, <span class="co">#model name from above</span></span>
<span id="cb142-1935"><a href="http://localhost:3527/#cb142-1935" aria-hidden="true" tabindex="-1"></a>  <span class="at">versioned =</span> <span class="cn">TRUE</span> <span class="co">#versioning shall be made</span></span>
<span id="cb142-1936"><a href="http://localhost:3527/#cb142-1936" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb142-1937"><a href="http://localhost:3527/#cb142-1937" aria-hidden="true" tabindex="-1"></a>v</span>
<span id="cb142-1938"><a href="http://localhost:3527/#cb142-1938" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1939"><a href="http://localhost:3527/#cb142-1939" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1940"><a href="http://localhost:3527/#cb142-1940" aria-hidden="true" tabindex="-1"></a>After the model was defined the model is written to the pin in order to deploy it.</span>
<span id="cb142-1941"><a href="http://localhost:3527/#cb142-1941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1942"><a href="http://localhost:3527/#cb142-1942" aria-hidden="true" tabindex="-1"></a>Sadly I could not find the information for Rsconnect in order to deploy it via an API in Rsconnect. Therefore the model will be written to a local and temporary board.</span>
<span id="cb142-1943"><a href="http://localhost:3527/#cb142-1943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1944"><a href="http://localhost:3527/#cb142-1944" aria-hidden="true" tabindex="-1"></a><span class="in">```{r pin_model}</span></span>
<span id="cb142-1945"><a href="http://localhost:3527/#cb142-1945" aria-hidden="true" tabindex="-1"></a>model_board <span class="ot">&lt;-</span> <span class="fu">board_temp</span>(<span class="at">versioned =</span> <span class="cn">TRUE</span>) <span class="co">#authentifact information for rsconnect board not found, therefore no deployment on rsconnect</span></span>
<span id="cb142-1946"><a href="http://localhost:3527/#cb142-1946" aria-hidden="true" tabindex="-1"></a><span class="co"># Write the model to the board.</span></span>
<span id="cb142-1947"><a href="http://localhost:3527/#cb142-1947" aria-hidden="true" tabindex="-1"></a>model_board <span class="sc">%&gt;%</span></span>
<span id="cb142-1948"><a href="http://localhost:3527/#cb142-1948" aria-hidden="true" tabindex="-1"></a> <span class="fu">vetiver_pin_write</span>(v)</span>
<span id="cb142-1949"><a href="http://localhost:3527/#cb142-1949" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1950"><a href="http://localhost:3527/#cb142-1950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1951"><a href="http://localhost:3527/#cb142-1951" aria-hidden="true" tabindex="-1"></a>Check all versions on the board:</span>
<span id="cb142-1952"><a href="http://localhost:3527/#cb142-1952" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1955"><a href="http://localhost:3527/#cb142-1955" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb142-1956"><a href="http://localhost:3527/#cb142-1956" aria-hidden="true" tabindex="-1"></a>model_board <span class="sc">%&gt;%</span> <span class="fu">pin_versions</span>(model_name)</span>
<span id="cb142-1957"><a href="http://localhost:3527/#cb142-1957" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1958"><a href="http://localhost:3527/#cb142-1958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1959"><a href="http://localhost:3527/#cb142-1959" aria-hidden="true" tabindex="-1"></a><span class="fu">## Serve model</span></span>
<span id="cb142-1960"><a href="http://localhost:3527/#cb142-1960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1961"><a href="http://localhost:3527/#cb142-1961" aria-hidden="true" tabindex="-1"></a>Usage of plumber in order to deploy the model with vetiver.</span>
<span id="cb142-1962"><a href="http://localhost:3527/#cb142-1962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1963"><a href="http://localhost:3527/#cb142-1963" aria-hidden="true" tabindex="-1"></a>If this code chunk is running it is possible to make predictions with the model in a separate window.</span>
<span id="cb142-1964"><a href="http://localhost:3527/#cb142-1964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1967"><a href="http://localhost:3527/#cb142-1967" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb142-1968"><a href="http://localhost:3527/#cb142-1968" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plumber)</span>
<span id="cb142-1969"><a href="http://localhost:3527/#cb142-1969" aria-hidden="true" tabindex="-1"></a><span class="co">#code is commeted out in order for the rendering of the quarto file. This code shall be put into the console in order to make predictions on the model.</span></span>
<span id="cb142-1970"><a href="http://localhost:3527/#cb142-1970" aria-hidden="true" tabindex="-1"></a><span class="co">#pr() %&gt;%</span></span>
<span id="cb142-1971"><a href="http://localhost:3527/#cb142-1971" aria-hidden="true" tabindex="-1"></a><span class="co">#  vetiver_api(v) %&gt;%</span></span>
<span id="cb142-1972"><a href="http://localhost:3527/#cb142-1972" aria-hidden="true" tabindex="-1"></a><span class="co">#  pr_run(port = 8000)</span></span>
<span id="cb142-1973"><a href="http://localhost:3527/#cb142-1973" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1974"><a href="http://localhost:3527/#cb142-1974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1975"><a href="http://localhost:3527/#cb142-1975" aria-hidden="true" tabindex="-1"></a>It is also possible to deploy the vetiver API to other infrastructures than Posit Connect (e.g. AWS or Azure). For this a Docker container helps a lot. This docker container will be created in the next code block. The code is commented out as it shall not be made for each run of the document. Moreover there wont be further changes in the model. If new files shall be created the code can be added to the console or the "<span class="sc">\#</span>" can be removed.</span>
<span id="cb142-1976"><a href="http://localhost:3527/#cb142-1976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1977"><a href="http://localhost:3527/#cb142-1977" aria-hidden="true" tabindex="-1"></a><span class="in">```{r prepare_dockerfile}</span></span>
<span id="cb142-1978"><a href="http://localhost:3527/#cb142-1978" aria-hidden="true" tabindex="-1"></a><span class="co">#vetiver_prepare_docker(model_board, model_name)</span></span>
<span id="cb142-1979"><a href="http://localhost:3527/#cb142-1979" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1980"><a href="http://localhost:3527/#cb142-1980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1981"><a href="http://localhost:3527/#cb142-1981" aria-hidden="true" tabindex="-1"></a>Three files have been created:</span>
<span id="cb142-1982"><a href="http://localhost:3527/#cb142-1982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1983"><a href="http://localhost:3527/#cb142-1983" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Dockerfile</span>
<span id="cb142-1984"><a href="http://localhost:3527/#cb142-1984" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1985"><a href="http://localhost:3527/#cb142-1985" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Plumber file serving the REST API</span>
<span id="cb142-1986"><a href="http://localhost:3527/#cb142-1986" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1987"><a href="http://localhost:3527/#cb142-1987" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>ventiver_renv_lock file to capture the model dependencies.</span>
<span id="cb142-1988"><a href="http://localhost:3527/#cb142-1988" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1989"><a href="http://localhost:3527/#cb142-1989" aria-hidden="true" tabindex="-1"></a>**Predict from the model endpoint:**</span>
<span id="cb142-1990"><a href="http://localhost:3527/#cb142-1990" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1991"><a href="http://localhost:3527/#cb142-1991" aria-hidden="true" tabindex="-1"></a>In case that the model is running in another process (e.g. remotely) it would be also possible to get predictions from this model in R. Below the endpoint definition is made as well as the request for a new student exam performance.</span>
<span id="cb142-1992"><a href="http://localhost:3527/#cb142-1992" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1993"><a href="http://localhost:3527/#cb142-1993" aria-hidden="true" tabindex="-1"></a><span class="in">```{r define_endpoint}</span></span>
<span id="cb142-1994"><a href="http://localhost:3527/#cb142-1994" aria-hidden="true" tabindex="-1"></a><span class="co">#endpoint &lt;- vetiver_endpoint("http://127.0.0.1:8000/predict")</span></span>
<span id="cb142-1995"><a href="http://localhost:3527/#cb142-1995" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-1996"><a href="http://localhost:3527/#cb142-1996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-1997"><a href="http://localhost:3527/#cb142-1997" aria-hidden="true" tabindex="-1"></a><span class="in">```{r predict_from_endpoint}</span></span>
<span id="cb142-1998"><a href="http://localhost:3527/#cb142-1998" aria-hidden="true" tabindex="-1"></a>random_student <span class="ot">&lt;-</span> <span class="fu">tibble</span> (</span>
<span id="cb142-1999"><a href="http://localhost:3527/#cb142-1999" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender =</span> <span class="st">"female"</span>,</span>
<span id="cb142-2000"><a href="http://localhost:3527/#cb142-2000" aria-hidden="true" tabindex="-1"></a>  <span class="at">ethnic_group =</span> <span class="st">"group E"</span>,</span>
<span id="cb142-2001"><a href="http://localhost:3527/#cb142-2001" aria-hidden="true" tabindex="-1"></a>  <span class="at">parent_education =</span><span class="st">"some college"</span>, </span>
<span id="cb142-2002"><a href="http://localhost:3527/#cb142-2002" aria-hidden="true" tabindex="-1"></a>  <span class="at">lunch =</span> <span class="st">"standard"</span>,</span>
<span id="cb142-2003"><a href="http://localhost:3527/#cb142-2003" aria-hidden="true" tabindex="-1"></a>  <span class="at">test_preparation =</span> <span class="st">"completed"</span></span>
<span id="cb142-2004"><a href="http://localhost:3527/#cb142-2004" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb142-2005"><a href="http://localhost:3527/#cb142-2005" aria-hidden="true" tabindex="-1"></a><span class="co">#predict(endpoint, random_student)</span></span>
<span id="cb142-2006"><a href="http://localhost:3527/#cb142-2006" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-2007"><a href="http://localhost:3527/#cb142-2007" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2008"><a href="http://localhost:3527/#cb142-2008" aria-hidden="true" tabindex="-1"></a>Sadly this prediction is not working as I always get the error message, that the connection is refused...</span>
<span id="cb142-2009"><a href="http://localhost:3527/#cb142-2009" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2010"><a href="http://localhost:3527/#cb142-2010" aria-hidden="true" tabindex="-1"></a>Probably the issue is that it was only deployed locally maybe the prediction from the endpoint is only possible as long as the model is deployed locally. In order to execute this chunk here, the previous needs to be stopped.</span>
<span id="cb142-2011"><a href="http://localhost:3527/#cb142-2011" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2012"><a href="http://localhost:3527/#cb142-2012" aria-hidden="true" tabindex="-1"></a><span class="fu">## Monitor model</span></span>
<span id="cb142-2013"><a href="http://localhost:3527/#cb142-2013" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2014"><a href="http://localhost:3527/#cb142-2014" aria-hidden="true" tabindex="-1"></a>After the model was successfully deployed it is very important to monitor its statistical performance. The issue is that the decrease of model performance is not noticed as the model can continue returning predictions without errors. These quiet performance problems might occur when the statistical distribution of an input feature changes or when there is change in the relationship between input features and the outcome.</span>
<span id="cb142-2015"><a href="http://localhost:3527/#cb142-2015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2016"><a href="http://localhost:3527/#cb142-2016" aria-hidden="true" tabindex="-1"></a>The silent failure can happen unnoticed if there is no monitoring for degradation.</span>
<span id="cb142-2017"><a href="http://localhost:3527/#cb142-2017" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2018"><a href="http://localhost:3527/#cb142-2018" aria-hidden="true" tabindex="-1"></a>The model monitoring did not work as I planned. I tried to solve it with the posit documentations and their examples. I assume that I am having issues as the model is not deployed to rsconnect and I only have it running locally as long as my code chunk on top is running.</span>
<span id="cb142-2019"><a href="http://localhost:3527/#cb142-2019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2020"><a href="http://localhost:3527/#cb142-2020" aria-hidden="true" tabindex="-1"></a>Sources for the attempt of model monitoring:</span>
<span id="cb142-2021"><a href="http://localhost:3527/#cb142-2021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2022"><a href="http://localhost:3527/#cb142-2022" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Posit Model metrics</span><span class="co">](https://colorado.posit.co/rsc/bike-predict-r-model-metrics/document.html)</span></span>
<span id="cb142-2023"><a href="http://localhost:3527/#cb142-2023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2024"><a href="http://localhost:3527/#cb142-2024" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Vetiver compute metrics</span><span class="co">](https://rstudio.github.io/vetiver-r/reference/vetiver_compute_metrics.html)</span></span>
<span id="cb142-2025"><a href="http://localhost:3527/#cb142-2025" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2026"><a href="http://localhost:3527/#cb142-2026" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Vetiver Model monitoring</span><span class="co">](https://vetiver.rstudio.com/get-started/monitor.html)</span></span>
<span id="cb142-2027"><a href="http://localhost:3527/#cb142-2027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2028"><a href="http://localhost:3527/#cb142-2028" aria-hidden="true" tabindex="-1"></a><span class="fu">## Shiny</span></span>
<span id="cb142-2029"><a href="http://localhost:3527/#cb142-2029" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2030"><a href="http://localhost:3527/#cb142-2030" aria-hidden="true" tabindex="-1"></a>Within this chapter the model and corresponding visualization shall be deployed with shiny and the target is to visualize everything in a dashboard.</span>
<span id="cb142-2031"><a href="http://localhost:3527/#cb142-2031" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2032"><a href="http://localhost:3527/#cb142-2032" aria-hidden="true" tabindex="-1"></a>First of all the connection has to be established. For this the data provided within the shiny account is used based on this documentation: <span class="co">[</span><span class="ot">Getting started with shiny</span><span class="co">](https://shiny.rstudio.com/articles/shinyapps.html?_ga=2.28034556.1347876817.1682150371-373314606.1682150371)</span></span>
<span id="cb142-2033"><a href="http://localhost:3527/#cb142-2033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2034"><a href="http://localhost:3527/#cb142-2034" aria-hidden="true" tabindex="-1"></a><span class="in">```{r connection_rsconnect}</span></span>
<span id="cb142-2035"><a href="http://localhost:3527/#cb142-2035" aria-hidden="true" tabindex="-1"></a>rsconnect<span class="sc">::</span><span class="fu">setAccountInfo</span>(<span class="at">name=</span><span class="st">'danielsteck'</span>, <span class="at">token=</span><span class="st">'27FA72E141C5D1C0E638BBD54BB2421B'</span>, <span class="at">secret=</span><span class="st">'kxHXXMfIFDDJDac/jIvWP7OOffeX8+eWZdDKl/Hu'</span>)</span>
<span id="cb142-2036"><a href="http://localhost:3527/#cb142-2036" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb142-2037"><a href="http://localhost:3527/#cb142-2037" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2038"><a href="http://localhost:3527/#cb142-2038" aria-hidden="true" tabindex="-1"></a>Note: Jan I have removed here my connection details for my shiny account.</span>
<span id="cb142-2039"><a href="http://localhost:3527/#cb142-2039" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2040"><a href="http://localhost:3527/#cb142-2040" aria-hidden="true" tabindex="-1"></a>For creating shiny app it is required to build an separate server.R file as well as a ui.R file in which the data for the app are stored so that the app can be run. These files were created and are stored within t a separate folder in this working directory. Therefore no further input regarding shiny can be found below. Please have a look in the r file which is creating the shiny application.</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




<div class="modal__dialog micromodal-slide" id="quarto-log-error-modal" aria-hidden="true">
  <div class="modal__overlay" tabindex="2" data-micromodal-close="">
    <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="quarto-log-error-modal-title">
      <header class="modal__header">
        <h2 class="modal__title" id="quarto-log-error-modal-title">
          <i class="bi bi-exclamation-circle"></i>Error
        </h2>
        <button class="modal__close" aria-label="Close modal" data-micromodal-close=""></button>
      </header>
      <div class="modal__content" id="quarto-log-error-modal-content">
        <pre tabindex="1" id="quarto-log-error-display"></pre>
      </div>
      <footer class="modal__footer">
      </footer>
    </div>
  </div>
</div>
<style type="text/css">
#quarto-log-error-modal .modal__overlay {
  z-index: 5000;
}
#quarto-log-error-modal-content {
  border: 1px solid #dee2e6;
  overflow-y: auto;
}
#quarto-log-error-display {
  min-height: 100px;
  padding: 8px;
  margin-bottom: 0;
  font-family: monospace;
}
#quarto-log-error-display:focus {
  outline: none;
}
.modal__dialog {
  font-size: 16px;
}
.modal__overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.4);
  display: flex;
  justify-content: center;
  align-items: center;
}
.modal__container {
  position: fixed;
  top: 80px;
  background-color: #fff;
  padding: 15px;
  padding-top: 10px;
  min-width: 500px;
  max-width: 90%;
  max-height: 90vh;
  border-radius: 4px;
  overflow-y: auto;
  box-sizing: border-box;
}
.modal__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.modal__title {
  margin-top: 0;
  margin-bottom: 0;
  font-weight: 600;
  border-bottom: none;
  padding-bottom: 10px;
  font-size: 20px;
  color: rgb(191,71,65);
  line-height: 1.25;
  box-sizing: border-box;
}
.modal__title .bi {
  margin-right: 7px;
}
.modal__close {
  background: transparent;
  border: 0;
  margin-bottom: 10px;
}
.modal__header .modal__close:before { content: "\2715"; }
.modal__content {
  margin-top: 0;
  margin-bottom: 0;
}
@keyframes mmfadeIn {
    from { opacity: 0; }
      to { opacity: 1; }
}
@keyframes mmfadeOut {
    from { opacity: 1; }
      to { opacity: 0; }
}
@keyframes mmslideIn {
  from { transform: translateY(15%); }
    to { transform: translateY(0); }
}
@keyframes mmslideOut {
    from { transform: translateY(0); }
    to { transform: translateY(-10%); }
}
.micromodal-slide {
  display: none;
}
.micromodal-slide.is-open {
  display: block;
}
.micromodal-slide[aria-hidden="false"] .modal__overlay {
  animation: mmfadeIn .3s cubic-bezier(0.0, 0.0, 0.2, 1);
}
.micromodal-slide[aria-hidden="false"] .modal__container {
  animation: mmslideIn .3s cubic-bezier(0, 0, .2, 1);
}
.micromodal-slide[aria-hidden="true"] .modal__overlay {
  animation: mmfadeOut .3s cubic-bezier(0.0, 0.0, 0.2, 1);
}
.micromodal-slide[aria-hidden="true"] .modal__container {
  animation: mmslideOut .3s cubic-bezier(0, 0, .2, 1);
}
.micromodal-slide .modal__container,
.micromodal-slide .modal__overlay {
  will-change: transform;
} 
</style>
<script type="text/javascript">
  window.backupDefine = window.define; window.define = undefined;
  /*  ansi_up.js
   *  author : Dru Nelson
   *  license : MIT
   *  http://github.com/drudru/ansi_up
   */
   (function (root, factory) {
      if (typeof define === 'function' && define.amd) {
          // AMD. Register as an anonymous module.
          define(['exports'], factory);
      } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {
          // CommonJS
          factory(exports);
      } else {
          // Browser globals
          var exp = {};
          factory(exp);
          root.AnsiUp = exp.default;
      }
  }(this, function (exports) {
  "use strict";
  var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
      if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
      return cooked;
  };
  var PacketKind;
  (function (PacketKind) {
      PacketKind[PacketKind["EOS"] = 0] = "EOS";
      PacketKind[PacketKind["Text"] = 1] = "Text";
      PacketKind[PacketKind["Incomplete"] = 2] = "Incomplete";
      PacketKind[PacketKind["ESC"] = 3] = "ESC";
      PacketKind[PacketKind["Unknown"] = 4] = "Unknown";
      PacketKind[PacketKind["SGR"] = 5] = "SGR";
      PacketKind[PacketKind["OSCURL"] = 6] = "OSCURL";
  })(PacketKind || (PacketKind = {}));
  var AnsiUp = (function () {
      function AnsiUp() {
          this.VERSION = "5.1.0";
          this.setup_palettes();
          this._use_classes = false;
          this.bold = false;
          this.italic = false;
          this.underline = false;
          this.fg = this.bg = null;
          this._buffer = '';
          this._url_whitelist = { 'http': 1, 'https': 1 };
      }
      Object.defineProperty(AnsiUp.prototype, "use_classes", {
          get: function () {
              return this._use_classes;
          },
          set: function (arg) {
              this._use_classes = arg;
          },
          enumerable: false,
          configurable: true
      });
      Object.defineProperty(AnsiUp.prototype, "url_whitelist", {
          get: function () {
              return this._url_whitelist;
          },
          set: function (arg) {
              this._url_whitelist = arg;
          },
          enumerable: false,
          configurable: true
      });
      AnsiUp.prototype.setup_palettes = function () {
          var _this = this;
          this.ansi_colors =
              [
                  [
                      { rgb: [0, 0, 0], class_name: "ansi-black" },
                      { rgb: [187, 0, 0], class_name: "ansi-red" },
                      { rgb: [0, 187, 0], class_name: "ansi-green" },
                      { rgb: [187, 187, 0], class_name: "ansi-yellow" },
                      { rgb: [0, 0, 187], class_name: "ansi-blue" },
                      { rgb: [187, 0, 187], class_name: "ansi-magenta" },
                      { rgb: [0, 187, 187], class_name: "ansi-cyan" },
                      { rgb: [255, 255, 255], class_name: "ansi-white" }
                  ],
                  [
                      { rgb: [85, 85, 85], class_name: "ansi-bright-black" },
                      { rgb: [255, 85, 85], class_name: "ansi-bright-red" },
                      { rgb: [0, 255, 0], class_name: "ansi-bright-green" },
                      { rgb: [255, 255, 85], class_name: "ansi-bright-yellow" },
                      { rgb: [85, 85, 255], class_name: "ansi-bright-blue" },
                      { rgb: [255, 85, 255], class_name: "ansi-bright-magenta" },
                      { rgb: [85, 255, 255], class_name: "ansi-bright-cyan" },
                      { rgb: [255, 255, 255], class_name: "ansi-bright-white" }
                  ]
              ];
          this.palette_256 = [];
          this.ansi_colors.forEach(function (palette) {
              palette.forEach(function (rec) {
                  _this.palette_256.push(rec);
              });
          });
          var levels = [0, 95, 135, 175, 215, 255];
          for (var r = 0; r < 6; ++r) {
              for (var g = 0; g < 6; ++g) {
                  for (var b = 0; b < 6; ++b) {
                      var col = { rgb: [levels[r], levels[g], levels[b]], class_name: 'truecolor' };
                      this.palette_256.push(col);
                  }
              }
          }
          var grey_level = 8;
          for (var i = 0; i < 24; ++i, grey_level += 10) {
              var gry = { rgb: [grey_level, grey_level, grey_level], class_name: 'truecolor' };
              this.palette_256.push(gry);
          }
      };
      AnsiUp.prototype.escape_txt_for_html = function (txt) {
          return txt.replace(/[&<>"']/gm, function (str) {
              if (str === "&")
                  return "&amp;";
              if (str === "<")
                  return "&lt;";
              if (str === ">")
                  return "&gt;";
              if (str === "\"")
                  return "&quot;";
              if (str === "'")
                  return "&#x27;";
          });
      };
      AnsiUp.prototype.append_buffer = function (txt) {
          var str = this._buffer + txt;
          this._buffer = str;
      };
      AnsiUp.prototype.get_next_packet = function () {
          var pkt = {
              kind: PacketKind.EOS,
              text: '',
              url: ''
          };
          var len = this._buffer.length;
          if (len == 0)
              return pkt;
          var pos = this._buffer.indexOf("\x1B");
          if (pos == -1) {
              pkt.kind = PacketKind.Text;
              pkt.text = this._buffer;
              this._buffer = '';
              return pkt;
          }
          if (pos > 0) {
              pkt.kind = PacketKind.Text;
              pkt.text = this._buffer.slice(0, pos);
              this._buffer = this._buffer.slice(pos);
              return pkt;
          }
          if (pos == 0) {
              if (len == 1) {
                  pkt.kind = PacketKind.Incomplete;
                  return pkt;
              }
              var next_char = this._buffer.charAt(1);
              if ((next_char != '[') && (next_char != ']')) {
                  pkt.kind = PacketKind.ESC;
                  pkt.text = this._buffer.slice(0, 1);
                  this._buffer = this._buffer.slice(1);
                  return pkt;
              }
              if (next_char == '[') {
                  if (!this._csi_regex) {
                      this._csi_regex = rgx(__makeTemplateObject(["\n                        ^                           # beginning of line\n                                                    #\n                                                    # First attempt\n                        (?:                         # legal sequence\n                          \u001B[                      # CSI\n                          ([<-?]?)              # private-mode char\n                          ([d;]*)                    # any digits or semicolons\n                          ([ -/]?               # an intermediate modifier\n                          [@-~])                # the command\n                        )\n                        |                           # alternate (second attempt)\n                        (?:                         # illegal sequence\n                          \u001B[                      # CSI\n                          [ -~]*                # anything legal\n                          ([\0-\u001F:])              # anything illegal\n                        )\n                    "], ["\n                        ^                           # beginning of line\n                                                    #\n                                                    # First attempt\n                        (?:                         # legal sequence\n                          \\x1b\\[                      # CSI\n                          ([\\x3c-\\x3f]?)              # private-mode char\n                          ([\\d;]*)                    # any digits or semicolons\n                          ([\\x20-\\x2f]?               # an intermediate modifier\n                          [\\x40-\\x7e])                # the command\n                        )\n                        |                           # alternate (second attempt)\n                        (?:                         # illegal sequence\n                          \\x1b\\[                      # CSI\n                          [\\x20-\\x7e]*                # anything legal\n                          ([\\x00-\\x1f:])              # anything illegal\n                        )\n                    "]));
                  }
                  var match = this._buffer.match(this._csi_regex);
                  if (match === null) {
                      pkt.kind = PacketKind.Incomplete;
                      return pkt;
                  }
                  if (match[4]) {
                      pkt.kind = PacketKind.ESC;
                      pkt.text = this._buffer.slice(0, 1);
                      this._buffer = this._buffer.slice(1);
                      return pkt;
                  }
                  if ((match[1] != '') || (match[3] != 'm'))
                      pkt.kind = PacketKind.Unknown;
                  else
                      pkt.kind = PacketKind.SGR;
                  pkt.text = match[2];
                  var rpos = match[0].length;
                  this._buffer = this._buffer.slice(rpos);
                  return pkt;
              }
              if (next_char == ']') {
                  if (len < 4) {
                      pkt.kind = PacketKind.Incomplete;
                      return pkt;
                  }
                  if ((this._buffer.charAt(2) != '8')
                      || (this._buffer.charAt(3) != ';')) {
                      pkt.kind = PacketKind.ESC;
                      pkt.text = this._buffer.slice(0, 1);
                      this._buffer = this._buffer.slice(1);
                      return pkt;
                  }
                  if (!this._osc_st) {
                      this._osc_st = rgxG(__makeTemplateObject(["\n                        (?:                         # legal sequence\n                          (\u001B\\)                    # ESC                           |                           # alternate\n                          (\u0007)                      # BEL (what xterm did)\n                        )\n                        |                           # alternate (second attempt)\n                        (                           # illegal sequence\n                          [\0-\u0006]                 # anything illegal\n                          |                           # alternate\n                          [\b-\u001A]                 # anything illegal\n                          |                           # alternate\n                          [\u001C-\u001F]                 # anything illegal\n                        )\n                    "], ["\n                        (?:                         # legal sequence\n                          (\\x1b\\\\)                    # ESC \\\n                          |                           # alternate\n                          (\\x07)                      # BEL (what xterm did)\n                        )\n                        |                           # alternate (second attempt)\n                        (                           # illegal sequence\n                          [\\x00-\\x06]                 # anything illegal\n                          |                           # alternate\n                          [\\x08-\\x1a]                 # anything illegal\n                          |                           # alternate\n                          [\\x1c-\\x1f]                 # anything illegal\n                        )\n                    "]));
                  }
                  this._osc_st.lastIndex = 0;
                  {
                      var match_1 = this._osc_st.exec(this._buffer);
                      if (match_1 === null) {
                          pkt.kind = PacketKind.Incomplete;
                          return pkt;
                      }
                      if (match_1[3]) {
                          pkt.kind = PacketKind.ESC;
                          pkt.text = this._buffer.slice(0, 1);
                          this._buffer = this._buffer.slice(1);
                          return pkt;
                      }
                  }
                  {
                      var match_2 = this._osc_st.exec(this._buffer);
                      if (match_2 === null) {
                          pkt.kind = PacketKind.Incomplete;
                          return pkt;
                      }
                      if (match_2[3]) {
                          pkt.kind = PacketKind.ESC;
                          pkt.text = this._buffer.slice(0, 1);
                          this._buffer = this._buffer.slice(1);
                          return pkt;
                      }
                  }
                  if (!this._osc_regex) {
                      this._osc_regex = rgx(__makeTemplateObject(["\n                        ^                           # beginning of line\n                                                    #\n                        \u001B]8;                    # OSC Hyperlink\n                        [ -:<-~]*       # params (excluding ;)\n                        ;                           # end of params\n                        ([!-~]{0,512})        # URL capture\n                        (?:                         # ST\n                          (?:\u001B\\)                  # ESC                           |                           # alternate\n                          (?:\u0007)                    # BEL (what xterm did)\n                        )\n                        ([ -~]+)              # TEXT capture\n                        \u001B]8;;                   # OSC Hyperlink End\n                        (?:                         # ST\n                          (?:\u001B\\)                  # ESC                           |                           # alternate\n                          (?:\u0007)                    # BEL (what xterm did)\n                        )\n                    "], ["\n                        ^                           # beginning of line\n                                                    #\n                        \\x1b\\]8;                    # OSC Hyperlink\n                        [\\x20-\\x3a\\x3c-\\x7e]*       # params (excluding ;)\n                        ;                           # end of params\n                        ([\\x21-\\x7e]{0,512})        # URL capture\n                        (?:                         # ST\n                          (?:\\x1b\\\\)                  # ESC \\\n                          |                           # alternate\n                          (?:\\x07)                    # BEL (what xterm did)\n                        )\n                        ([\\x20-\\x7e]+)              # TEXT capture\n                        \\x1b\\]8;;                   # OSC Hyperlink End\n                        (?:                         # ST\n                          (?:\\x1b\\\\)                  # ESC \\\n                          |                           # alternate\n                          (?:\\x07)                    # BEL (what xterm did)\n                        )\n                    "]));
                  }
                  var match = this._buffer.match(this._osc_regex);
                  if (match === null) {
                      pkt.kind = PacketKind.ESC;
                      pkt.text = this._buffer.slice(0, 1);
                      this._buffer = this._buffer.slice(1);
                      return pkt;
                  }
                  pkt.kind = PacketKind.OSCURL;
                  pkt.url = match[1];
                  pkt.text = match[2];
                  var rpos = match[0].length;
                  this._buffer = this._buffer.slice(rpos);
                  return pkt;
              }
          }
      };
      AnsiUp.prototype.ansi_to_html = function (txt) {
          this.append_buffer(txt);
          var blocks = [];
          while (true) {
              var packet = this.get_next_packet();
              if ((packet.kind == PacketKind.EOS)
                  || (packet.kind == PacketKind.Incomplete))
                  break;
              if ((packet.kind == PacketKind.ESC)
                  || (packet.kind == PacketKind.Unknown))
                  continue;
              if (packet.kind == PacketKind.Text)
                  blocks.push(this.transform_to_html(this.with_state(packet)));
              else if (packet.kind == PacketKind.SGR)
                  this.process_ansi(packet);
              else if (packet.kind == PacketKind.OSCURL)
                  blocks.push(this.process_hyperlink(packet));
          }
          return blocks.join("");
      };
      AnsiUp.prototype.with_state = function (pkt) {
          return { bold: this.bold, italic: this.italic, underline: this.underline, fg: this.fg, bg: this.bg, text: pkt.text };
      };
      AnsiUp.prototype.process_ansi = function (pkt) {
          var sgr_cmds = pkt.text.split(';');
          while (sgr_cmds.length > 0) {
              var sgr_cmd_str = sgr_cmds.shift();
              var num = parseInt(sgr_cmd_str, 10);
              if (isNaN(num) || num === 0) {
                  this.fg = this.bg = null;
                  this.bold = false;
                  this.italic = false;
                  this.underline = false;
              }
              else if (num === 1) {
                  this.bold = true;
              }
              else if (num === 3) {
                  this.italic = true;
              }
              else if (num === 4) {
                  this.underline = true;
              }
              else if (num === 22) {
                  this.bold = false;
              }
              else if (num === 23) {
                  this.italic = false;
              }
              else if (num === 24) {
                  this.underline = false;
              }
              else if (num === 39) {
                  this.fg = null;
              }
              else if (num === 49) {
                  this.bg = null;
              }
              else if ((num >= 30) && (num < 38)) {
                  this.fg = this.ansi_colors[0][(num - 30)];
              }
              else if ((num >= 40) && (num < 48)) {
                  this.bg = this.ansi_colors[0][(num - 40)];
              }
              else if ((num >= 90) && (num < 98)) {
                  this.fg = this.ansi_colors[1][(num - 90)];
              }
              else if ((num >= 100) && (num < 108)) {
                  this.bg = this.ansi_colors[1][(num - 100)];
              }
              else if (num === 38 || num === 48) {
                  if (sgr_cmds.length > 0) {
                      var is_foreground = (num === 38);
                      var mode_cmd = sgr_cmds.shift();
                      if (mode_cmd === '5' && sgr_cmds.length > 0) {
                          var palette_index = parseInt(sgr_cmds.shift(), 10);
                          if (palette_index >= 0 && palette_index <= 255) {
                              if (is_foreground)
                                  this.fg = this.palette_256[palette_index];
                              else
                                  this.bg = this.palette_256[palette_index];
                          }
                      }
                      if (mode_cmd === '2' && sgr_cmds.length > 2) {
                          var r = parseInt(sgr_cmds.shift(), 10);
                          var g = parseInt(sgr_cmds.shift(), 10);
                          var b = parseInt(sgr_cmds.shift(), 10);
                          if ((r >= 0 && r <= 255) && (g >= 0 && g <= 255) && (b >= 0 && b <= 255)) {
                              var c = { rgb: [r, g, b], class_name: 'truecolor' };
                              if (is_foreground)
                                  this.fg = c;
                              else
                                  this.bg = c;
                          }
                      }
                  }
              }
          }
      };
      AnsiUp.prototype.transform_to_html = function (fragment) {
          var txt = fragment.text;
          if (txt.length === 0)
              return txt;
          txt = this.escape_txt_for_html(txt);
          if (!fragment.bold && !fragment.italic && !fragment.underline && fragment.fg === null && fragment.bg === null)
              return txt;
          var styles = [];
          var classes = [];
          var fg = fragment.fg;
          var bg = fragment.bg;
          if (fragment.bold)
              styles.push('font-weight:bold');
          if (fragment.italic)
              styles.push('font-style:italic');
          if (fragment.underline)
              styles.push('text-decoration:underline');
          if (!this._use_classes) {
              if (fg)
                  styles.push("color:rgb(" + fg.rgb.join(',') + ")");
              if (bg)
                  styles.push("background-color:rgb(" + bg.rgb + ")");
          }
          else {
              if (fg) {
                  if (fg.class_name !== 'truecolor') {
                      classes.push(fg.class_name + "-fg");
                  }
                  else {
                      styles.push("color:rgb(" + fg.rgb.join(',') + ")");
                  }
              }
              if (bg) {
                  if (bg.class_name !== 'truecolor') {
                      classes.push(bg.class_name + "-bg");
                  }
                  else {
                      styles.push("background-color:rgb(" + bg.rgb.join(',') + ")");
                  }
              }
          }
          var class_string = '';
          var style_string = '';
          if (classes.length)
              class_string = " class=\"" + classes.join(' ') + "\"";
          if (styles.length)
              style_string = " style=\"" + styles.join(';') + "\"";
          return "<span" + style_string + class_string + ">" + txt + "</span>";
      };
      ;
      AnsiUp.prototype.process_hyperlink = function (pkt) {
          var parts = pkt.url.split(':');
          if (parts.length < 1)
              return '';
          if (!this._url_whitelist[parts[0]])
              return '';
          var result = "<a href=\"" + this.escape_txt_for_html(pkt.url) + "\">" + this.escape_txt_for_html(pkt.text) + "</a>";
          return result;
      };
      return AnsiUp;
  }());
  function rgx(tmplObj) {
      var subst = [];
      for (var _i = 1; _i < arguments.length; _i++) {
          subst[_i - 1] = arguments[_i];
      }
      var regexText = tmplObj.raw[0];
      var wsrgx = /^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm;
      var txt2 = regexText.replace(wsrgx, '');
      return new RegExp(txt2);
  }
  function rgxG(tmplObj) {
      var subst = [];
      for (var _i = 1; _i < arguments.length; _i++) {
          subst[_i - 1] = arguments[_i];
      }
      var regexText = tmplObj.raw[0];
      var wsrgx = /^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm;
      var txt2 = regexText.replace(wsrgx, '');
      return new RegExp(txt2, 'g');
  }
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.default = AnsiUp;
  }));
  // micromodal: https://github.com/Ghosh/micromodal
  !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).MicroModal=t()}(this,(function(){"use strict";function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var n,i,a,r,s,l=(n=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],i=function(){function o(e){var n=e.targetModal,i=e.triggers,a=void 0===i?[]:i,r=e.onShow,s=void 0===r?function(){}:r,l=e.onClose,c=void 0===l?function(){}:l,d=e.openTrigger,u=void 0===d?"data-micromodal-trigger":d,f=e.closeTrigger,h=void 0===f?"data-micromodal-close":f,v=e.openClass,g=void 0===v?"is-open":v,m=e.disableScroll,b=void 0!==m&&m,y=e.disableFocus,p=void 0!==y&&y,w=e.awaitCloseAnimation,E=void 0!==w&&w,k=e.awaitOpenAnimation,M=void 0!==k&&k,A=e.debugMode,C=void 0!==A&&A;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.modal=document.getElementById(n),this.config={debugMode:C,disableScroll:b,openTrigger:u,closeTrigger:h,openClass:g,onShow:s,onClose:c,awaitCloseAnimation:E,awaitOpenAnimation:M,disableFocus:p},a.length>0&&this.registerTriggers.apply(this,t(a)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var i,a,r;return i=o,(a=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];o.filter(Boolean).forEach((function(t){t.addEventListener("click",(function(t){return e.showModal(t)}))}))}},{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var o=function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()};this.modal.addEventListener("animationend",o,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var o=this.config.openClass;this.modal.addEventListener("animationend",(function e(){t.classList.remove(o),t.removeEventListener("animationend",e,!1)}),!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){(e.target.hasAttribute(this.config.closeTrigger)||e.target.parentNode.hasAttribute(this.config.closeTrigger))&&(e.preventDefault(),e.stopPropagation(),this.closeModal(e))}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(n);return Array.apply(void 0,t(e))}},{key:"setFocusToFirstNode",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var o=t.filter((function(t){return!t.hasAttribute(e.config.closeTrigger)}));o.length>0&&o[0].focus(),0===o.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter((function(e){return null!==e.offsetParent})),this.modal.contains(document.activeElement)){var o=t.indexOf(document.activeElement);e.shiftKey&&0===o&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&o===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&e(i.prototype,a),r&&e(i,r),o}(),a=null,r=function(e){if(!document.getElementById(e))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},s=function(e,t){if(function(e){e.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!t)return!0;for(var o in t)r(o);return!0},{init:function(e){var o=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),n=t(document.querySelectorAll("[".concat(o.openTrigger,"]"))),r=function(e,t){var o=[];return e.forEach((function(e){var n=e.attributes[t].value;void 0===o[n]&&(o[n]=[]),o[n].push(e)})),o}(n,o.openTrigger);if(!0!==o.debugMode||!1!==s(n,r))for(var l in r){var c=r[l];o.targetModal=l,o.triggers=t(c),a=new i(o)}},show:function(e,t){var o=t||{};o.targetModal=e,!0===o.debugMode&&!1===r(e)||(a&&a.removeEventListeners(),(a=new i(o)).showModal())},close:function(e){e?a.closeModalById(e):a.closeModal()}});return"undefined"!=typeof window&&(window.MicroModal=l),l}));  
  window.define = window.backupDefine; window.backupDefine = undefined;
  </script>
<script type="text/javascript">
  (function () {
    // forward keydown events so shortcuts can work in vscode, see:
    // https://github.com/microsoft/vscode/issues/65452#issuecomment-586485815
    if (window.parent.postMessage) {
      window.document.addEventListener('keydown', e => {
        const event = {
          type: "keydown",
          data: {
            altKey: e.altKey,
            code: e.code,
            ctrlKey: e.ctrlKey,
            isComposing: e.isComposing,
            key: e.key,
            location: e.location,
            metaKey: e.metaKey,
            repeat: e.repeat,
            shiftKey: e.shiftKey
          }
        };
        window.parent.postMessage(event, '*');
      });
    }
    // listen for execCommand messages
    window.addEventListener("message", function (event) {
      if (event.data.type === "devhost-exec-command") {
        window.document.execCommand(event.data.data);
      } 
    }, true);
    const logEntries = new Array(1000);
    logEntries.offset = 0;
    function recordLogEntry(entry) {
      logEntries[logEntries.offset++] = entry;
      logEntries.offset %= logEntries.length;
    }
    function getLogEntry(i) { // backwards, 0 is most recent
        return logEntries[(logEntries.offset - 1 - i + logEntries.length) % logEntries.length];
    }
    const protocol = window.location.protocol === "https:" ? "wss:" : "ws:";
    let path = window.location.pathname;
    if (!/\/$/.test(path)) path += "/";
    const devServerSocket = new WebSocket(protocol + "//" + window.location.host + path);
    let reloadPage = true;
    addEventListener("beforeunload", () => {
      // don't reload page in case of navigation events
      reloadPage = false;
    })
    devServerSocket.onopen = () => {
      console.log('Socket connection open. Listening for events.');
      // if the socket closes for any reason (e.g. this occurs in electron apps
      // when the computer suspends) then reload to reestablish the connection 
      devServerSocket.onclose = () => {
        if (reloadPage) {
          console.log('Socket connection closed. Reloading.');
          window.location.reload(true);
        }
      }
    };
    // append for errors that occur within the error window
    let lastError = 0;
    const kErrorWindow = 2500;
    function showError(msg) {
      const ansiUp = new AnsiUp
      const html = ansiUp.ansi_to_html(msg.trim());
      const display = document.getElementById("quarto-log-error-display");
      if (display.innerHTML && ((Date.now() - lastError) < kErrorWindow)) {
        display.innerHTML = display.innerHTML + "<br/>" +  html;
      } else {
        display.innerHTML = html
      }
      lastError = Date.now()
      MicroModal.show('quarto-log-error-modal', {
        awaitCloseAnimation: true,
        onClose: () => { display.innerHTML = ""; }
      });
      // post message to parent indicating we had an error
      if (window.parent.postMessage) {
        window.parent.postMessage({
          type: "error",
          msg: msg,
        }, "*");
      }
    }
    // see if there is already an error to show
    const renderError = document.getElementById("quarto-render-error");
    if (renderError) {
      showError(renderError.innerHTML.trim());
    }
    const normalizeTarget = (target) => {
      return target.replace(/\/index\.html/, "/")
    };
    devServerSocket.onmessage = (msg) => {
      if (msg.data.startsWith('reload')) {
        let target = normalizeTarget(msg.data.replace(/^reload/, ""));
        // prepend proxy path to target if we have one
        if (target) {
          const pathPrefix = 
            window.location.pathname.match(/^.*?\/p\/\w+\//) ||
            window.location.pathname.match(/^.*?\/user\/[\w\d]+\/proxy\/\d+\//);
          if (pathPrefix) {
            target = pathPrefix + target.slice(1);
          }
        }
        if (target && (target !== normalizeTarget(window.location.pathname))) {
          window.location.replace(target);
        } else {
          window.location.reload(true);
        }
      } else if (msg.data.startsWith('log:')) {
        const ansiUp = new AnsiUp
        const log = JSON.parse(msg.data.substr(4));
        recordLogEntry(log);
        if (log.levelName === "ERROR") {
          showError(log.msgFormatted)
        } else {
          // see if there is a knitr error to report
          const kExecutionHalted = "Execution halted";
          if (log.msg.indexOf(kExecutionHalted) !== -1) {
            // scan backwards for beginning of error
            const errorEntries = [getLogEntry(0).msgFormatted];
            for (let i=1; i<logEntries.length; i++) {
              const logEntry = getLogEntry(i);
              if (logEntry) {
                errorEntries.unshift(logEntry.msgFormatted);
                if (logEntry.msg.indexOf("Quitting from lines") !== -1) {
                  showError(errorEntries.join(""));
                  break;
                } else if (logEntry.msg.indexOf(kExecutionHalted) !== -1) {
                  break;
                }
              } else {
                break;
              }
            }
          }
        }
      }
    };
  })();
</script>

<script type="text/javascript">
  if (window.parent.postMessage) {
    // wait for message providing confirmation we are in a devhost
    window.addEventListener("message", function (event) {
      if (event.data.type === "devhost-init") {
        window.quartoDevhost = {
          openInputFile: function (line, column, highlight) {
            window.parent.postMessage({
              type: "openfile",
              file: "C:\Users\Daniel\Dropbox\Data_Science_2021\2023_03_Programming_langueages_for_DS\Github\Project-Students-grades\Project_Students_grades.qmd",
              line: line,
              column: column,
              highlight: highlight
            }, event.origin);
          }
        };
      } else if (event.data.type === "goback") {
        window.history.back()
      } else if (event.data.type === "goforward") {
        window.history.forward()
      }
    }, true);
    // notify host of navigation (e.g. for 'pop out' command)
    window.parent.postMessage({
      type: "navigate",
      href: window.location.href,
      file: "C:\Users\Daniel\Dropbox\Data_Science_2021\2023_03_Programming_langueages_for_DS\Github\Project-Students-grades\Project_Students_grades.qmd"
    }, "*");
  }
</script>
</body></html>